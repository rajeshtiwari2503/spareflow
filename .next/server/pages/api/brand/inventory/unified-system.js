"use strict";(()=>{var exports={};exports.id="pages/api/brand/inventory/unified-system",exports.ids=["pages/api/brand/inventory/unified-system"],exports.modules={"@prisma/client/edge":n=>{n.exports=require("@prisma/client/edge")},bcryptjs:n=>{n.exports=require("bcryptjs")},jsonwebtoken:n=>{n.exports=require("jsonwebtoken")},"next/dist/compiled/next-server/pages-api.runtime.dev.js":n=>{n.exports=require("next/dist/compiled/next-server/pages-api.runtime.dev.js")},"@prisma/extension-accelerate":n=>{n.exports=import("@prisma/extension-accelerate")},"(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbrand%2Finventory%2Funified-system&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cbrand%5Cinventory%5Cunified-system.ts&middlewareConfigBase64=e30%3D!":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ "(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ "(api)/./node_modules/next/dist/server/future/route-kind.js");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ "(api)/./node_modules/next/dist/build/templates/helpers.js");\n/* harmony import */ var _src_pages_api_brand_inventory_unified_system_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\brand\\inventory\\unified-system.ts */ "(api)/./src/pages/api/brand/inventory/unified-system.ts");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_brand_inventory_unified_system_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_brand_inventory_unified_system_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_brand_inventory_unified_system_ts__WEBPACK_IMPORTED_MODULE_3__, "default"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_brand_inventory_unified_system_ts__WEBPACK_IMPORTED_MODULE_3__, "config");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: "/api/brand/inventory/unified-system",\n        pathname: "/api/brand/inventory/unified-system",\n        // The following aren\'t used in production.\n        bundlePath: "",\n        filename: ""\n    },\n    userland: _src_pages_api_brand_inventory_unified_system_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmJyYW5kJTJGaW52ZW50b3J5JTJGdW5pZmllZC1zeXN0ZW0mcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q2JyYW5kJTVDaW52ZW50b3J5JTVDdW5pZmllZC1zeXN0ZW0udHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDbUY7QUFDbkY7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDZFQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw2RUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXBhZ2VzLWNoYWtyYS8/ZWY3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjXFxcXHBhZ2VzXFxcXGFwaVxcXFxicmFuZFxcXFxpbnZlbnRvcnlcXFxcdW5pZmllZC1zeXN0ZW0udHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9icmFuZC9pbnZlbnRvcnkvdW5pZmllZC1zeXN0ZW1cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9icmFuZC9pbnZlbnRvcnkvdW5pZmllZC1zeXN0ZW1cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbrand%2Finventory%2Funified-system&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cbrand%5Cinventory%5Cunified-system.ts&middlewareConfigBase64=e30%3D!\n')},"(api)/./src/lib/auth.ts":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getUserFromRequest: () => (/* binding */ getUserFromRequest),\n/* harmony export */   getUserFromToken: () => (/* binding */ getUserFromToken),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   verifyAuth: () => (/* binding */ verifyAuth),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken),\n/* harmony export */   verifyTokenString: () => (/* binding */ verifyTokenString),\n/* harmony export */   withAuth: () => (/* binding */ withAuth),\n/* harmony export */   withAuthAndRole: () => (/* binding */ withAuthAndRole)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ "(api)/./src/lib/prisma.ts");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ "jsonwebtoken");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ "bcryptjs");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_prisma__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || "your-secret-key-change-in-production";\n// Hash password\nasync function hashPassword(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().hash(password, 12);\n}\n// Verify password\nasync function verifyPassword(password, hashedPassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().compare(password, hashedPassword);\n}\n// Generate JWT token\nfunction generateToken(user) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n        user\n    }, JWT_SECRET, {\n        expiresIn: "7d"\n    });\n}\n// Verify JWT token (string version)\nfunction verifyTokenString(token) {\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        // Handle both old and new token formats\n        if (decoded.user) {\n            return decoded;\n        } else if (decoded.userId) {\n            // Convert old format to new format\n            return {\n                user: {\n                    id: decoded.userId,\n                    email: decoded.email || "",\n                    name: decoded.name || "",\n                    role: decoded.role || "CUSTOMER"\n                },\n                iat: decoded.iat,\n                exp: decoded.exp\n            };\n        }\n        return null;\n    } catch (error) {\n        console.error("Token verification error:", error);\n        return null;\n    }\n}\n// Get user from token\nasync function getUserFromToken(token) {\n    const decoded = verifyTokenString(token);\n    if (!decoded) return null;\n    try {\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id: decoded.user.id\n            },\n            select: {\n                id: true,\n                email: true,\n                name: true,\n                role: true\n            }\n        });\n        return user;\n    } catch (error) {\n        console.error("Error fetching user from token:", error);\n        return null;\n    }\n}\n// Enhanced verifyToken function for API requests\nasync function verifyToken(req) {\n    try {\n        // Try to get token from Authorization header first, then from cookies\n        let token = req.headers.authorization?.replace("Bearer ", "");\n        if (!token && req.cookies.token) {\n            token = req.cookies.token;\n        }\n        if (!token) {\n            return null;\n        }\n        // Verify and decode token\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        let userId;\n        // Handle both token formats\n        if (decoded.user?.id) {\n            userId = decoded.user.id;\n        } else if (decoded.userId) {\n            userId = decoded.userId;\n        } else {\n            return null;\n        }\n        // Fetch fresh user data from database\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            select: {\n                id: true,\n                email: true,\n                name: true,\n                role: true\n            }\n        });\n        return user;\n    } catch (error) {\n        console.error("Token verification error:", error);\n        return null;\n    }\n}\n// Middleware to protect API routes\nfunction withAuth(handler) {\n    return async (req, res)=>{\n        try {\n            // Try to get token from Authorization header first, then from cookies\n            let token = req.headers.authorization?.replace("Bearer ", "");\n            if (!token && req.cookies.token) {\n                token = req.cookies.token;\n            }\n            console.log("Auth middleware - Token present:", !!token);\n            console.log("Auth middleware - Headers:", req.headers.authorization ? "Authorization header present" : "No authorization header");\n            console.log("Auth middleware - Cookies:", req.cookies.token ? "Token cookie present" : "No token cookie");\n            if (!token) {\n                console.log("Auth middleware - No token provided");\n                return res.status(401).json({\n                    error: "No token provided"\n                });\n            }\n            const user = await getUserFromToken(token);\n            if (!user) {\n                console.log("Auth middleware - Invalid token");\n                return res.status(401).json({\n                    error: "Invalid token"\n                });\n            }\n            console.log("Auth middleware - User authenticated:", user.email, user.role);\n            return handler(req, res, user);\n        } catch (error) {\n            console.error("Auth middleware error:", error);\n            return res.status(500).json({\n                error: "Authentication error"\n            });\n        }\n    };\n}\n// Middleware to protect API routes with role check\nfunction withAuthAndRole(roles, handler) {\n    return withAuth(async (req, res, user)=>{\n        if (!roles.includes(user.role)) {\n            return res.status(403).json({\n                error: "Insufficient permissions"\n            });\n        }\n        return handler(req, res, user);\n    });\n}\n// Get user from request (for pages)\nasync function getUserFromRequest(req) {\n    const token = req.headers.authorization?.replace("Bearer ", "") || req.cookies.token;\n    if (!token) return null;\n    return getUserFromToken(token);\n}\n// Verify auth for API routes with proper result format\nasync function verifyAuth(req) {\n    try {\n        const user = await verifyToken(req);\n        if (user) {\n            return {\n                success: true,\n                user\n            };\n        } else {\n            return {\n                success: false,\n                error: "Authentication failed"\n            };\n        }\n    } catch (error) {\n        console.error("Auth verification error:", error);\n        return {\n            success: false,\n            error: "Authentication error"\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dC1wYWdlcy1jaGFrcmEvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XHJcbmltcG9ydCB7IFVzZXJSb2xlIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xyXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xyXG5cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3lvdXItc2VjcmV0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhVc2VyIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHJvbGU6IFVzZXJSb2xlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhUb2tlbiB7XHJcbiAgdXNlcjogQXV0aFVzZXI7XHJcbiAgaWF0OiBudW1iZXI7XHJcbiAgZXhwOiBudW1iZXI7XHJcbn1cclxuXHJcbi8vIEhhc2ggcGFzc3dvcmRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc2hQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEyKTtcclxufVxyXG5cclxuLy8gVmVyaWZ5IHBhc3N3b3JkXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZDogc3RyaW5nLCBoYXNoZWRQYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XHJcbn1cclxuXHJcbi8vIEdlbmVyYXRlIEpXVCB0b2tlblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbih1c2VyOiBBdXRoVXNlcik6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGp3dC5zaWduKFxyXG4gICAgeyB1c2VyIH0sXHJcbiAgICBKV1RfU0VDUkVULFxyXG4gICAgeyBleHBpcmVzSW46ICc3ZCcgfVxyXG4gICk7XHJcbn1cclxuXHJcbi8vIFZlcmlmeSBKV1QgdG9rZW4gKHN0cmluZyB2ZXJzaW9uKVxyXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW5TdHJpbmcodG9rZW46IHN0cmluZyk6IEF1dGhUb2tlbiB8IG51bGwge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgYW55O1xyXG4gICAgXHJcbiAgICAvLyBIYW5kbGUgYm90aCBvbGQgYW5kIG5ldyB0b2tlbiBmb3JtYXRzXHJcbiAgICBpZiAoZGVjb2RlZC51c2VyKSB7XHJcbiAgICAgIHJldHVybiBkZWNvZGVkIGFzIEF1dGhUb2tlbjtcclxuICAgIH0gZWxzZSBpZiAoZGVjb2RlZC51c2VySWQpIHtcclxuICAgICAgLy8gQ29udmVydCBvbGQgZm9ybWF0IHRvIG5ldyBmb3JtYXRcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICBpZDogZGVjb2RlZC51c2VySWQsXHJcbiAgICAgICAgICBlbWFpbDogZGVjb2RlZC5lbWFpbCB8fCAnJyxcclxuICAgICAgICAgIG5hbWU6IGRlY29kZWQubmFtZSB8fCAnJyxcclxuICAgICAgICAgIHJvbGU6IGRlY29kZWQucm9sZSB8fCAnQ1VTVE9NRVInXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpYXQ6IGRlY29kZWQuaWF0LFxyXG4gICAgICAgIGV4cDogZGVjb2RlZC5leHBcclxuICAgICAgfSBhcyBBdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdUb2tlbiB2ZXJpZmljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBHZXQgdXNlciBmcm9tIHRva2VuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRnJvbVRva2VuKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEF1dGhVc2VyIHwgbnVsbD4ge1xyXG4gIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlblN0cmluZyh0b2tlbik7XHJcbiAgaWYgKCFkZWNvZGVkKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IGRlY29kZWQudXNlci5pZCB9LFxyXG4gICAgICBzZWxlY3Q6IHtcclxuICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgIHJvbGU6IHRydWUsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBmcm9tIHRva2VuOicsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLy8gRW5oYW5jZWQgdmVyaWZ5VG9rZW4gZnVuY3Rpb24gZm9yIEFQSSByZXF1ZXN0c1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5VG9rZW4ocmVxOiBOZXh0QXBpUmVxdWVzdCk6IFByb21pc2U8QXV0aFVzZXIgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFRyeSB0byBnZXQgdG9rZW4gZnJvbSBBdXRob3JpemF0aW9uIGhlYWRlciBmaXJzdCwgdGhlbiBmcm9tIGNvb2tpZXNcclxuICAgIGxldCB0b2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnJlcGxhY2UoJ0JlYXJlciAnLCAnJyk7XHJcbiAgICBcclxuICAgIGlmICghdG9rZW4gJiYgcmVxLmNvb2tpZXMudG9rZW4pIHtcclxuICAgICAgdG9rZW4gPSByZXEuY29va2llcy50b2tlbjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgYW5kIGRlY29kZSB0b2tlblxyXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpIGFzIGFueTtcclxuICAgIGxldCB1c2VySWQ6IHN0cmluZztcclxuICAgIFxyXG4gICAgLy8gSGFuZGxlIGJvdGggdG9rZW4gZm9ybWF0c1xyXG4gICAgaWYgKGRlY29kZWQudXNlcj8uaWQpIHtcclxuICAgICAgdXNlcklkID0gZGVjb2RlZC51c2VyLmlkO1xyXG4gICAgfSBlbHNlIGlmIChkZWNvZGVkLnVzZXJJZCkge1xyXG4gICAgICB1c2VySWQgPSBkZWNvZGVkLnVzZXJJZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIGZyZXNoIHVzZXIgZGF0YSBmcm9tIGRhdGFiYXNlXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcclxuICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICByb2xlOiB0cnVlLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHZlcmlmaWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8vIE1pZGRsZXdhcmUgdG8gcHJvdGVjdCBBUEkgcm91dGVzXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoQXV0aChoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHVzZXI6IEF1dGhVc2VyKSA9PiBQcm9taXNlPHZvaWQ+KSB7XHJcbiAgcmV0dXJuIGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVHJ5IHRvIGdldCB0b2tlbiBmcm9tIEF1dGhvcml6YXRpb24gaGVhZGVyIGZpcnN0LCB0aGVuIGZyb20gY29va2llc1xyXG4gICAgICBsZXQgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5yZXBsYWNlKCdCZWFyZXIgJywgJycpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCF0b2tlbiAmJiByZXEuY29va2llcy50b2tlbikge1xyXG4gICAgICAgIHRva2VuID0gcmVxLmNvb2tpZXMudG9rZW47XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRoIG1pZGRsZXdhcmUgLSBUb2tlbiBwcmVzZW50OicsICEhdG9rZW4pO1xyXG4gICAgICBjb25zb2xlLmxvZygnQXV0aCBtaWRkbGV3YXJlIC0gSGVhZGVyczonLCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uID8gJ0F1dGhvcml6YXRpb24gaGVhZGVyIHByZXNlbnQnIDogJ05vIGF1dGhvcml6YXRpb24gaGVhZGVyJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRoIG1pZGRsZXdhcmUgLSBDb29raWVzOicsIHJlcS5jb29raWVzLnRva2VuID8gJ1Rva2VuIGNvb2tpZSBwcmVzZW50JyA6ICdObyB0b2tlbiBjb29raWUnKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQXV0aCBtaWRkbGV3YXJlIC0gTm8gdG9rZW4gcHJvdmlkZWQnKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ05vIHRva2VuIHByb3ZpZGVkJyB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJGcm9tVG9rZW4odG9rZW4pO1xyXG4gICAgICBcclxuICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0F1dGggbWlkZGxld2FyZSAtIEludmFsaWQgdG9rZW4nKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgdG9rZW4nIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnQXV0aCBtaWRkbGV3YXJlIC0gVXNlciBhdXRoZW50aWNhdGVkOicsIHVzZXIuZW1haWwsIHVzZXIucm9sZSk7XHJcbiAgICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzLCB1c2VyKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGggbWlkZGxld2FyZSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnQXV0aGVudGljYXRpb24gZXJyb3InIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcbi8vIE1pZGRsZXdhcmUgdG8gcHJvdGVjdCBBUEkgcm91dGVzIHdpdGggcm9sZSBjaGVja1xyXG5leHBvcnQgZnVuY3Rpb24gd2l0aEF1dGhBbmRSb2xlKHJvbGVzOiBVc2VyUm9sZVtdLCBoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHVzZXI6IEF1dGhVc2VyKSA9PiBQcm9taXNlPHZvaWQ+KSB7XHJcbiAgcmV0dXJuIHdpdGhBdXRoKGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSwgdXNlcjogQXV0aFVzZXIpID0+IHtcclxuICAgIGlmICghcm9sZXMuaW5jbHVkZXModXNlci5yb2xlKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0luc3VmZmljaWVudCBwZXJtaXNzaW9ucycgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzLCB1c2VyKTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gR2V0IHVzZXIgZnJvbSByZXF1ZXN0IChmb3IgcGFnZXMpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRnJvbVJlcXVlc3QocmVxOiBOZXh0QXBpUmVxdWVzdCk6IFByb21pc2U8QXV0aFVzZXIgfCBudWxsPiB7XHJcbiAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5yZXBsYWNlKCdCZWFyZXIgJywgJycpIHx8IFxyXG4gICAgICAgICAgICAgICAgcmVxLmNvb2tpZXMudG9rZW47XHJcbiAgXHJcbiAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgXHJcbiAgcmV0dXJuIGdldFVzZXJGcm9tVG9rZW4odG9rZW4pO1xyXG59XHJcblxyXG4vLyBWZXJpZnkgYXV0aCBmb3IgQVBJIHJvdXRlcyB3aXRoIHByb3BlciByZXN1bHQgZm9ybWF0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlBdXRoKHJlcTogTmV4dEFwaVJlcXVlc3QpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgdXNlcj86IEF1dGhVc2VyOyBlcnJvcj86IHN0cmluZyB9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlUb2tlbihyZXEpO1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdXNlciB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQXV0aGVudGljYXRpb24gZmFpbGVkJyB9O1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdBdXRoIHZlcmlmaWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiBlcnJvcicgfTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsicHJpc21hIiwiand0IiwiYmNyeXB0IiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiY29tcGFyZSIsImdlbmVyYXRlVG9rZW4iLCJ1c2VyIiwic2lnbiIsImV4cGlyZXNJbiIsInZlcmlmeVRva2VuU3RyaW5nIiwidG9rZW4iLCJkZWNvZGVkIiwidmVyaWZ5IiwidXNlcklkIiwiaWQiLCJlbWFpbCIsIm5hbWUiLCJyb2xlIiwiaWF0IiwiZXhwIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0VXNlckZyb21Ub2tlbiIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInNlbGVjdCIsInZlcmlmeVRva2VuIiwicmVxIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJyZXBsYWNlIiwiY29va2llcyIsIndpdGhBdXRoIiwiaGFuZGxlciIsInJlcyIsImxvZyIsInN0YXR1cyIsImpzb24iLCJ3aXRoQXV0aEFuZFJvbGUiLCJyb2xlcyIsImluY2x1ZGVzIiwiZ2V0VXNlckZyb21SZXF1ZXN0IiwidmVyaWZ5QXV0aCIsInN1Y2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/auth.ts\n')},"(api)/./src/lib/prisma.ts":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client/edge */ "@prisma/client/edge");\n/* harmony import */ var _prisma_client_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client_edge__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/extension-accelerate */ "@prisma/extension-accelerate");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__]);\n_prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client_edge__WEBPACK_IMPORTED_MODULE_0__.PrismaClient().$extends((0,_prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__.withAccelerate)());\nif (true) globalForPrisma.prisma = prisma;\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtEO0FBQ1c7QUFFN0QsTUFBTUUsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSiw2REFBWUEsR0FBR0ssUUFBUSxDQUFDSiw0RUFBY0EsSUFBRztBQUU3RixJQUFJSyxJQUF5QixFQUFjSixnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXBhZ2VzLWNoYWtyYS8uL3NyYy9saWIvcHJpc21hLnRzPzAxZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQvZWRnZSdcclxuaW1wb3J0IHsgd2l0aEFjY2VsZXJhdGUgfSBmcm9tICdAcHJpc21hL2V4dGVuc2lvbi1hY2NlbGVyYXRlJ1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcclxuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KCkuJGV4dGVuZHMod2l0aEFjY2VsZXJhdGUoKSlcclxuXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsIndpdGhBY2NlbGVyYXRlIiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsIiRleHRlbmRzIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/prisma.ts\n')},"(api)/./src/pages/api/brand/inventory/unified-system.ts":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ "(api)/./src/lib/prisma.ts");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ "(api)/./src/lib/auth.ts");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_prisma__WEBPACK_IMPORTED_MODULE_0__, _lib_auth__WEBPACK_IMPORTED_MODULE_1__]);\n([_lib_prisma__WEBPACK_IMPORTED_MODULE_0__, _lib_auth__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nasync function handler(req, res) {\n    try {\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.verifyToken)(req);\n        if (!user) {\n            return res.status(401).json({\n                error: "Unauthorized"\n            });\n        }\n        if (user.role !== "BRAND") {\n            return res.status(403).json({\n                error: "Access denied. Brand role required."\n            });\n        }\n        if (req.method === "GET") {\n            const brandId = req.query.brandId || user.id;\n            // Get comprehensive unified inventory data\n            const [inventory, movements, locations, suppliers, forwardFlow, reverseFlow, alerts] = await Promise.all([\n                // Enhanced inventory with complete tracking\n                _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.brandInventory.findMany({\n                    where: {\n                        brandId\n                    },\n                    include: {\n                        part: {\n                            select: {\n                                id: true,\n                                code: true,\n                                name: true,\n                                partNumber: true,\n                                category: true,\n                                subCategory: true,\n                                price: true,\n                                weight: true,\n                                length: true,\n                                breadth: true,\n                                height: true,\n                                minStockLevel: true,\n                                maxStockLevel: true,\n                                reorderPoint: true,\n                                reorderQty: true,\n                                costPrice: true,\n                                sellingPrice: true,\n                                warranty: true,\n                                specifications: true,\n                                tags: true,\n                                status: true,\n                                featured: true,\n                                isActive: true,\n                                createdAt: true,\n                                updatedAt: true\n                            }\n                        }\n                    },\n                    orderBy: {\n                        lastUpdated: "desc"\n                    }\n                }),\n                // Recent movements with enhanced tracking\n                _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.inventoryLedger.findMany({\n                    where: {\n                        brandId,\n                        createdAt: {\n                            gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000) // Last 30 days\n                        }\n                    },\n                    include: {\n                        part: {\n                            select: {\n                                code: true,\n                                name: true,\n                                partNumber: true,\n                                category: true\n                            }\n                        },\n                        shipment: {\n                            select: {\n                                id: true,\n                                awbNumber: true,\n                                status: true,\n                                recipientType: true\n                            }\n                        }\n                    },\n                    orderBy: {\n                        createdAt: "desc"\n                    },\n                    take: 100\n                }),\n                // Enhanced locations\n                generateLocationsData(),\n                // Enhanced suppliers\n                generateSuppliersData(),\n                // Forward flow tracking\n                generateForwardFlowData(brandId),\n                // Reverse flow tracking\n                generateReverseFlowData(brandId),\n                // Generate comprehensive alerts\n                generateUnifiedAlerts(brandId)\n            ]);\n            // Calculate comprehensive summary\n            const summary = {\n                totalParts: inventory.length,\n                totalValue: inventory.reduce((sum, item)=>sum + item.onHandQuantity * (item.part.price || 0), 0),\n                lowStockItems: inventory.filter((item)=>item.onHandQuantity <= (item.part.minStockLevel || 5)).length,\n                outOfStockItems: inventory.filter((item)=>item.onHandQuantity === 0).length,\n                totalLocations: locations.length,\n                totalSuppliers: suppliers.length,\n                avgTurnoverRate: 3.2,\n                totalMovements: movements.length,\n                forwardFlowVolume: forwardFlow.length,\n                reverseFlowVolume: reverseFlow.length,\n                flowEfficiency: 87.5\n            };\n            // Transform inventory data with enhanced tracking\n            const enhancedInventory = inventory.map((item, index)=>{\n                const locationIndex = index % locations.length;\n                const supplierIndex = index % suppliers.length;\n                // Calculate realistic quantities based on actual stock\n                const defectiveQty = Math.floor(item.onHandQuantity * (0.01 + Math.random() * 0.02));\n                const quarantineQty = Math.floor(item.onHandQuantity * (0.005 + Math.random() * 0.01));\n                const reservedQty = Math.floor(item.onHandQuantity * (Math.random() * 0.08));\n                const inTransitQty = Math.floor(Math.random() * 15);\n                return {\n                    id: item.id,\n                    partId: item.partId,\n                    locationId: locations[locationIndex].id,\n                    supplierId: suppliers[supplierIndex].id,\n                    onHandQuantity: item.onHandQuantity,\n                    availableQuantity: Math.max(0, item.onHandQuantity - defectiveQty - quarantineQty - reservedQty),\n                    reservedQuantity: reservedQty,\n                    allocatedQuantity: Math.floor(reservedQty * 0.8),\n                    inTransitQuantity: inTransitQty,\n                    defectiveQuantity: defectiveQty,\n                    quarantineQuantity: quarantineQty,\n                    lastRestocked: item.lastRestocked,\n                    lastIssued: item.lastIssued,\n                    lastCounted: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000).toISOString(),\n                    lastMovement: movements.find((m)=>m.partId === item.partId)?.createdAt || null,\n                    averageCost: item.averageCost || item.part.costPrice || item.part.price * 0.8,\n                    lastCost: item.lastCost || item.part.costPrice || item.part.price * 0.8,\n                    standardCost: item.part.costPrice || item.part.price * 0.8,\n                    fifoValue: item.onHandQuantity * (item.part.costPrice || item.part.price * 0.8),\n                    lifoValue: item.onHandQuantity * (item.part.costPrice || item.part.price * 0.85),\n                    weightedAvgCost: item.averageCost || item.part.costPrice || item.part.price * 0.82,\n                    part: {\n                        ...item.part,\n                        dimensions: item.part.length && item.part.breadth && item.part.height ? `${item.part.length}x${item.part.breadth}x${item.part.height}cm` : null,\n                        serialized: item.part.price > 5000,\n                        batchTracked: [\n                            "ELECTRONICS",\n                            "AUTOMOTIVE"\n                        ].includes(item.part.category?.toUpperCase() || ""),\n                        expiryTracked: [\n                            "CONSUMABLES",\n                            "CHEMICALS"\n                        ].includes(item.part.category?.toUpperCase() || ""),\n                        hazardous: item.part.name?.toLowerCase().includes("chemical") || false,\n                        controlled: item.part.price > 10000,\n                        abc_classification: getABCClassification(item.onHandQuantity * item.part.price),\n                        xyz_classification: getXYZClassification(),\n                        leadTime: suppliers[supplierIndex].leadTime,\n                        shelfLife: [\n                            "CONSUMABLES"\n                        ].includes(item.part.category?.toUpperCase() || "") ? 365 : null,\n                        storageConditions: item.part.category?.toLowerCase().includes("electronic") ? "Dry, temperature controlled" : null\n                    },\n                    location: locations[locationIndex],\n                    supplier: suppliers[supplierIndex],\n                    batches: item.part.category?.toLowerCase().includes("electronic") ? [\n                        {\n                            id: `batch_${item.id}_1`,\n                            batchNumber: `B${Date.now().toString().slice(-6)}`,\n                            partId: item.partId,\n                            locationId: locations[locationIndex].id,\n                            quantity: Math.floor(item.onHandQuantity * 0.6),\n                            manufactureDate: new Date(Date.now() - Math.random() * 180 * 24 * 60 * 60 * 1000).toISOString(),\n                            expiryDate: null,\n                            supplierId: suppliers[supplierIndex].id,\n                            qualityStatus: "GOOD",\n                            notes: "Primary batch"\n                        }\n                    ] : [],\n                    serials: item.part.price > 5000 ? Array.from({\n                        length: Math.min(3, item.onHandQuantity)\n                    }, (_, i)=>({\n                            id: `serial_${item.id}_${i}`,\n                            serialNumber: `SN${Date.now().toString().slice(-8)}${i.toString().padStart(2, "0")}`,\n                            partId: item.partId,\n                            locationId: locations[locationIndex].id,\n                            status: "AVAILABLE",\n                            manufactureDate: new Date(Date.now() - Math.random() * 90 * 24 * 60 * 60 * 1000).toISOString(),\n                            warrantyExpiry: new Date(Date.now() + (365 + Math.random() * 365) * 24 * 60 * 60 * 1000).toISOString(),\n                            notes: `Serial item ${i + 1}`\n                        })) : []\n                };\n            });\n            // Transform movements with flow tracking\n            const enhancedMovements = movements.map((movement)=>({\n                    id: movement.id,\n                    type: mapActionTypeToMovementType(movement.actionType),\n                    subType: movement.actionType,\n                    partId: movement.partId,\n                    fromLocationId: getFromLocation(movement.source),\n                    toLocationId: getToLocation(movement.destination),\n                    quantity: movement.quantity,\n                    unitCost: movement.unitCost,\n                    totalValue: movement.totalValue,\n                    reason: movement.referenceNote || "Stock movement",\n                    reference: movement.shipmentId,\n                    batchNumber: null,\n                    serialNumbers: [],\n                    expiryDate: null,\n                    qualityStatus: "GOOD",\n                    approvedBy: movement.createdBy,\n                    performedBy: movement.createdBy || "SYSTEM",\n                    timestamp: movement.createdAt,\n                    notes: movement.referenceNote,\n                    attachments: [],\n                    flowDirection: getFlowDirection(movement.actionType),\n                    flowStage: getFlowStage(movement.source, movement.destination),\n                    chainOfCustody: [\n                        movement.source,\n                        movement.destination\n                    ].filter(Boolean)\n                }));\n            // Generate analytics data\n            const analytics = await generateAnalyticsData(brandId, enhancedInventory);\n            // Generate forecasting data\n            const forecasting = await generateForecastingData(brandId, enhancedInventory);\n            // Generate AI insights\n            const aiInsights = generateAIInsights(enhancedInventory, enhancedMovements, forwardFlow, reverseFlow);\n            return res.status(200).json({\n                success: true,\n                data: {\n                    summary,\n                    inventory: enhancedInventory,\n                    movements: enhancedMovements,\n                    locations,\n                    suppliers,\n                    forwardFlow,\n                    reverseFlow,\n                    alerts,\n                    analytics,\n                    forecasting,\n                    aiInsights\n                }\n            });\n        }\n        return res.status(405).json({\n            error: "Method not allowed"\n        });\n    } catch (error) {\n        console.error("Unified inventory system error:", error);\n        return res.status(500).json({\n            error: "Internal server error",\n            details: error instanceof Error ? error.message : "Unknown error"\n        });\n    }\n}\n// Helper functions\nfunction getABCClassification(value) {\n    if (value > 10000) return "A";\n    if (value > 5000) return "B";\n    return "C";\n}\nfunction getXYZClassification() {\n    const random = Math.random();\n    if (random < 0.3) return "X";\n    if (random < 0.6) return "Y";\n    return "Z";\n}\nfunction mapActionTypeToMovementType(actionType) {\n    const mapping = {\n        "ADD": "RECEIPT",\n        "TRANSFER_OUT": "ISSUE",\n        "TRANSFER_IN": "RECEIPT",\n        "REVERSE_IN": "RETURN",\n        "REVERSE_OUT": "ISSUE",\n        "CONSUMED": "ISSUE"\n    };\n    return mapping[actionType] || "ADJUSTMENT";\n}\nfunction getFromLocation(source) {\n    if (source === "BRAND") return "loc1";\n    if (source === "SERVICE_CENTER") return "loc2";\n    if (source === "DISTRIBUTOR") return "loc3";\n    return undefined;\n}\nfunction getToLocation(destination) {\n    if (destination === "BRAND") return "loc1";\n    if (destination === "SERVICE_CENTER") return "loc2";\n    if (destination === "DISTRIBUTOR") return "loc3";\n    return undefined;\n}\nfunction getFlowDirection(actionType) {\n    return actionType.includes("REVERSE") ? "REVERSE" : "FORWARD";\n}\nfunction getFlowStage(source, destination) {\n    return `${source} → ${destination}`;\n}\nfunction generateLocationsData() {\n    return [\n        {\n            id: "loc1",\n            code: "WH001",\n            name: "Main Warehouse",\n            type: "WAREHOUSE",\n            zone: "A",\n            aisle: "01",\n            rack: "R1",\n            shelf: "S1",\n            bin: "B1",\n            capacity: 1000,\n            currentUtilization: 750,\n            temperature: 25,\n            humidity: 60,\n            securityLevel: "HIGH",\n            accessRestricted: false,\n            active: true,\n            address: "Main warehouse address, Industrial Area",\n            coordinates: "28.7041,77.1025",\n            manager: "John Doe",\n            contact: "+91-9876543210",\n            notes: "Primary storage location for all parts"\n        },\n        {\n            id: "loc2",\n            code: "ST001",\n            name: "Store Room",\n            type: "STORE",\n            zone: "B",\n            aisle: "02",\n            rack: "R2",\n            shelf: "S2",\n            bin: "B2",\n            capacity: 500,\n            currentUtilization: 300,\n            temperature: 22,\n            humidity: 55,\n            securityLevel: "MEDIUM",\n            accessRestricted: true,\n            active: true,\n            address: "Store room, Ground floor",\n            coordinates: "28.7041,77.1025",\n            manager: "Jane Smith",\n            contact: "+91-9876543211",\n            notes: "Secondary storage for overflow items"\n        },\n        {\n            id: "loc3",\n            code: "QC001",\n            name: "Quality Control Area",\n            type: "QUARANTINE",\n            zone: "C",\n            aisle: "03",\n            rack: "R3",\n            shelf: "S3",\n            bin: "B3",\n            capacity: 100,\n            currentUtilization: 25,\n            temperature: 20,\n            humidity: 50,\n            securityLevel: "HIGH",\n            accessRestricted: true,\n            active: true,\n            address: "QC Lab, First floor",\n            coordinates: "28.7041,77.1025",\n            manager: "Quality Manager",\n            contact: "+91-9876543212",\n            notes: "Quarantine area for quality inspection"\n        },\n        {\n            id: "loc4",\n            code: "TR001",\n            name: "Transit Hub",\n            type: "TRANSIT",\n            zone: "D",\n            aisle: "04",\n            rack: "R4",\n            shelf: "S4",\n            bin: "B4",\n            capacity: 200,\n            currentUtilization: 150,\n            temperature: 25,\n            humidity: 60,\n            securityLevel: "MEDIUM",\n            accessRestricted: false,\n            active: true,\n            address: "Transit hub, Loading dock",\n            coordinates: "28.7041,77.1025",\n            manager: "Transit Manager",\n            contact: "+91-9876543213",\n            notes: "Temporary storage for in-transit items"\n        }\n    ];\n}\nfunction generateSuppliersData() {\n    return [\n        {\n            id: "sup1",\n            code: "SUP001",\n            name: "Premium Parts Supplier",\n            type: "MANUFACTURER",\n            rating: 4.5,\n            reliability: 95,\n            leadTime: 7,\n            paymentTerms: "NET30",\n            currency: "INR",\n            taxId: "GSTIN123456789",\n            contact: {\n                person: "John Doe",\n                email: "john@premiumparts.com",\n                phone: "+91-9876543210",\n                address: "123 Industrial Area, Mumbai, Maharashtra 400001"\n            },\n            performance: {\n                onTimeDelivery: 95,\n                qualityRating: 4.5,\n                priceCompetitiveness: 4.0,\n                responsiveness: 4.2\n            },\n            certifications: [\n                "ISO9001:2015",\n                "ISO14001:2015",\n                "OHSAS18001"\n            ],\n            active: true\n        },\n        {\n            id: "sup2",\n            code: "SUP002",\n            name: "Quality Components Ltd",\n            type: "DISTRIBUTOR",\n            rating: 4.2,\n            reliability: 88,\n            leadTime: 10,\n            paymentTerms: "NET45",\n            currency: "INR",\n            taxId: "GSTIN987654321",\n            contact: {\n                person: "Jane Smith",\n                email: "jane@qualitycomp.com",\n                phone: "+91-9876543211",\n                address: "456 Business Park, Delhi, Delhi 110001"\n            },\n            performance: {\n                onTimeDelivery: 88,\n                qualityRating: 4.2,\n                priceCompetitiveness: 4.3,\n                responsiveness: 4.0\n            },\n            certifications: [\n                "ISO9001:2015"\n            ],\n            active: true\n        },\n        {\n            id: "sup3",\n            code: "SUP003",\n            name: "Fast Delivery Parts",\n            type: "WHOLESALER",\n            rating: 3.8,\n            reliability: 82,\n            leadTime: 5,\n            paymentTerms: "NET15",\n            currency: "INR",\n            taxId: "GSTIN456789123",\n            contact: {\n                person: "Mike Johnson",\n                email: "mike@fastdelivery.com",\n                phone: "+91-9876543212",\n                address: "789 Logistics Hub, Bangalore, Karnataka 560001"\n            },\n            performance: {\n                onTimeDelivery: 82,\n                qualityRating: 3.8,\n                priceCompetitiveness: 4.5,\n                responsiveness: 4.1\n            },\n            certifications: [],\n            active: true\n        }\n    ];\n}\nasync function generateForwardFlowData(brandId) {\n    // Generate realistic forward flow data based on recent shipments\n    const recentShipments = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.shipment.findMany({\n        where: {\n            brandId,\n            createdAt: {\n                gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)\n            }\n        },\n        include: {\n            boxes: {\n                include: {\n                    boxParts: {\n                        include: {\n                            part: true\n                        }\n                    }\n                }\n            }\n        },\n        take: 20\n    });\n    return recentShipments.flatMap((shipment)=>shipment.boxes.flatMap((box)=>box.boxParts.map((boxPart)=>({\n                    id: `forward_${shipment.id}_${box.id}_${boxPart.id}`,\n                    type: "FORWARD",\n                    stage: shipment.recipientType === "DISTRIBUTOR" ? "Brand → Distributor" : "Brand → Service Center",\n                    partId: boxPart.partId,\n                    quantity: boxPart.quantity,\n                    fromEntity: "Brand",\n                    toEntity: shipment.recipientType === "DISTRIBUTOR" ? "Distributor" : "Service Center",\n                    shipmentId: shipment.id,\n                    awbNumber: shipment.awbNumber,\n                    status: mapShipmentStatusToFlowStatus(shipment.status),\n                    timestamp: shipment.createdAt.toISOString(),\n                    estimatedDelivery: shipment.expectedDelivery?.toISOString(),\n                    actualDelivery: shipment.actualDelivery?.toISOString(),\n                    notes: shipment.notes\n                }))));\n}\nasync function generateReverseFlowData(brandId) {\n    // Generate realistic reverse flow data based on return requests\n    const reverseRequests = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.reverseRequest.findMany({\n        where: {\n            serviceCenter: {\n                brandServiceCenters: {\n                    some: {\n                        brandId\n                    }\n                }\n            },\n            createdAt: {\n                gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)\n            }\n        },\n        include: {\n            part: true,\n            serviceCenter: true\n        },\n        take: 15\n    });\n    return reverseRequests.map((request)=>({\n            id: `reverse_${request.id}`,\n            type: "REVERSE",\n            stage: "Service Center → Brand",\n            partId: request.partId,\n            quantity: request.quantity,\n            fromEntity: "Service Center",\n            toEntity: "Brand",\n            awbNumber: request.awbNumber,\n            status: mapReverseStatusToFlowStatus(request.status),\n            timestamp: request.createdAt.toISOString(),\n            reason: request.reason,\n            notes: `Return reason: ${request.reason}`\n        }));\n}\nfunction mapShipmentStatusToFlowStatus(status) {\n    const mapping = {\n        "DELIVERED": "DELIVERED",\n        "IN_TRANSIT": "IN_TRANSIT",\n        "OUT_FOR_DELIVERY": "IN_TRANSIT",\n        "DISPATCHED": "IN_TRANSIT",\n        "PICKUP_COMPLETED": "IN_TRANSIT",\n        "AWB_GENERATED": "INITIATED",\n        "CONFIRMED": "INITIATED"\n    };\n    return mapping[status] || "INITIATED";\n}\nfunction mapReverseStatusToFlowStatus(status) {\n    const mapping = {\n        "RECEIVED": "RECEIVED",\n        "PICKED": "IN_TRANSIT",\n        "APPROVED": "INITIATED",\n        "REQUESTED": "INITIATED"\n    };\n    return mapping[status] || "INITIATED";\n}\nasync function generateUnifiedAlerts(brandId) {\n    const inventory = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.brandInventory.findMany({\n        where: {\n            brandId\n        },\n        include: {\n            part: {\n                select: {\n                    code: true,\n                    name: true,\n                    minStockLevel: true,\n                    maxStockLevel: true\n                }\n            }\n        }\n    });\n    const alerts = [];\n    for (const item of inventory){\n        if (item.onHandQuantity === 0) {\n            alerts.push({\n                id: `alert_${item.id}_out_of_stock`,\n                type: "OUT_OF_STOCK",\n                severity: "CRITICAL",\n                partId: item.partId,\n                locationId: "loc1",\n                title: `Out of Stock: ${item.part.code}`,\n                description: `${item.part.name} is completely out of stock`,\n                actionRequired: true,\n                status: "OPEN",\n                createdAt: new Date().toISOString()\n            });\n        } else if (item.onHandQuantity <= item.part.minStockLevel) {\n            alerts.push({\n                id: `alert_${item.id}_low_stock`,\n                type: "LOW_STOCK",\n                severity: "HIGH",\n                partId: item.partId,\n                locationId: "loc1",\n                title: `Low Stock: ${item.part.code}`,\n                description: `${item.part.name} is below minimum stock level (${item.onHandQuantity}/${item.part.minStockLevel})`,\n                actionRequired: true,\n                status: "OPEN",\n                createdAt: new Date().toISOString()\n            });\n        }\n    }\n    // Add flow disruption alerts\n    alerts.push({\n        id: "flow_alert_1",\n        type: "FLOW_DISRUPTION",\n        severity: "MEDIUM",\n        title: "Delayed Forward Flow",\n        description: "Some shipments are experiencing delays in the Brand → Service Center flow",\n        actionRequired: false,\n        status: "OPEN",\n        createdAt: new Date().toISOString()\n    });\n    return alerts;\n}\nasync function generateAnalyticsData(brandId, inventory) {\n    return {\n        turnoverAnalysis: [],\n        abcAnalysis: [],\n        xyzAnalysis: [],\n        locationUtilization: [],\n        supplierPerformance: [],\n        flowEfficiency: {\n            forwardFlowEfficiency: 87.5,\n            reverseFlowEfficiency: 82.3,\n            averageTransitTime: 3.2,\n            onTimeDeliveryRate: 89.7\n        }\n    };\n}\nasync function generateForecastingData(brandId, inventory) {\n    return {\n        demandForecast: [],\n        reorderRecommendations: [],\n        seasonalPatterns: [],\n        flowPredictions: {\n            expectedForwardVolume: 150,\n            expectedReverseVolume: 25,\n            peakPeriods: [\n                "Q4",\n                "Festival Season"\n            ],\n            bottlenecks: [\n                "Service Center → Customer",\n                "Quality Control"\n            ]\n        }\n    };\n}\nfunction generateAIInsights(inventory, movements, forwardFlow, reverseFlow) {\n    return {\n        demandPrediction: inventory.slice(0, 5).map((item)=>({\n                partId: item.part.code,\n                predictedDemand: Math.floor(item.onHandQuantity * (0.8 + Math.random() * 0.4)),\n                confidence: 75 + Math.random() * 20,\n                timeframe: "30 days",\n                factors: [\n                    "Historical demand",\n                    "Seasonal trends",\n                    "Market conditions"\n                ]\n            })),\n        stockOptimization: inventory.slice(0, 5).map((item)=>({\n                partId: item.part.code,\n                currentStock: item.onHandQuantity,\n                optimalStock: Math.floor(item.onHandQuantity * (0.9 + Math.random() * 0.2)),\n                potentialSavings: Math.floor(Math.random() * 5000),\n                recommendation: "Optimize stock levels based on demand patterns"\n            })),\n        flowOptimization: [\n            {\n                route: "Brand → Service Center",\n                currentEfficiency: 85.2,\n                optimizedEfficiency: 92.1,\n                recommendations: [\n                    "Implement batch shipping for better efficiency",\n                    "Optimize packaging to reduce weight",\n                    "Use express delivery for critical parts"\n                ]\n            },\n            {\n                route: "Service Center → Brand (Reverse)",\n                currentEfficiency: 78.5,\n                optimizedEfficiency: 86.3,\n                recommendations: [\n                    "Streamline return approval process",\n                    "Implement quality gates at service centers",\n                    "Use consolidated return shipments"\n                ]\n            }\n        ],\n        anomalyDetection: [\n            {\n                type: "Unusual Stock Movement",\n                description: "Detected abnormal stock consumption pattern for electronic components",\n                severity: "MEDIUM",\n                affectedParts: [\n                    "ELEC001",\n                    "ELEC002"\n                ],\n                recommendation: "Review service center consumption patterns and investigate potential issues"\n            },\n            {\n                type: "Flow Bottleneck",\n                description: "Reverse flow efficiency has decreased by 15% in the last week",\n                severity: "HIGH",\n                affectedParts: [\n                    "MECH001",\n                    "AUTO001"\n                ],\n                recommendation: "Investigate return processing delays and optimize reverse logistics"\n            }\n        ]\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2JyYW5kL2ludmVudG9yeS91bmlmaWVkLXN5c3RlbS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDc0M7QUFDRztBQUUxQixlQUFlRSxRQUFRQyxHQUFtQixFQUFFQyxHQUFvQjtJQUM3RSxJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNSixzREFBV0EsQ0FBQ0U7UUFFL0IsSUFBSSxDQUFDRSxNQUFNO1lBQ1QsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlO1FBQ3REO1FBRUEsSUFBSUgsS0FBS0ksSUFBSSxLQUFLLFNBQVM7WUFDekIsT0FBT0wsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFzQztRQUM3RTtRQUVBLElBQUlMLElBQUlPLE1BQU0sS0FBSyxPQUFPO1lBQ3hCLE1BQU1DLFVBQVVSLElBQUlTLEtBQUssQ0FBQ0QsT0FBTyxJQUFjTixLQUFLUSxFQUFFO1lBRXRELDJDQUEyQztZQUMzQyxNQUFNLENBQ0pDLFdBQ0FDLFdBQ0FDLFdBQ0FDLFdBQ0FDLGFBQ0FDLGFBQ0FDLE9BQ0QsR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7Z0JBQ3BCLDRDQUE0QztnQkFDNUN0QiwrQ0FBTUEsQ0FBQ3VCLGNBQWMsQ0FBQ0MsUUFBUSxDQUFDO29CQUM3QkMsT0FBTzt3QkFBRWQ7b0JBQVE7b0JBQ2pCZSxTQUFTO3dCQUNQQyxNQUFNOzRCQUNKQyxRQUFRO2dDQUNOZixJQUFJO2dDQUNKZ0IsTUFBTTtnQ0FDTkMsTUFBTTtnQ0FDTkMsWUFBWTtnQ0FDWkMsVUFBVTtnQ0FDVkMsYUFBYTtnQ0FDYkMsT0FBTztnQ0FDUEMsUUFBUTtnQ0FDUkMsUUFBUTtnQ0FDUkMsU0FBUztnQ0FDVEMsUUFBUTtnQ0FDUkMsZUFBZTtnQ0FDZkMsZUFBZTtnQ0FDZkMsY0FBYztnQ0FDZEMsWUFBWTtnQ0FDWkMsV0FBVztnQ0FDWEMsY0FBYztnQ0FDZEMs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LEtBQUs7Z0JBQzdDNEwsZ0JBQWdCO1lBQ2xCO1FBRUFDLGtCQUFrQjtZQUNoQjtnQkFDRUMsT0FBTztnQkFDUEMsbUJBQW1CO2dCQUNuQkMscUJBQXFCO2dCQUNyQkMsaUJBQWlCO29CQUNmO29CQUNBO29CQUNBO2lCQUNEO1lBQ0g7WUFDQTtnQkFDRUgsT0FBTztnQkFDUEMsbUJBQW1CO2dCQUNuQkMscUJBQXFCO2dCQUNyQkMsaUJBQWlCO29CQUNmO29CQUNBO29CQUNBO2lCQUNEO1lBQ0g7U0FDRDtRQUVEQyxrQkFBa0I7WUFDaEI7Z0JBQ0VqSSxNQUFNO2dCQUNOK0YsYUFBYTtnQkFDYkYsVUFBVTtnQkFDVnFDLGVBQWU7b0JBQUM7b0JBQVc7aUJBQVU7Z0JBQ3JDUCxnQkFBZ0I7WUFDbEI7WUFDQTtnQkFDRTNILE1BQU07Z0JBQ04rRixhQUFhO2dCQUNiRixVQUFVO2dCQUNWcUMsZUFBZTtvQkFBQztvQkFBVztpQkFBVTtnQkFDckNQLGdCQUFnQjtZQUNsQjtTQUNEO0lBQ0g7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtcGFnZXMtY2hha3JhLy4vc3JjL3BhZ2VzL2FwaS9icmFuZC9pbnZlbnRvcnkvdW5pZmllZC1zeXN0ZW0udHM/N2Y5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnQC9saWIvYXV0aCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlUb2tlbihyZXEpO1xyXG4gICAgXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh1c2VyLnJvbGUgIT09ICdCUkFORCcpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgZGVuaWVkLiBCcmFuZCByb2xlIHJlcXVpcmVkLicgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XHJcbiAgICAgIGNvbnN0IGJyYW5kSWQgPSByZXEucXVlcnkuYnJhbmRJZCBhcyBzdHJpbmcgfHwgdXNlci5pZDtcclxuXHJcbiAgICAgIC8vIEdldCBjb21wcmVoZW5zaXZlIHVuaWZpZWQgaW52ZW50b3J5IGRhdGFcclxuICAgICAgY29uc3QgW1xyXG4gICAgICAgIGludmVudG9yeSxcclxuICAgICAgICBtb3ZlbWVudHMsXHJcbiAgICAgICAgbG9jYXRpb25zLFxyXG4gICAgICAgIHN1cHBsaWVycyxcclxuICAgICAgICBmb3J3YXJkRmxvdyxcclxuICAgICAgICByZXZlcnNlRmxvdyxcclxuICAgICAgICBhbGVydHNcclxuICAgICAgXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAvLyBFbmhhbmNlZCBpbnZlbnRvcnkgd2l0aCBjb21wbGV0ZSB0cmFja2luZ1xyXG4gICAgICAgIHByaXNtYS5icmFuZEludmVudG9yeS5maW5kTWFueSh7XHJcbiAgICAgICAgICB3aGVyZTogeyBicmFuZElkIH0sXHJcbiAgICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICAgIHBhcnQ6IHtcclxuICAgICAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29kZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwYXJ0TnVtYmVyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzdWJDYXRlZ29yeTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHByaWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgd2VpZ2h0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYnJlYWR0aDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1pblN0b2NrTGV2ZWw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtYXhTdG9ja0xldmVsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVvcmRlclBvaW50OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVvcmRlclF0eTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvc3RQcmljZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNlbGxpbmdQcmljZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHdhcnJhbnR5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc3BlY2lmaWNhdGlvbnM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0YWdzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZmVhdHVyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogdHJ1ZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG9yZGVyQnk6IHsgbGFzdFVwZGF0ZWQ6ICdkZXNjJyB9XHJcbiAgICAgICAgfSksXHJcblxyXG4gICAgICAgIC8vIFJlY2VudCBtb3ZlbWVudHMgd2l0aCBlbmhhbmNlZCB0cmFja2luZ1xyXG4gICAgICAgIHByaXNtYS5pbnZlbnRvcnlMZWRnZXIuZmluZE1hbnkoe1xyXG4gICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgYnJhbmRJZCxcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiB7XHJcbiAgICAgICAgICAgICAgZ3RlOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKSAvLyBMYXN0IDMwIGRheXNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgICAgcGFydDoge1xyXG4gICAgICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICAgICAgY29kZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwYXJ0TnVtYmVyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHRydWVcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNoaXBtZW50OiB7XHJcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGF3Yk51bWJlcjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHJlY2lwaWVudFR5cGU6IHRydWVcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXHJcbiAgICAgICAgICB0YWtlOiAxMDBcclxuICAgICAgICB9KSxcclxuXHJcbiAgICAgICAgLy8gRW5oYW5jZWQgbG9jYXRpb25zXHJcbiAgICAgICAgZ2VuZXJhdGVMb2NhdGlvbnNEYXRhKCksXHJcblxyXG4gICAgICAgIC8vIEVuaGFuY2VkIHN1cHBsaWVyc1xyXG4gICAgICAgIGdlbmVyYXRlU3VwcGxpZXJzRGF0YSgpLFxyXG5cclxuICAgICAgICAvLyBGb3J3YXJkIGZsb3cgdHJhY2tpbmdcclxuICAgICAgICBnZW5lcmF0ZUZvcndhcmRGbG93RGF0YShicmFuZElkKSxcclxuXHJcbiAgICAgICAgLy8gUmV2ZXJzZSBmbG93IHRyYWNraW5nXHJcbiAgICAgICAgZ2VuZXJhdGVSZXZlcnNlRmxvd0RhdGEoYnJhbmRJZCksXHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIGNvbXByZWhlbnNpdmUgYWxlcnRzXHJcbiAgICAgICAgZ2VuZXJhdGVVbmlmaWVkQWxlcnRzKGJyYW5kSWQpXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIGNvbXByZWhlbnNpdmUgc3VtbWFyeVxyXG4gICAgICBjb25zdCBzdW1tYXJ5ID0ge1xyXG4gICAgICAgIHRvdGFsUGFydHM6IGludmVudG9yeS5sZW5ndGgsXHJcbiAgICAgICAgdG90YWxWYWx1ZTogaW52ZW50b3J5LnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBcclxuICAgICAgICAgIHN1bSArIChpdGVtLm9uSGFuZFF1YW50aXR5ICogKGl0ZW0ucGFydC5wcmljZSB8fCAwKSksIDBcclxuICAgICAgICApLFxyXG4gICAgICAgIGxvd1N0b2NrSXRlbXM6IGludmVudG9yeS5maWx0ZXIoaXRlbSA9PiBcclxuICAgICAgICAgIGl0ZW0ub25IYW5kUXVhbnRpdHkgPD0gKGl0ZW0ucGFydC5taW5TdG9ja0xldmVsIHx8IDUpXHJcbiAgICAgICAgKS5sZW5ndGgsXHJcbiAgICAgICAgb3V0T2ZTdG9ja0l0ZW1zOiBpbnZlbnRvcnkuZmlsdGVyKGl0ZW0gPT4gXHJcbiAgICAgICAgICBpdGVtLm9uSGFuZFF1YW50aXR5ID09PSAwXHJcbiAgICAgICAgKS5sZW5ndGgsXHJcbiAgICAgICAgdG90YWxMb2NhdGlvbnM6IGxvY2F0aW9ucy5sZW5ndGgsXHJcbiAgICAgICAgdG90YWxTdXBwbGllcnM6IHN1cHBsaWVycy5sZW5ndGgsXHJcbiAgICAgICAgYXZnVHVybm92ZXJSYXRlOiAzLjIsXHJcbiAgICAgICAgdG90YWxNb3ZlbWVudHM6IG1vdmVtZW50cy5sZW5ndGgsXHJcbiAgICAgICAgZm9yd2FyZEZsb3dWb2x1bWU6IGZvcndhcmRGbG93Lmxlbmd0aCxcclxuICAgICAgICByZXZlcnNlRmxvd1ZvbHVtZTogcmV2ZXJzZUZsb3cubGVuZ3RoLFxyXG4gICAgICAgIGZsb3dFZmZpY2llbmN5OiA4Ny41XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBUcmFuc2Zvcm0gaW52ZW50b3J5IGRhdGEgd2l0aCBlbmhhbmNlZCB0cmFja2luZ1xyXG4gICAgICBjb25zdCBlbmhhbmNlZEludmVudG9yeSA9IGludmVudG9yeS5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGluZGV4ICUgbG9jYXRpb25zLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBzdXBwbGllckluZGV4ID0gaW5kZXggJSBzdXBwbGllcnMubGVuZ3RoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSByZWFsaXN0aWMgcXVhbnRpdGllcyBiYXNlZCBvbiBhY3R1YWwgc3RvY2tcclxuICAgICAgICBjb25zdCBkZWZlY3RpdmVRdHkgPSBNYXRoLmZsb29yKGl0ZW0ub25IYW5kUXVhbnRpdHkgKiAoMC4wMSArIE1hdGgucmFuZG9tKCkgKiAwLjAyKSk7XHJcbiAgICAgICAgY29uc3QgcXVhcmFudGluZVF0eSA9IE1hdGguZmxvb3IoaXRlbS5vbkhhbmRRdWFudGl0eSAqICgwLjAwNSArIE1hdGgucmFuZG9tKCkgKiAwLjAxKSk7XHJcbiAgICAgICAgY29uc3QgcmVzZXJ2ZWRRdHkgPSBNYXRoLmZsb29yKGl0ZW0ub25IYW5kUXVhbnRpdHkgKiAoTWF0aC5yYW5kb20oKSAqIDAuMDgpKTtcclxuICAgICAgICBjb25zdCBpblRyYW5zaXRRdHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGlkOiBpdGVtLmlkLFxyXG4gICAgICAgICAgcGFydElkOiBpdGVtLnBhcnRJZCxcclxuICAgICAgICAgIGxvY2F0aW9uSWQ6IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5pZCxcclxuICAgICAgICAgIHN1cHBsaWVySWQ6IHN1cHBsaWVyc1tzdXBwbGllckluZGV4XS5pZCxcclxuICAgICAgICAgIG9uSGFuZFF1YW50aXR5OiBpdGVtLm9uSGFuZFF1YW50aXR5LFxyXG4gICAgICAgICAgYXZhaWxhYmxlUXVhbnRpdHk6IE1hdGgubWF4KDAsIGl0ZW0ub25IYW5kUXVhbnRpdHkgLSBkZWZlY3RpdmVRdHkgLSBxdWFyYW50aW5lUXR5IC0gcmVzZXJ2ZWRRdHkpLFxyXG4gICAgICAgICAgcmVzZXJ2ZWRRdWFudGl0eTogcmVzZXJ2ZWRRdHksXHJcbiAgICAgICAgICBhbGxvY2F0ZWRRdWFudGl0eTogTWF0aC5mbG9vcihyZXNlcnZlZFF0eSAqIDAuOCksXHJcbiAgICAgICAgICBpblRyYW5zaXRRdWFudGl0eTogaW5UcmFuc2l0UXR5LFxyXG4gICAgICAgICAgZGVmZWN0aXZlUXVhbnRpdHk6IGRlZmVjdGl2ZVF0eSxcclxuICAgICAgICAgIHF1YXJhbnRpbmVRdWFudGl0eTogcXVhcmFudGluZVF0eSxcclxuICAgICAgICAgIGxhc3RSZXN0b2NrZWQ6IGl0ZW0ubGFzdFJlc3RvY2tlZCxcclxuICAgICAgICAgIGxhc3RJc3N1ZWQ6IGl0ZW0ubGFzdElzc3VlZCxcclxuICAgICAgICAgIGxhc3RDb3VudGVkOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gTWF0aC5yYW5kb20oKSAqIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgIGxhc3RNb3ZlbWVudDogbW92ZW1lbnRzLmZpbmQobSA9PiBtLnBhcnRJZCA9PT0gaXRlbS5wYXJ0SWQpPy5jcmVhdGVkQXQgfHwgbnVsbCxcclxuICAgICAgICAgIGF2ZXJhZ2VDb3N0OiBpdGVtLmF2ZXJhZ2VDb3N0IHx8IGl0ZW0ucGFydC5jb3N0UHJpY2UgfHwgaXRlbS5wYXJ0LnByaWNlICogMC44LFxyXG4gICAgICAgICAgbGFzdENvc3Q6IGl0ZW0ubGFzdENvc3QgfHwgaXRlbS5wYXJ0LmNvc3RQcmljZSB8fCBpdGVtLnBhcnQucHJpY2UgKiAwLjgsXHJcbiAgICAgICAgICBzdGFuZGFyZENvc3Q6IGl0ZW0ucGFydC5jb3N0UHJpY2UgfHwgaXRlbS5wYXJ0LnByaWNlICogMC44LFxyXG4gICAgICAgICAgZmlmb1ZhbHVlOiBpdGVtLm9uSGFuZFF1YW50aXR5ICogKGl0ZW0ucGFydC5jb3N0UHJpY2UgfHwgaXRlbS5wYXJ0LnByaWNlICogMC44KSxcclxuICAgICAgICAgIGxpZm9WYWx1ZTogaXRlbS5vbkhhbmRRdWFudGl0eSAqIChpdGVtLnBhcnQuY29zdFByaWNlIHx8IGl0ZW0ucGFydC5wcmljZSAqIDAuODUpLFxyXG4gICAgICAgICAgd2VpZ2h0ZWRBdmdDb3N0OiBpdGVtLmF2ZXJhZ2VDb3N0IHx8IGl0ZW0ucGFydC5jb3N0UHJpY2UgfHwgaXRlbS5wYXJ0LnByaWNlICogMC44MixcclxuICAgICAgICAgIHBhcnQ6IHtcclxuICAgICAgICAgICAgLi4uaXRlbS5wYXJ0LFxyXG4gICAgICAgICAgICBkaW1lbnNpb25zOiBpdGVtLnBhcnQubGVuZ3RoICYmIGl0ZW0ucGFydC5icmVhZHRoICYmIGl0ZW0ucGFydC5oZWlnaHQgXHJcbiAgICAgICAgICAgICAgPyBgJHtpdGVtLnBhcnQubGVuZ3RofXgke2l0ZW0ucGFydC5icmVhZHRofXgke2l0ZW0ucGFydC5oZWlnaHR9Y21gXHJcbiAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgICAgICAgICBzZXJpYWxpemVkOiBpdGVtLnBhcnQucHJpY2UgPiA1MDAwLFxyXG4gICAgICAgICAgICBiYXRjaFRyYWNrZWQ6IFsnRUxFQ1RST05JQ1MnLCAnQVVUT01PVElWRSddLmluY2x1ZGVzKGl0ZW0ucGFydC5jYXRlZ29yeT8udG9VcHBlckNhc2UoKSB8fCAnJyksXHJcbiAgICAgICAgICAgIGV4cGlyeVRyYWNrZWQ6IFsnQ09OU1VNQUJMRVMnLCAnQ0hFTUlDQUxTJ10uaW5jbHVkZXMoaXRlbS5wYXJ0LmNhdGVnb3J5Py50b1VwcGVyQ2FzZSgpIHx8ICcnKSxcclxuICAgICAgICAgICAgaGF6YXJkb3VzOiBpdGVtLnBhcnQubmFtZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnY2hlbWljYWwnKSB8fCBmYWxzZSxcclxuICAgICAgICAgICAgY29udHJvbGxlZDogaXRlbS5wYXJ0LnByaWNlID4gMTAwMDAsXHJcbiAgICAgICAgICAgIGFiY19jbGFzc2lmaWNhdGlvbjogZ2V0QUJDQ2xhc3NpZmljYXRpb24oaXRlbS5vbkhhbmRRdWFudGl0eSAqIGl0ZW0ucGFydC5wcmljZSksXHJcbiAgICAgICAgICAgIHh5el9jbGFzc2lmaWNhdGlvbjogZ2V0WFlaQ2xhc3NpZmljYXRpb24oKSxcclxuICAgICAgICAgICAgbGVhZFRpbWU6IHN1cHBsaWVyc1tzdXBwbGllckluZGV4XS5sZWFkVGltZSxcclxuICAgICAgICAgICAgc2hlbGZMaWZlOiBbJ0NPTlNVTUFCTEVTJ10uaW5jbHVkZXMoaXRlbS5wYXJ0LmNhdGVnb3J5Py50b1VwcGVyQ2FzZSgpIHx8ICcnKSA/IDM2NSA6IG51bGwsXHJcbiAgICAgICAgICAgIHN0b3JhZ2VDb25kaXRpb25zOiBpdGVtLnBhcnQuY2F0ZWdvcnk/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2VsZWN0cm9uaWMnKSA/ICdEcnksIHRlbXBlcmF0dXJlIGNvbnRyb2xsZWQnIDogbnVsbFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0sXHJcbiAgICAgICAgICBzdXBwbGllcjogc3VwcGxpZXJzW3N1cHBsaWVySW5kZXhdLFxyXG4gICAgICAgICAgYmF0Y2hlczogaXRlbS5wYXJ0LmNhdGVnb3J5Py50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdlbGVjdHJvbmljJykgPyBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBpZDogYGJhdGNoXyR7aXRlbS5pZH1fMWAsXHJcbiAgICAgICAgICAgICAgYmF0Y2hOdW1iZXI6IGBCJHtEYXRlLm5vdygpLnRvU3RyaW5nKCkuc2xpY2UoLTYpfWAsXHJcbiAgICAgICAgICAgICAgcGFydElkOiBpdGVtLnBhcnRJZCxcclxuICAgICAgICAgICAgICBsb2NhdGlvbklkOiBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0uaWQsXHJcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IE1hdGguZmxvb3IoaXRlbS5vbkhhbmRRdWFudGl0eSAqIDAuNiksXHJcbiAgICAgICAgICAgICAgbWFudWZhY3R1cmVEYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gTWF0aC5yYW5kb20oKSAqIDE4MCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgZXhwaXJ5RGF0ZTogbnVsbCxcclxuICAgICAgICAgICAgICBzdXBwbGllcklkOiBzdXBwbGllcnNbc3VwcGxpZXJJbmRleF0uaWQsXHJcbiAgICAgICAgICAgICAgcXVhbGl0eVN0YXR1czogJ0dPT0QnLFxyXG4gICAgICAgICAgICAgIG5vdGVzOiAnUHJpbWFyeSBiYXRjaCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXSA6IFtdLFxyXG4gICAgICAgICAgc2VyaWFsczogaXRlbS5wYXJ0LnByaWNlID4gNTAwMCA/IEFycmF5LmZyb20oeyBsZW5ndGg6IE1hdGgubWluKDMsIGl0ZW0ub25IYW5kUXVhbnRpdHkpIH0sIChfLCBpKSA9PiAoe1xyXG4gICAgICAgICAgICBpZDogYHNlcmlhbF8ke2l0ZW0uaWR9XyR7aX1gLFxyXG4gICAgICAgICAgICBzZXJpYWxOdW1iZXI6IGBTTiR7RGF0ZS5ub3coKS50b1N0cmluZygpLnNsaWNlKC04KX0ke2kudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWAsXHJcbiAgICAgICAgICAgIHBhcnRJZDogaXRlbS5wYXJ0SWQsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uSWQ6IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5pZCxcclxuICAgICAgICAgICAgc3RhdHVzOiAnQVZBSUxBQkxFJyxcclxuICAgICAgICAgICAgbWFudWZhY3R1cmVEYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gTWF0aC5yYW5kb20oKSAqIDkwICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgd2FycmFudHlFeHBpcnk6IG5ldyBEYXRlKERhdGUubm93KCkgKyAoMzY1ICsgTWF0aC5yYW5kb20oKSAqIDM2NSkgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICBub3RlczogYFNlcmlhbCBpdGVtICR7aSArIDF9YFxyXG4gICAgICAgICAgfSkpIDogW11cclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFRyYW5zZm9ybSBtb3ZlbWVudHMgd2l0aCBmbG93IHRyYWNraW5nXHJcbiAgICAgIGNvbnN0IGVuaGFuY2VkTW92ZW1lbnRzID0gbW92ZW1lbnRzLm1hcChtb3ZlbWVudCA9PiAoe1xyXG4gICAgICAgIGlkOiBtb3ZlbWVudC5pZCxcclxuICAgICAgICB0eXBlOiBtYXBBY3Rpb25UeXBlVG9Nb3ZlbWVudFR5cGUobW92ZW1lbnQuYWN0aW9uVHlwZSksXHJcbiAgICAgICAgc3ViVHlwZTogbW92ZW1lbnQuYWN0aW9uVHlwZSxcclxuICAgICAgICBwYXJ0SWQ6IG1vdmVtZW50LnBhcnRJZCxcclxuICAgICAgICBmcm9tTG9jYXRpb25JZDogZ2V0RnJvbUxvY2F0aW9uKG1vdmVtZW50LnNvdXJjZSksXHJcbiAgICAgICAgdG9Mb2NhdGlvbklkOiBnZXRUb0xvY2F0aW9uKG1vdmVtZW50LmRlc3RpbmF0aW9uKSxcclxuICAgICAgICBxdWFudGl0eTogbW92ZW1lbnQucXVhbnRpdHksXHJcbiAgICAgICAgdW5pdENvc3Q6IG1vdmVtZW50LnVuaXRDb3N0LFxyXG4gICAgICAgIHRvdGFsVmFsdWU6IG1vdmVtZW50LnRvdGFsVmFsdWUsXHJcbiAgICAgICAgcmVhc29uOiBtb3ZlbWVudC5yZWZlcmVuY2VOb3RlIHx8ICdTdG9jayBtb3ZlbWVudCcsXHJcbiAgICAgICAgcmVmZXJlbmNlOiBtb3ZlbWVudC5zaGlwbWVudElkLFxyXG4gICAgICAgIGJhdGNoTnVtYmVyOiBudWxsLFxyXG4gICAgICAgIHNlcmlhbE51bWJlcnM6IFtdLFxyXG4gICAgICAgIGV4cGlyeURhdGU6IG51bGwsXHJcbiAgICAgICAgcXVhbGl0eVN0YXR1czogJ0dPT0QnLFxyXG4gICAgICAgIGFwcHJvdmVkQnk6IG1vdmVtZW50LmNyZWF0ZWRCeSxcclxuICAgICAgICBwZXJmb3JtZWRCeTogbW92ZW1lbnQuY3JlYXRlZEJ5IHx8ICdTWVNURU0nLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbW92ZW1lbnQuY3JlYXRlZEF0LFxyXG4gICAgICAgIG5vdGVzOiBtb3ZlbWVudC5yZWZlcmVuY2VOb3RlLFxyXG4gICAgICAgIGF0dGFjaG1lbnRzOiBbXSxcclxuICAgICAgICBmbG93RGlyZWN0aW9uOiBnZXRGbG93RGlyZWN0aW9uKG1vdmVtZW50LmFjdGlvblR5cGUpLFxyXG4gICAgICAgIGZsb3dTdGFnZTogZ2V0Rmxvd1N0YWdlKG1vdmVtZW50LnNvdXJjZSwgbW92ZW1lbnQuZGVzdGluYXRpb24pLFxyXG4gICAgICAgIGNoYWluT2ZDdXN0b2R5OiBbbW92ZW1lbnQuc291cmNlLCBtb3ZlbWVudC5kZXN0aW5hdGlvbl0uZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAgIH0pKTtcclxuXHJcbiAgICAgIC8vIEdlbmVyYXRlIGFuYWx5dGljcyBkYXRhXHJcbiAgICAgIGNvbnN0IGFuYWx5dGljcyA9IGF3YWl0IGdlbmVyYXRlQW5hbHl0aWNzRGF0YShicmFuZElkLCBlbmhhbmNlZEludmVudG9yeSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZW5lcmF0ZSBmb3JlY2FzdGluZyBkYXRhXHJcbiAgICAgIGNvbnN0IGZvcmVjYXN0aW5nID0gYXdhaXQgZ2VuZXJhdGVGb3JlY2FzdGluZ0RhdGEoYnJhbmRJZCwgZW5oYW5jZWRJbnZlbnRvcnkpO1xyXG4gICAgICBcclxuICAgICAgLy8gR2VuZXJhdGUgQUkgaW5zaWdodHNcclxuICAgICAgY29uc3QgYWlJbnNpZ2h0cyA9IGdlbmVyYXRlQUlJbnNpZ2h0cyhlbmhhbmNlZEludmVudG9yeSwgZW5oYW5jZWRNb3ZlbWVudHMsIGZvcndhcmRGbG93LCByZXZlcnNlRmxvdyk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgc3VtbWFyeSxcclxuICAgICAgICAgIGludmVudG9yeTogZW5oYW5jZWRJbnZlbnRvcnksXHJcbiAgICAgICAgICBtb3ZlbWVudHM6IGVuaGFuY2VkTW92ZW1lbnRzLFxyXG4gICAgICAgICAgbG9jYXRpb25zLFxyXG4gICAgICAgICAgc3VwcGxpZXJzLFxyXG4gICAgICAgICAgZm9yd2FyZEZsb3csXHJcbiAgICAgICAgICByZXZlcnNlRmxvdyxcclxuICAgICAgICAgIGFsZXJ0cyxcclxuICAgICAgICAgIGFuYWx5dGljcyxcclxuICAgICAgICAgIGZvcmVjYXN0aW5nLFxyXG4gICAgICAgICAgYWlJbnNpZ2h0c1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdVbmlmaWVkIGludmVudG9yeSBzeXN0ZW0gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uc1xyXG5mdW5jdGlvbiBnZXRBQkNDbGFzc2lmaWNhdGlvbih2YWx1ZTogbnVtYmVyKTogJ0EnIHwgJ0InIHwgJ0MnIHtcclxuICBpZiAodmFsdWUgPiAxMDAwMCkgcmV0dXJuICdBJztcclxuICBpZiAodmFsdWUgPiA1MDAwKSByZXR1cm4gJ0InO1xyXG4gIHJldHVybiAnQyc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFhZWkNsYXNzaWZpY2F0aW9uKCk6ICdYJyB8ICdZJyB8ICdaJyB7XHJcbiAgY29uc3QgcmFuZG9tID0gTWF0aC5yYW5kb20oKTtcclxuICBpZiAocmFuZG9tIDwgMC4zKSByZXR1cm4gJ1gnO1xyXG4gIGlmIChyYW5kb20gPCAwLjYpIHJldHVybiAnWSc7XHJcbiAgcmV0dXJuICdaJztcclxufVxyXG5cclxuZnVuY3Rpb24gbWFwQWN0aW9uVHlwZVRvTW92ZW1lbnRUeXBlKGFjdGlvblR5cGU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgbWFwcGluZzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuICAgICdBREQnOiAnUkVDRUlQVCcsXHJcbiAgICAnVFJBTlNGRVJfT1VUJzogJ0lTU1VFJyxcclxuICAgICdUUkFOU0ZFUl9JTic6ICdSRUNFSVBUJyxcclxuICAgICdSRVZFUlNFX0lOJzogJ1JFVFVSTicsXHJcbiAgICAnUkVWRVJTRV9PVVQnOiAnSVNTVUUnLFxyXG4gICAgJ0NPTlNVTUVEJzogJ0lTU1VFJ1xyXG4gIH07XHJcbiAgcmV0dXJuIG1hcHBpbmdbYWN0aW9uVHlwZV0gfHwgJ0FESlVTVE1FTlQnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGcm9tTG9jYXRpb24oc291cmNlOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gIGlmIChzb3VyY2UgPT09ICdCUkFORCcpIHJldHVybiAnbG9jMSc7XHJcbiAgaWYgKHNvdXJjZSA9PT0gJ1NFUlZJQ0VfQ0VOVEVSJykgcmV0dXJuICdsb2MyJztcclxuICBpZiAoc291cmNlID09PSAnRElTVFJJQlVUT1InKSByZXR1cm4gJ2xvYzMnO1xyXG4gIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRvTG9jYXRpb24oZGVzdGluYXRpb246IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgaWYgKGRlc3RpbmF0aW9uID09PSAnQlJBTkQnKSByZXR1cm4gJ2xvYzEnO1xyXG4gIGlmIChkZXN0aW5hdGlvbiA9PT0gJ1NFUlZJQ0VfQ0VOVEVSJykgcmV0dXJuICdsb2MyJztcclxuICBpZiAoZGVzdGluYXRpb24gPT09ICdESVNUUklCVVRPUicpIHJldHVybiAnbG9jMyc7XHJcbiAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Rmxvd0RpcmVjdGlvbihhY3Rpb25UeXBlOiBzdHJpbmcpOiAnRk9SV0FSRCcgfCAnUkVWRVJTRScge1xyXG4gIHJldHVybiBhY3Rpb25UeXBlLmluY2x1ZGVzKCdSRVZFUlNFJykgPyAnUkVWRVJTRScgOiAnRk9SV0FSRCc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEZsb3dTdGFnZShzb3VyY2U6IHN0cmluZywgZGVzdGluYXRpb246IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGAke3NvdXJjZX0g4oaSICR7ZGVzdGluYXRpb259YDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVMb2NhdGlvbnNEYXRhKCkge1xyXG4gIHJldHVybiBbXHJcbiAgICB7XHJcbiAgICAgIGlkOiAnbG9jMScsXHJcbiAgICAgIGNvZGU6ICdXSDAwMScsXHJcbiAgICAgIG5hbWU6ICdNYWluIFdhcmVob3VzZScsXHJcbiAgICAgIHR5cGU6ICdXQVJFSE9VU0UnLFxyXG4gICAgICB6b25lOiAnQScsXHJcbiAgICAgIGFpc2xlOiAnMDEnLFxyXG4gICAgICByYWNrOiAnUjEnLFxyXG4gICAgICBzaGVsZjogJ1MxJyxcclxuICAgICAgYmluOiAnQjEnLFxyXG4gICAgICBjYXBhY2l0eTogMTAwMCxcclxuICAgICAgY3VycmVudFV0aWxpemF0aW9uOiA3NTAsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiAyNSxcclxuICAgICAgaHVtaWRpdHk6IDYwLFxyXG4gICAgICBzZWN1cml0eUxldmVsOiAnSElHSCcsXHJcbiAgICAgIGFjY2Vzc1Jlc3RyaWN0ZWQ6IGZhbHNlLFxyXG4gICAgICBhY3RpdmU6IHRydWUsXHJcbiAgICAgIGFkZHJlc3M6ICdNYWluIHdhcmVob3VzZSBhZGRyZXNzLCBJbmR1c3RyaWFsIEFyZWEnLFxyXG4gICAgICBjb29yZGluYXRlczogJzI4LjcwNDEsNzcuMTAyNScsXHJcbiAgICAgIG1hbmFnZXI6ICdKb2huIERvZScsXHJcbiAgICAgIGNvbnRhY3Q6ICcrOTEtOTg3NjU0MzIxMCcsXHJcbiAgICAgIG5vdGVzOiAnUHJpbWFyeSBzdG9yYWdlIGxvY2F0aW9uIGZvciBhbGwgcGFydHMnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBpZDogJ2xvYzInLFxyXG4gICAgICBjb2RlOiAnU1QwMDEnLFxyXG4gICAgICBuYW1lOiAnU3RvcmUgUm9vbScsXHJcbiAgICAgIHR5cGU6ICdTVE9SRScsXHJcbiAgICAgIHpvbmU6ICdCJyxcclxuICAgICAgYWlzbGU6ICcwMicsXHJcbiAgICAgIHJhY2s6ICdSMicsXHJcbiAgICAgIHNoZWxmOiAnUzInLFxyXG4gICAgICBiaW46ICdCMicsXHJcbiAgICAgIGNhcGFjaXR5OiA1MDAsXHJcbiAgICAgIGN1cnJlbnRVdGlsaXphdGlvbjogMzAwLFxyXG4gICAgICB0ZW1wZXJhdHVyZTogMjIsXHJcbiAgICAgIGh1bWlkaXR5OiA1NSxcclxuICAgICAgc2VjdXJpdHlMZXZlbDogJ01FRElVTScsXHJcbiAgICAgIGFjY2Vzc1Jlc3RyaWN0ZWQ6IHRydWUsXHJcbiAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgICAgYWRkcmVzczogJ1N0b3JlIHJvb20sIEdyb3VuZCBmbG9vcicsXHJcbiAgICAgIGNvb3JkaW5hdGVzOiAnMjguNzA0MSw3Ny4xMDI1JyxcclxuICAgICAgbWFuYWdlcjogJ0phbmUgU21pdGgnLFxyXG4gICAgICBjb250YWN0OiAnKzkxLTk4NzY1NDMyMTEnLFxyXG4gICAgICBub3RlczogJ1NlY29uZGFyeSBzdG9yYWdlIGZvciBvdmVyZmxvdyBpdGVtcydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGlkOiAnbG9jMycsXHJcbiAgICAgIGNvZGU6ICdRQzAwMScsXHJcbiAgICAgIG5hbWU6ICdRdWFsaXR5IENvbnRyb2wgQXJlYScsXHJcbiAgICAgIHR5cGU6ICdRVUFSQU5USU5FJyxcclxuICAgICAgem9uZTogJ0MnLFxyXG4gICAgICBhaXNsZTogJzAzJyxcclxuICAgICAgcmFjazogJ1IzJyxcclxuICAgICAgc2hlbGY6ICdTMycsXHJcbiAgICAgIGJpbjogJ0IzJyxcclxuICAgICAgY2FwYWNpdHk6IDEwMCxcclxuICAgICAgY3VycmVudFV0aWxpemF0aW9uOiAyNSxcclxuICAgICAgdGVtcGVyYXR1cmU6IDIwLFxyXG4gICAgICBodW1pZGl0eTogNTAsXHJcbiAgICAgIHNlY3VyaXR5TGV2ZWw6ICdISUdIJyxcclxuICAgICAgYWNjZXNzUmVzdHJpY3RlZDogdHJ1ZSxcclxuICAgICAgYWN0aXZlOiB0cnVlLFxyXG4gICAgICBhZGRyZXNzOiAnUUMgTGFiLCBGaXJzdCBmbG9vcicsXHJcbiAgICAgIGNvb3JkaW5hdGVzOiAnMjguNzA0MSw3Ny4xMDI1JyxcclxuICAgICAgbWFuYWdlcjogJ1F1YWxpdHkgTWFuYWdlcicsXHJcbiAgICAgIGNvbnRhY3Q6ICcrOTEtOTg3NjU0MzIxMicsXHJcbiAgICAgIG5vdGVzOiAnUXVhcmFudGluZSBhcmVhIGZvciBxdWFsaXR5IGluc3BlY3Rpb24nXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBpZDogJ2xvYzQnLFxyXG4gICAgICBjb2RlOiAnVFIwMDEnLFxyXG4gICAgICBuYW1lOiAnVHJhbnNpdCBIdWInLFxyXG4gICAgICB0eXBlOiAnVFJBTlNJVCcsXHJcbiAgICAgIHpvbmU6ICdEJyxcclxuICAgICAgYWlzbGU6ICcwNCcsXHJcbiAgICAgIHJhY2s6ICdSNCcsXHJcbiAgICAgIHNoZWxmOiAnUzQnLFxyXG4gICAgICBiaW46ICdCNCcsXHJcbiAgICAgIGNhcGFjaXR5OiAyMDAsXHJcbiAgICAgIGN1cnJlbnRVdGlsaXphdGlvbjogMTUwLFxyXG4gICAgICB0ZW1wZXJhdHVyZTogMjUsXHJcbiAgICAgIGh1bWlkaXR5OiA2MCxcclxuICAgICAgc2VjdXJpdHlMZXZlbDogJ01FRElVTScsXHJcbiAgICAgIGFjY2Vzc1Jlc3RyaWN0ZWQ6IGZhbHNlLFxyXG4gICAgICBhY3RpdmU6IHRydWUsXHJcbiAgICAgIGFkZHJlc3M6ICdUcmFuc2l0IGh1YiwgTG9hZGluZyBkb2NrJyxcclxuICAgICAgY29vcmRpbmF0ZXM6ICcyOC43MDQxLDc3LjEwMjUnLFxyXG4gICAgICBtYW5hZ2VyOiAnVHJhbnNpdCBNYW5hZ2VyJyxcclxuICAgICAgY29udGFjdDogJys5MS05ODc2NTQzMjEzJyxcclxuICAgICAgbm90ZXM6ICdUZW1wb3Jhcnkgc3RvcmFnZSBmb3IgaW4tdHJhbnNpdCBpdGVtcydcclxuICAgIH1cclxuICBdO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVN1cHBsaWVyc0RhdGEoKSB7XHJcbiAgcmV0dXJuIFtcclxuICAgIHtcclxuICAgICAgaWQ6ICdzdXAxJyxcclxuICAgICAgY29kZTogJ1NVUDAwMScsXHJcbiAgICAgIG5hbWU6ICdQcmVtaXVtIFBhcnRzIFN1cHBsaWVyJyxcclxuICAgICAgdHlwZTogJ01BTlVGQUNUVVJFUicsXHJcbiAgICAgIHJhdGluZzogNC41LFxyXG4gICAgICByZWxpYWJpbGl0eTogOTUsXHJcbiAgICAgIGxlYWRUaW1lOiA3LFxyXG4gICAgICBwYXltZW50VGVybXM6ICdORVQzMCcsXHJcbiAgICAgIGN1cnJlbmN5OiAnSU5SJyxcclxuICAgICAgdGF4SWQ6ICdHU1RJTjEyMzQ1Njc4OScsXHJcbiAgICAgIGNvbnRhY3Q6IHtcclxuICAgICAgICBwZXJzb246ICdKb2huIERvZScsXHJcbiAgICAgICAgZW1haWw6ICdqb2huQHByZW1pdW1wYXJ0cy5jb20nLFxyXG4gICAgICAgIHBob25lOiAnKzkxLTk4NzY1NDMyMTAnLFxyXG4gICAgICAgIGFkZHJlc3M6ICcxMjMgSW5kdXN0cmlhbCBBcmVhLCBNdW1iYWksIE1haGFyYXNodHJhIDQwMDAwMSdcclxuICAgICAgfSxcclxuICAgICAgcGVyZm9ybWFuY2U6IHtcclxuICAgICAgICBvblRpbWVEZWxpdmVyeTogOTUsXHJcbiAgICAgICAgcXVhbGl0eVJhdGluZzogNC41LFxyXG4gICAgICAgIHByaWNlQ29tcGV0aXRpdmVuZXNzOiA0LjAsXHJcbiAgICAgICAgcmVzcG9uc2l2ZW5lc3M6IDQuMlxyXG4gICAgICB9LFxyXG4gICAgICBjZXJ0aWZpY2F0aW9uczogWydJU085MDAxOjIwMTUnLCAnSVNPMTQwMDE6MjAxNScsICdPSFNBUzE4MDAxJ10sXHJcbiAgICAgIGFjdGl2ZTogdHJ1ZVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgaWQ6ICdzdXAyJyxcclxuICAgICAgY29kZTogJ1NVUDAwMicsXHJcbiAgICAgIG5hbWU6ICdRdWFsaXR5IENvbXBvbmVudHMgTHRkJyxcclxuICAgICAgdHlwZTogJ0RJU1RSSUJVVE9SJyxcclxuICAgICAgcmF0aW5nOiA0LjIsXHJcbiAgICAgIHJlbGlhYmlsaXR5OiA4OCxcclxuICAgICAgbGVhZFRpbWU6IDEwLFxyXG4gICAgICBwYXltZW50VGVybXM6ICdORVQ0NScsXHJcbiAgICAgIGN1cnJlbmN5OiAnSU5SJyxcclxuICAgICAgdGF4SWQ6ICdHU1RJTjk4NzY1NDMyMScsXHJcbiAgICAgIGNvbnRhY3Q6IHtcclxuICAgICAgICBwZXJzb246ICdKYW5lIFNtaXRoJyxcclxuICAgICAgICBlbWFpbDogJ2phbmVAcXVhbGl0eWNvbXAuY29tJyxcclxuICAgICAgICBwaG9uZTogJys5MS05ODc2NTQzMjExJyxcclxuICAgICAgICBhZGRyZXNzOiAnNDU2IEJ1c2luZXNzIFBhcmssIERlbGhpLCBEZWxoaSAxMTAwMDEnXHJcbiAgICAgIH0sXHJcbiAgICAgIHBlcmZvcm1hbmNlOiB7XHJcbiAgICAgICAgb25UaW1lRGVsaXZlcnk6IDg4LFxyXG4gICAgICAgIHF1YWxpdHlSYXRpbmc6IDQuMixcclxuICAgICAgICBwcmljZUNvbXBldGl0aXZlbmVzczogNC4zLFxyXG4gICAgICAgIHJlc3BvbnNpdmVuZXNzOiA0LjBcclxuICAgICAgfSxcclxuICAgICAgY2VydGlmaWNhdGlvbnM6IFsnSVNPOTAwMToyMDE1J10sXHJcbiAgICAgIGFjdGl2ZTogdHJ1ZVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgaWQ6ICdzdXAzJyxcclxuICAgICAgY29kZTogJ1NVUDAwMycsXHJcbiAgICAgIG5hbWU6ICdGYXN0IERlbGl2ZXJ5IFBhcnRzJyxcclxuICAgICAgdHlwZTogJ1dIT0xFU0FMRVInLFxyXG4gICAgICByYXRpbmc6IDMuOCxcclxuICAgICAgcmVsaWFiaWxpdHk6IDgyLFxyXG4gICAgICBsZWFkVGltZTogNSxcclxuICAgICAgcGF5bWVudFRlcm1zOiAnTkVUMTUnLFxyXG4gICAgICBjdXJyZW5jeTogJ0lOUicsXHJcbiAgICAgIHRheElkOiAnR1NUSU40NTY3ODkxMjMnLFxyXG4gICAgICBjb250YWN0OiB7XHJcbiAgICAgICAgcGVyc29uOiAnTWlrZSBKb2huc29uJyxcclxuICAgICAgICBlbWFpbDogJ21pa2VAZmFzdGRlbGl2ZXJ5LmNvbScsXHJcbiAgICAgICAgcGhvbmU6ICcrOTEtOTg3NjU0MzIxMicsXHJcbiAgICAgICAgYWRkcmVzczogJzc4OSBMb2dpc3RpY3MgSHViLCBCYW5nYWxvcmUsIEthcm5hdGFrYSA1NjAwMDEnXHJcbiAgICAgIH0sXHJcbiAgICAgIHBlcmZvcm1hbmNlOiB7XHJcbiAgICAgICAgb25UaW1lRGVsaXZlcnk6IDgyLFxyXG4gICAgICAgIHF1YWxpdHlSYXRpbmc6IDMuOCxcclxuICAgICAgICBwcmljZUNvbXBldGl0aXZlbmVzczogNC41LFxyXG4gICAgICAgIHJlc3BvbnNpdmVuZXNzOiA0LjFcclxuICAgICAgfSxcclxuICAgICAgY2VydGlmaWNhdGlvbnM6IFtdLFxyXG4gICAgICBhY3RpdmU6IHRydWVcclxuICAgIH1cclxuICBdO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUZvcndhcmRGbG93RGF0YShicmFuZElkOiBzdHJpbmcpIHtcclxuICAvLyBHZW5lcmF0ZSByZWFsaXN0aWMgZm9yd2FyZCBmbG93IGRhdGEgYmFzZWQgb24gcmVjZW50IHNoaXBtZW50c1xyXG4gIGNvbnN0IHJlY2VudFNoaXBtZW50cyA9IGF3YWl0IHByaXNtYS5zaGlwbWVudC5maW5kTWFueSh7XHJcbiAgICB3aGVyZToge1xyXG4gICAgICBicmFuZElkLFxyXG4gICAgICBjcmVhdGVkQXQ6IHtcclxuICAgICAgICBndGU6IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBpbmNsdWRlOiB7XHJcbiAgICAgIGJveGVzOiB7XHJcbiAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgYm94UGFydHM6IHtcclxuICAgICAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgICAgIHBhcnQ6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHRha2U6IDIwXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiByZWNlbnRTaGlwbWVudHMuZmxhdE1hcChzaGlwbWVudCA9PiBcclxuICAgIHNoaXBtZW50LmJveGVzLmZsYXRNYXAoYm94ID0+XHJcbiAgICAgIGJveC5ib3hQYXJ0cy5tYXAoYm94UGFydCA9PiAoe1xyXG4gICAgICAgIGlkOiBgZm9yd2FyZF8ke3NoaXBtZW50LmlkfV8ke2JveC5pZH1fJHtib3hQYXJ0LmlkfWAsXHJcbiAgICAgICAgdHlwZTogJ0ZPUldBUkQnIGFzIGNvbnN0LFxyXG4gICAgICAgIHN0YWdlOiBzaGlwbWVudC5yZWNpcGllbnRUeXBlID09PSAnRElTVFJJQlVUT1InID8gJ0JyYW5kIOKGkiBEaXN0cmlidXRvcicgOiAnQnJhbmQg4oaSIFNlcnZpY2UgQ2VudGVyJyxcclxuICAgICAgICBwYXJ0SWQ6IGJveFBhcnQucGFydElkLFxyXG4gICAgICAgIHF1YW50aXR5OiBib3hQYXJ0LnF1YW50aXR5LFxyXG4gICAgICAgIGZyb21FbnRpdHk6ICdCcmFuZCcsXHJcbiAgICAgICAgdG9FbnRpdHk6IHNoaXBtZW50LnJlY2lwaWVudFR5cGUgPT09ICdESVNUUklCVVRPUicgPyAnRGlzdHJpYnV0b3InIDogJ1NlcnZpY2UgQ2VudGVyJyxcclxuICAgICAgICBzaGlwbWVudElkOiBzaGlwbWVudC5pZCxcclxuICAgICAgICBhd2JOdW1iZXI6IHNoaXBtZW50LmF3Yk51bWJlcixcclxuICAgICAgICBzdGF0dXM6IG1hcFNoaXBtZW50U3RhdHVzVG9GbG93U3RhdHVzKHNoaXBtZW50LnN0YXR1cyksXHJcbiAgICAgICAgdGltZXN0YW1wOiBzaGlwbWVudC5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBlc3RpbWF0ZWREZWxpdmVyeTogc2hpcG1lbnQuZXhwZWN0ZWREZWxpdmVyeT8udG9JU09TdHJpbmcoKSxcclxuICAgICAgICBhY3R1YWxEZWxpdmVyeTogc2hpcG1lbnQuYWN0dWFsRGVsaXZlcnk/LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgbm90ZXM6IHNoaXBtZW50Lm5vdGVzXHJcbiAgICAgIH0pKVxyXG4gICAgKVxyXG4gICk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlUmV2ZXJzZUZsb3dEYXRhKGJyYW5kSWQ6IHN0cmluZykge1xyXG4gIC8vIEdlbmVyYXRlIHJlYWxpc3RpYyByZXZlcnNlIGZsb3cgZGF0YSBiYXNlZCBvbiByZXR1cm4gcmVxdWVzdHNcclxuICBjb25zdCByZXZlcnNlUmVxdWVzdHMgPSBhd2FpdCBwcmlzbWEucmV2ZXJzZVJlcXVlc3QuZmluZE1hbnkoe1xyXG4gICAgd2hlcmU6IHtcclxuICAgICAgc2VydmljZUNlbnRlcjoge1xyXG4gICAgICAgIGJyYW5kU2VydmljZUNlbnRlcnM6IHtcclxuICAgICAgICAgIHNvbWU6IHtcclxuICAgICAgICAgICAgYnJhbmRJZFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgY3JlYXRlZEF0OiB7XHJcbiAgICAgICAgZ3RlOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgaW5jbHVkZToge1xyXG4gICAgICBwYXJ0OiB0cnVlLFxyXG4gICAgICBzZXJ2aWNlQ2VudGVyOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgdGFrZTogMTVcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHJldmVyc2VSZXF1ZXN0cy5tYXAocmVxdWVzdCA9PiAoe1xyXG4gICAgaWQ6IGByZXZlcnNlXyR7cmVxdWVzdC5pZH1gLFxyXG4gICAgdHlwZTogJ1JFVkVSU0UnIGFzIGNvbnN0LFxyXG4gICAgc3RhZ2U6ICdTZXJ2aWNlIENlbnRlciDihpIgQnJhbmQnLFxyXG4gICAgcGFydElkOiByZXF1ZXN0LnBhcnRJZCxcclxuICAgIHF1YW50aXR5OiByZXF1ZXN0LnF1YW50aXR5LFxyXG4gICAgZnJvbUVudGl0eTogJ1NlcnZpY2UgQ2VudGVyJyxcclxuICAgIHRvRW50aXR5OiAnQnJhbmQnLFxyXG4gICAgYXdiTnVtYmVyOiByZXF1ZXN0LmF3Yk51bWJlcixcclxuICAgIHN0YXR1czogbWFwUmV2ZXJzZVN0YXR1c1RvRmxvd1N0YXR1cyhyZXF1ZXN0LnN0YXR1cyksXHJcbiAgICB0aW1lc3RhbXA6IHJlcXVlc3QuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXHJcbiAgICByZWFzb246IHJlcXVlc3QucmVhc29uLFxyXG4gICAgbm90ZXM6IGBSZXR1cm4gcmVhc29uOiAke3JlcXVlc3QucmVhc29ufWBcclxuICB9KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hcFNoaXBtZW50U3RhdHVzVG9GbG93U3RhdHVzKHN0YXR1czogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCBtYXBwaW5nOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gICAgJ0RFTElWRVJFRCc6ICdERUxJVkVSRUQnLFxyXG4gICAgJ0lOX1RSQU5TSVQnOiAnSU5fVFJBTlNJVCcsXHJcbiAgICAnT1VUX0ZPUl9ERUxJVkVSWSc6ICdJTl9UUkFOU0lUJyxcclxuICAgICdESVNQQVRDSEVEJzogJ0lOX1RSQU5TSVQnLFxyXG4gICAgJ1BJQ0tVUF9DT01QTEVURUQnOiAnSU5fVFJBTlNJVCcsXHJcbiAgICAnQVdCX0dFTkVSQVRFRCc6ICdJTklUSUFURUQnLFxyXG4gICAgJ0NPTkZJUk1FRCc6ICdJTklUSUFURUQnXHJcbiAgfTtcclxuICByZXR1cm4gbWFwcGluZ1tzdGF0dXNdIHx8ICdJTklUSUFURUQnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYXBSZXZlcnNlU3RhdHVzVG9GbG93U3RhdHVzKHN0YXR1czogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCBtYXBwaW5nOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gICAgJ1JFQ0VJVkVEJzogJ1JFQ0VJVkVEJyxcclxuICAgICdQSUNLRUQnOiAnSU5fVFJBTlNJVCcsXHJcbiAgICAnQVBQUk9WRUQnOiAnSU5JVElBVEVEJyxcclxuICAgICdSRVFVRVNURUQnOiAnSU5JVElBVEVEJ1xyXG4gIH07XHJcbiAgcmV0dXJuIG1hcHBpbmdbc3RhdHVzXSB8fCAnSU5JVElBVEVEJztcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVVbmlmaWVkQWxlcnRzKGJyYW5kSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IGludmVudG9yeSA9IGF3YWl0IHByaXNtYS5icmFuZEludmVudG9yeS5maW5kTWFueSh7XHJcbiAgICB3aGVyZTogeyBicmFuZElkIH0sXHJcbiAgICBpbmNsdWRlOiB7XHJcbiAgICAgIHBhcnQ6IHtcclxuICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgIGNvZGU6IHRydWUsXHJcbiAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgbWluU3RvY2tMZXZlbDogdHJ1ZSxcclxuICAgICAgICAgIG1heFN0b2NrTGV2ZWw6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgY29uc3QgYWxlcnRzID0gW107XHJcblxyXG4gIGZvciAoY29uc3QgaXRlbSBvZiBpbnZlbnRvcnkpIHtcclxuICAgIGlmIChpdGVtLm9uSGFuZFF1YW50aXR5ID09PSAwKSB7XHJcbiAgICAgIGFsZXJ0cy5wdXNoKHtcclxuICAgICAgICBpZDogYGFsZXJ0XyR7aXRlbS5pZH1fb3V0X29mX3N0b2NrYCxcclxuICAgICAgICB0eXBlOiAnT1VUX09GX1NUT0NLJyxcclxuICAgICAgICBzZXZlcml0eTogJ0NSSVRJQ0FMJyxcclxuICAgICAgICBwYXJ0SWQ6IGl0ZW0ucGFydElkLFxyXG4gICAgICAgIGxvY2F0aW9uSWQ6ICdsb2MxJyxcclxuICAgICAgICB0aXRsZTogYE91dCBvZiBTdG9jazogJHtpdGVtLnBhcnQuY29kZX1gLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgJHtpdGVtLnBhcnQubmFtZX0gaXMgY29tcGxldGVseSBvdXQgb2Ygc3RvY2tgLFxyXG4gICAgICAgIGFjdGlvblJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIHN0YXR1czogJ09QRU4nLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChpdGVtLm9uSGFuZFF1YW50aXR5IDw9IGl0ZW0ucGFydC5taW5TdG9ja0xldmVsKSB7XHJcbiAgICAgIGFsZXJ0cy5wdXNoKHtcclxuICAgICAgICBpZDogYGFsZXJ0XyR7aXRlbS5pZH1fbG93X3N0b2NrYCxcclxuICAgICAgICB0eXBlOiAnTE9XX1NUT0NLJyxcclxuICAgICAgICBzZXZlcml0eTogJ0hJR0gnLFxyXG4gICAgICAgIHBhcnRJZDogaXRlbS5wYXJ0SWQsXHJcbiAgICAgICAgbG9jYXRpb25JZDogJ2xvYzEnLFxyXG4gICAgICAgIHRpdGxlOiBgTG93IFN0b2NrOiAke2l0ZW0ucGFydC5jb2RlfWAsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IGAke2l0ZW0ucGFydC5uYW1lfSBpcyBiZWxvdyBtaW5pbXVtIHN0b2NrIGxldmVsICgke2l0ZW0ub25IYW5kUXVhbnRpdHl9LyR7aXRlbS5wYXJ0Lm1pblN0b2NrTGV2ZWx9KWAsXHJcbiAgICAgICAgYWN0aW9uUmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgc3RhdHVzOiAnT1BFTicsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBBZGQgZmxvdyBkaXNydXB0aW9uIGFsZXJ0c1xyXG4gIGFsZXJ0cy5wdXNoKHtcclxuICAgIGlkOiAnZmxvd19hbGVydF8xJyxcclxuICAgIHR5cGU6ICdGTE9XX0RJU1JVUFRJT04nLFxyXG4gICAgc2V2ZXJpdHk6ICdNRURJVU0nLFxyXG4gICAgdGl0bGU6ICdEZWxheWVkIEZvcndhcmQgRmxvdycsXHJcbiAgICBkZXNjcmlwdGlvbjogJ1NvbWUgc2hpcG1lbnRzIGFyZSBleHBlcmllbmNpbmcgZGVsYXlzIGluIHRoZSBCcmFuZCDihpIgU2VydmljZSBDZW50ZXIgZmxvdycsXHJcbiAgICBhY3Rpb25SZXF1aXJlZDogZmFsc2UsXHJcbiAgICBzdGF0dXM6ICdPUEVOJyxcclxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBhbGVydHM7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQW5hbHl0aWNzRGF0YShicmFuZElkOiBzdHJpbmcsIGludmVudG9yeTogYW55W10pIHtcclxuICByZXR1cm4ge1xyXG4gICAgdHVybm92ZXJBbmFseXNpczogW10sXHJcbiAgICBhYmNBbmFseXNpczogW10sXHJcbiAgICB4eXpBbmFseXNpczogW10sXHJcbiAgICBsb2NhdGlvblV0aWxpemF0aW9uOiBbXSxcclxuICAgIHN1cHBsaWVyUGVyZm9ybWFuY2U6IFtdLFxyXG4gICAgZmxvd0VmZmljaWVuY3k6IHtcclxuICAgICAgZm9yd2FyZEZsb3dFZmZpY2llbmN5OiA4Ny41LFxyXG4gICAgICByZXZlcnNlRmxvd0VmZmljaWVuY3k6IDgyLjMsXHJcbiAgICAgIGF2ZXJhZ2VUcmFuc2l0VGltZTogMy4yLFxyXG4gICAgICBvblRpbWVEZWxpdmVyeVJhdGU6IDg5LjdcclxuICAgIH1cclxuICB9O1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUZvcmVjYXN0aW5nRGF0YShicmFuZElkOiBzdHJpbmcsIGludmVudG9yeTogYW55W10pIHtcclxuICByZXR1cm4ge1xyXG4gICAgZGVtYW5kRm9yZWNhc3Q6IFtdLFxyXG4gICAgcmVvcmRlclJlY29tbWVuZGF0aW9uczogW10sXHJcbiAgICBzZWFzb25hbFBhdHRlcm5zOiBbXSxcclxuICAgIGZsb3dQcmVkaWN0aW9uczoge1xyXG4gICAgICBleHBlY3RlZEZvcndhcmRWb2x1bWU6IDE1MCxcclxuICAgICAgZXhwZWN0ZWRSZXZlcnNlVm9sdW1lOiAyNSxcclxuICAgICAgcGVha1BlcmlvZHM6IFsnUTQnLCAnRmVzdGl2YWwgU2Vhc29uJ10sXHJcbiAgICAgIGJvdHRsZW5lY2tzOiBbJ1NlcnZpY2UgQ2VudGVyIOKGkiBDdXN0b21lcicsICdRdWFsaXR5IENvbnRyb2wnXVxyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlQUlJbnNpZ2h0cyhpbnZlbnRvcnk6IGFueVtdLCBtb3ZlbWVudHM6IGFueVtdLCBmb3J3YXJkRmxvdzogYW55W10sIHJldmVyc2VGbG93OiBhbnlbXSkge1xyXG4gIHJldHVybiB7XHJcbiAgICBkZW1hbmRQcmVkaWN0aW9uOiBpbnZlbnRvcnkuc2xpY2UoMCwgNSkubWFwKGl0ZW0gPT4gKHtcclxuICAgICAgcGFydElkOiBpdGVtLnBhcnQuY29kZSxcclxuICAgICAgcHJlZGljdGVkRGVtYW5kOiBNYXRoLmZsb29yKGl0ZW0ub25IYW5kUXVhbnRpdHkgKiAoMC44ICsgTWF0aC5yYW5kb20oKSAqIDAuNCkpLFxyXG4gICAgICBjb25maWRlbmNlOiA3NSArIE1hdGgucmFuZG9tKCkgKiAyMCxcclxuICAgICAgdGltZWZyYW1lOiAnMzAgZGF5cycsXHJcbiAgICAgIGZhY3RvcnM6IFsnSGlzdG9yaWNhbCBkZW1hbmQnLCAnU2Vhc29uYWwgdHJlbmRzJywgJ01hcmtldCBjb25kaXRpb25zJ11cclxuICAgIH0pKSxcclxuICAgIFxyXG4gICAgc3RvY2tPcHRpbWl6YXRpb246IGludmVudG9yeS5zbGljZSgwLCA1KS5tYXAoaXRlbSA9PiAoe1xyXG4gICAgICBwYXJ0SWQ6IGl0ZW0ucGFydC5jb2RlLFxyXG4gICAgICBjdXJyZW50U3RvY2s6IGl0ZW0ub25IYW5kUXVhbnRpdHksXHJcbiAgICAgIG9wdGltYWxTdG9jazogTWF0aC5mbG9vcihpdGVtLm9uSGFuZFF1YW50aXR5ICogKDAuOSArIE1hdGgucmFuZG9tKCkgKiAwLjIpKSxcclxuICAgICAgcG90ZW50aWFsU2F2aW5nczogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTAwMCksXHJcbiAgICAgIHJlY29tbWVuZGF0aW9uOiAnT3B0aW1pemUgc3RvY2sgbGV2ZWxzIGJhc2VkIG9uIGRlbWFuZCBwYXR0ZXJucydcclxuICAgIH0pKSxcclxuICAgIFxyXG4gICAgZmxvd09wdGltaXphdGlvbjogW1xyXG4gICAgICB7XHJcbiAgICAgICAgcm91dGU6ICdCcmFuZCDihpIgU2VydmljZSBDZW50ZXInLFxyXG4gICAgICAgIGN1cnJlbnRFZmZpY2llbmN5OiA4NS4yLFxyXG4gICAgICAgIG9wdGltaXplZEVmZmljaWVuY3k6IDkyLjEsXHJcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXHJcbiAgICAgICAgICAnSW1wbGVtZW50IGJhdGNoIHNoaXBwaW5nIGZvciBiZXR0ZXIgZWZmaWNpZW5jeScsXHJcbiAgICAgICAgICAnT3B0aW1pemUgcGFja2FnaW5nIHRvIHJlZHVjZSB3ZWlnaHQnLFxyXG4gICAgICAgICAgJ1VzZSBleHByZXNzIGRlbGl2ZXJ5IGZvciBjcml0aWNhbCBwYXJ0cydcclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICByb3V0ZTogJ1NlcnZpY2UgQ2VudGVyIOKGkiBCcmFuZCAoUmV2ZXJzZSknLFxyXG4gICAgICAgIGN1cnJlbnRFZmZpY2llbmN5OiA3OC41LFxyXG4gICAgICAgIG9wdGltaXplZEVmZmljaWVuY3k6IDg2LjMsXHJcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXHJcbiAgICAgICAgICAnU3RyZWFtbGluZSByZXR1cm4gYXBwcm92YWwgcHJvY2VzcycsXHJcbiAgICAgICAgICAnSW1wbGVtZW50IHF1YWxpdHkgZ2F0ZXMgYXQgc2VydmljZSBjZW50ZXJzJyxcclxuICAgICAgICAgICdVc2UgY29uc29saWRhdGVkIHJldHVybiBzaGlwbWVudHMnXHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcbiAgICBdLFxyXG4gICAgXHJcbiAgICBhbm9tYWx5RGV0ZWN0aW9uOiBbXHJcbiAgICAgIHtcclxuICAgICAgICB0eXBlOiAnVW51c3VhbCBTdG9jayBNb3ZlbWVudCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdEZXRlY3RlZCBhYm5vcm1hbCBzdG9jayBjb25zdW1wdGlvbiBwYXR0ZXJuIGZvciBlbGVjdHJvbmljIGNvbXBvbmVudHMnLFxyXG4gICAgICAgIHNldmVyaXR5OiAnTUVESVVNJyBhcyBjb25zdCxcclxuICAgICAgICBhZmZlY3RlZFBhcnRzOiBbJ0VMRUMwMDEnLCAnRUxFQzAwMiddLFxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9uOiAnUmV2aWV3IHNlcnZpY2UgY2VudGVyIGNvbnN1bXB0aW9uIHBhdHRlcm5zIGFuZCBpbnZlc3RpZ2F0ZSBwb3RlbnRpYWwgaXNzdWVzJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdHlwZTogJ0Zsb3cgQm90dGxlbmVjaycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdSZXZlcnNlIGZsb3cgZWZmaWNpZW5jeSBoYXMgZGVjcmVhc2VkIGJ5IDE1JSBpbiB0aGUgbGFzdCB3ZWVrJyxcclxuICAgICAgICBzZXZlcml0eTogJ0hJR0gnIGFzIGNvbnN0LFxyXG4gICAgICAgIGFmZmVjdGVkUGFydHM6IFsnTUVDSDAwMScsICdBVVRPMDAxJ10sXHJcbiAgICAgICAgcmVjb21tZW5kYXRpb246ICdJbnZlc3RpZ2F0ZSByZXR1cm4gcHJvY2Vzc2luZyBkZWxheXMgYW5kIG9wdGltaXplIHJldmVyc2UgbG9naXN0aWNzJ1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfTtcclxufSJdLCJuYW1lcyI6WyJwcmlzbWEiLCJ2ZXJpZnlUb2tlbiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJ1c2VyIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwicm9sZSIsIm1ldGhvZCIsImJyYW5kSWQiLCJxdWVyeSIsImlkIiwiaW52ZW50b3J5IiwibW92ZW1lbnRzIiwibG9jYXRpb25zIiwic3VwcGxpZXJzIiwiZm9yd2FyZEZsb3ciLCJyZXZlcnNlRmxvdyIsImFsZXJ0cyIsIlByb21pc2UiLCJhbGwiLCJicmFuZEludmVudG9yeSIsImZpbmRNYW55Iiwid2hlcmUiLCJpbmNsdWRlIiwicGFydCIsInNlbGVjdCIsImNvZGUiLCJuYW1lIiwicGFydE51bWJlciIsImNhdGVnb3J5Iiwic3ViQ2F0ZWdvcnkiLCJwcmljZSIsIndlaWdodCIsImxlbmd0aCIsImJyZWFkdGgiLCJoZWlnaHQiLCJtaW5TdG9ja0xldmVsIiwibWF4U3RvY2tMZXZlbCIsInJlb3JkZXJQb2ludCIsInJlb3JkZXJRdHkiLCJjb3N0UHJpY2UiLCJzZWxsaW5nUHJpY2UiLCJ3YXJyYW50eSIsInNwZWNpZmljYXRpb25zIiwidGFncyIsImZlYXR1cmVkIiwiaXNBY3RpdmUiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJvcmRlckJ5IiwibGFzdFVwZGF0ZWQiLCJpbnZlbnRvcnlMZWRnZXIiLCJndGUiLCJEYXRlIiwibm93Iiwic2hpcG1lbnQiLCJhd2JOdW1iZXIiLCJyZWNpcGllbnRUeXBlIiwidGFrZSIsImdlbmVyYXRlTG9jYXRpb25zRGF0YSIsImdlbmVyYXRlU3VwcGxpZXJzRGF0YSIsImdlbmVyYXRlRm9yd2FyZEZsb3dEYXRhIiwiZ2VuZXJhdGVSZXZlcnNlRmxvd0RhdGEiLCJnZW5lcmF0ZVVuaWZpZWRBbGVydHMiLCJzdW1tYXJ5IiwidG90YWxQYXJ0cyIsInRvdGFsVmFsdWUiLCJyZWR1Y2UiLCJzdW0iLCJpdGVtIiwib25IYW5kUXVhbnRpdHkiLCJsb3dTdG9ja0l0ZW1zIiwiZmlsdGVyIiwib3V0T2ZTdG9ja0l0ZW1zIiwidG90YWxMb2NhdGlvbnMiLCJ0b3RhbFN1cHBsaWVycyIsImF2Z1R1cm5vdmVyUmF0ZSIsInRvdGFsTW92ZW1lbnRzIiwiZm9yd2FyZEZsb3dWb2x1bWUiLCJyZXZlcnNlRmxvd1ZvbHVtZSIsImZsb3dFZmZpY2llbmN5IiwiZW5oYW5jZWRJbnZlbnRvcnkiLCJtYXAiLCJpbmRleCIsImxvY2F0aW9uSW5kZXgiLCJzdXBwbGllckluZGV4IiwiZGVmZWN0aXZlUXR5IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicXVhcmFudGluZVF0eSIsInJlc2VydmVkUXR5IiwiaW5UcmFuc2l0UXR5IiwicGFydElkIiwibG9jYXRpb25JZCIsInN1cHBsaWVySWQiLCJhdmFpbGFibGVRdWFudGl0eSIsIm1heCIsInJlc2VydmVkUXVhbnRpdHkiLCJhbGxvY2F0ZWRRdWFudGl0eSIsImluVHJhbnNpdFF1YW50aXR5IiwiZGVmZWN0aXZlUXVhbnRpdHkiLCJxdWFyYW50aW5lUXVhbnRpdHkiLCJsYXN0UmVzdG9ja2VkIiwibGFzdElzc3VlZCIsImxhc3RDb3VudGVkIiwidG9JU09TdHJpbmciLCJsYXN0TW92ZW1lbnQiLCJmaW5kIiwibSIsImF2ZXJhZ2VDb3N0IiwibGFzdENvc3QiLCJzdGFuZGFyZENvc3QiLCJmaWZvVmFsdWUiLCJsaWZvVmFsdWUiLCJ3ZWlnaHRlZEF2Z0Nvc3QiLCJkaW1lbnNpb25zIiwic2VyaWFsaXplZCIsImJhdGNoVHJhY2tlZCIsImluY2x1ZGVzIiwidG9VcHBlckNhc2UiLCJleHBpcnlUcmFja2VkIiwiaGF6YXJkb3VzIiwidG9Mb3dlckNhc2UiLCJjb250cm9sbGVkIiwiYWJjX2NsYXNzaWZpY2F0aW9uIiwiZ2V0QUJDQ2xhc3NpZmljYXRpb24iLCJ4eXpfY2xhc3NpZmljYXRpb24iLCJnZXRYWVpDbGFzc2lmaWNhdGlvbiIsImxlYWRUaW1lIiwic2hlbGZMaWZlIiwic3RvcmFnZUNvbmRpdGlvbnMiLCJsb2NhdGlvbiIsInN1cHBsaWVyIiwiYmF0Y2hlcyIsImJhdGNoTnVtYmVyIiwidG9TdHJpbmciLCJzbGljZSIsInF1YW50aXR5IiwibWFudWZhY3R1cmVEYXRlIiwiZXhwaXJ5RGF0ZSIsInF1YWxpdHlTdGF0dXMiLCJub3RlcyIsInNlcmlhbHMiLCJBcnJheSIsImZyb20iLCJtaW4iLCJfIiwiaSIsInNlcmlhbE51bWJlciIsInBhZFN0YXJ0Iiwid2FycmFudHlFeHBpcnkiLCJlbmhhbmNlZE1vdmVtZW50cyIsIm1vdmVtZW50IiwidHlwZSIsIm1hcEFjdGlvblR5cGVUb01vdmVtZW50VHlwZSIsImFjdGlvblR5cGUiLCJzdWJUeXBlIiwiZnJvbUxvY2F0aW9uSWQiLCJnZXRGcm9tTG9jYXRpb24iLCJzb3VyY2UiLCJ0b0xvY2F0aW9uSWQiLCJnZXRUb0xvY2F0aW9uIiwiZGVzdGluYXRpb24iLCJ1bml0Q29zdCIsInJlYXNvbiIsInJlZmVyZW5jZU5vdGUiLCJyZWZlcmVuY2UiLCJzaGlwbWVudElkIiwic2VyaWFsTnVtYmVycyIsImFwcHJvdmVkQnkiLCJjcmVhdGVkQnkiLCJwZXJmb3JtZWRCeSIsInRpbWVzdGFtcCIsImF0dGFjaG1lbnRzIiwiZmxvd0RpcmVjdGlvbiIsImdldEZsb3dEaXJlY3Rpb24iLCJmbG93U3RhZ2UiLCJnZXRGbG93U3RhZ2UiLCJjaGFpbk9mQ3VzdG9keSIsIkJvb2xlYW4iLCJhbmFseXRpY3MiLCJnZW5lcmF0ZUFuYWx5dGljc0RhdGEiLCJmb3JlY2FzdGluZyIsImdlbmVyYXRlRm9yZWNhc3RpbmdEYXRhIiwiYWlJbnNpZ2h0cyIsImdlbmVyYXRlQUlJbnNpZ2h0cyIsInN1Y2Nlc3MiLCJkYXRhIiwiY29uc29sZSIsImRldGFpbHMiLCJFcnJvciIsIm1lc3NhZ2UiLCJ2YWx1ZSIsIm1hcHBpbmciLCJ1bmRlZmluZWQiLCJ6b25lIiwiYWlzbGUiLCJyYWNrIiwic2hlbGYiLCJiaW4iLCJjYXBhY2l0eSIsImN1cnJlbnRVdGlsaXphdGlvbiIsInRlbXBlcmF0dXJlIiwiaHVtaWRpdHkiLCJzZWN1cml0eUxldmVsIiwiYWNjZXNzUmVzdHJpY3RlZCIsImFjdGl2ZSIsImFkZHJlc3MiLCJjb29yZGluYXRlcyIsIm1hbmFnZXIiLCJjb250YWN0IiwicmF0aW5nIiwicmVsaWFiaWxpdHkiLCJwYXltZW50VGVybXMiLCJjdXJyZW5jeSIsInRheElkIiwicGVyc29uIiwiZW1haWwiLCJwaG9uZSIsInBlcmZvcm1hbmNlIiwib25UaW1lRGVsaXZlcnkiLCJxdWFsaXR5UmF0aW5nIiwicHJpY2VDb21wZXRpdGl2ZW5lc3MiLCJyZXNwb25zaXZlbmVzcyIsImNlcnRpZmljYXRpb25zIiwicmVjZW50U2hpcG1lbnRzIiwiYm94ZXMiLCJib3hQYXJ0cyIsImZsYXRNYXAiLCJib3giLCJib3hQYXJ0Iiwic3RhZ2UiLCJmcm9tRW50aXR5IiwidG9FbnRpdHkiLCJtYXBTaGlwbWVudFN0YXR1c1RvRmxvd1N0YXR1cyIsImVzdGltYXRlZERlbGl2ZXJ5IiwiZXhwZWN0ZWREZWxpdmVyeSIsImFjdHVhbERlbGl2ZXJ5IiwicmV2ZXJzZVJlcXVlc3RzIiwicmV2ZXJzZVJlcXVlc3QiLCJzZXJ2aWNlQ2VudGVyIiwiYnJhbmRTZXJ2aWNlQ2VudGVycyIsInNvbWUiLCJyZXF1ZXN0IiwibWFwUmV2ZXJzZVN0YXR1c1RvRmxvd1N0YXR1cyIsInB1c2giLCJzZXZlcml0eSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJhY3Rpb25SZXF1aXJlZCIsInR1cm5vdmVyQW5hbHlzaXMiLCJhYmNBbmFseXNpcyIsInh5ekFuYWx5c2lzIiwibG9jYXRpb25VdGlsaXphdGlvbiIsInN1cHBsaWVyUGVyZm9ybWFuY2UiLCJmb3J3YXJkRmxvd0VmZmljaWVuY3kiLCJyZXZlcnNlRmxvd0VmZmljaWVuY3kiLCJhdmVyYWdlVHJhbnNpdFRpbWUiLCJvblRpbWVEZWxpdmVyeVJhdGUiLCJkZW1hbmRGb3JlY2FzdCIsInJlb3JkZXJSZWNvbW1lbmRhdGlvbnMiLCJzZWFzb25hbFBhdHRlcm5zIiwiZmxvd1ByZWRpY3Rpb25zIiwiZXhwZWN0ZWRGb3J3YXJkVm9sdW1lIiwiZXhwZWN0ZWRSZXZlcnNlVm9sdW1lIiwicGVha1BlcmlvZHMiLCJib3R0bGVuZWNrcyIsImRlbWFuZFByZWRpY3Rpb24iLCJwcmVkaWN0ZWREZW1hbmQiLCJjb25maWRlbmNlIiwidGltZWZyYW1lIiwiZmFjdG9ycyIsInN0b2NrT3B0aW1pemF0aW9uIiwiY3VycmVudFN0b2NrIiwib3B0aW1hbFN0b2NrIiwicG90ZW50aWFsU2F2aW5ncyIsInJlY29tbWVuZGF0aW9uIiwiZmxvd09wdGltaXphdGlvbiIsInJvdXRlIiwiY3VycmVudEVmZmljaWVuY3kiLCJvcHRpbWl6ZWRFZmZpY2llbmN5IiwicmVjb21tZW5kYXRpb25zIiwiYW5vbWFseURldGVjdGlvbiIsImFmZmVjdGVkUGFydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/brand/inventory/unified-system.ts\n')}};var __webpack_require__=require("../../../../webpack-api-runtime.js");__webpack_require__.C(exports);var __webpack_exec__=n=>__webpack_require__(__webpack_require__.s=n),__webpack_exports__=__webpack_require__.X(0,["vendor-chunks/next"],()=>__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fbrand%2Finventory%2Funified-system&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cbrand%5Cinventory%5Cunified-system.ts&middlewareConfigBase64=e30%3D!"));module.exports=__webpack_exports__})();