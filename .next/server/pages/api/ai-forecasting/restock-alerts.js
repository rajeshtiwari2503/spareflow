"use strict";(()=>{var exports={};exports.id="pages/api/ai-forecasting/restock-alerts",exports.ids=["pages/api/ai-forecasting/restock-alerts"],exports.modules={"@prisma/client/edge":c=>{c.exports=require("@prisma/client/edge")},bcryptjs:c=>{c.exports=require("bcryptjs")},jsonwebtoken:c=>{c.exports=require("jsonwebtoken")},"next/dist/compiled/next-server/pages-api.runtime.dev.js":c=>{c.exports=require("next/dist/compiled/next-server/pages-api.runtime.dev.js")},"@prisma/extension-accelerate":c=>{c.exports=import("@prisma/extension-accelerate")},"(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fai-forecasting%2Frestock-alerts&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cai-forecasting%5Crestock-alerts.ts&middlewareConfigBase64=e30%3D!":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ "(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ "(api)/./node_modules/next/dist/server/future/route-kind.js");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ "(api)/./node_modules/next/dist/build/templates/helpers.js");\n/* harmony import */ var _src_pages_api_ai_forecasting_restock_alerts_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\ai-forecasting\\restock-alerts.ts */ "(api)/./src/pages/api/ai-forecasting/restock-alerts.ts");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_ai_forecasting_restock_alerts_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_ai_forecasting_restock_alerts_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_ai_forecasting_restock_alerts_ts__WEBPACK_IMPORTED_MODULE_3__, "default"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_ai_forecasting_restock_alerts_ts__WEBPACK_IMPORTED_MODULE_3__, "config");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: "/api/ai-forecasting/restock-alerts",\n        pathname: "/api/ai-forecasting/restock-alerts",\n        // The following aren\'t used in production.\n        bundlePath: "",\n        filename: ""\n    },\n    userland: _src_pages_api_ai_forecasting_restock_alerts_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFpLWZvcmVjYXN0aW5nJTJGcmVzdG9jay1hbGVydHMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q2FpLWZvcmVjYXN0aW5nJTVDcmVzdG9jay1hbGVydHMudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDaUY7QUFDakY7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDRFQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw0RUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXBhZ2VzLWNoYWtyYS8/NDVhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjXFxcXHBhZ2VzXFxcXGFwaVxcXFxhaS1mb3JlY2FzdGluZ1xcXFxyZXN0b2NrLWFsZXJ0cy50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FpLWZvcmVjYXN0aW5nL3Jlc3RvY2stYWxlcnRzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWktZm9yZWNhc3RpbmcvcmVzdG9jay1hbGVydHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fai-forecasting%2Frestock-alerts&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cai-forecasting%5Crestock-alerts.ts&middlewareConfigBase64=e30%3D!\n')},"(api)/./src/lib/auth.ts":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getUserFromRequest: () => (/* binding */ getUserFromRequest),\n/* harmony export */   getUserFromToken: () => (/* binding */ getUserFromToken),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   verifyAuth: () => (/* binding */ verifyAuth),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken),\n/* harmony export */   verifyTokenString: () => (/* binding */ verifyTokenString),\n/* harmony export */   withAuth: () => (/* binding */ withAuth),\n/* harmony export */   withAuthAndRole: () => (/* binding */ withAuthAndRole)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ "(api)/./src/lib/prisma.ts");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ "jsonwebtoken");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ "bcryptjs");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_prisma__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || "your-secret-key-change-in-production";\n// Hash password\nasync function hashPassword(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().hash(password, 12);\n}\n// Verify password\nasync function verifyPassword(password, hashedPassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().compare(password, hashedPassword);\n}\n// Generate JWT token\nfunction generateToken(user) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n        user\n    }, JWT_SECRET, {\n        expiresIn: "7d"\n    });\n}\n// Verify JWT token (string version)\nfunction verifyTokenString(token) {\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        // Handle both old and new token formats\n        if (decoded.user) {\n            return decoded;\n        } else if (decoded.userId) {\n            // Convert old format to new format\n            return {\n                user: {\n                    id: decoded.userId,\n                    email: decoded.email || "",\n                    name: decoded.name || "",\n                    role: decoded.role || "CUSTOMER"\n                },\n                iat: decoded.iat,\n                exp: decoded.exp\n            };\n        }\n        return null;\n    } catch (error) {\n        console.error("Token verification error:", error);\n        return null;\n    }\n}\n// Get user from token\nasync function getUserFromToken(token) {\n    const decoded = verifyTokenString(token);\n    if (!decoded) return null;\n    try {\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id: decoded.user.id\n            },\n            select: {\n                id: true,\n                email: true,\n                name: true,\n                role: true\n            }\n        });\n        return user;\n    } catch (error) {\n        console.error("Error fetching user from token:", error);\n        return null;\n    }\n}\n// Enhanced verifyToken function for API requests\nasync function verifyToken(req) {\n    try {\n        // Try to get token from Authorization header first, then from cookies\n        let token = req.headers.authorization?.replace("Bearer ", "");\n        if (!token && req.cookies.token) {\n            token = req.cookies.token;\n        }\n        if (!token) {\n            return null;\n        }\n        // Verify and decode token\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        let userId;\n        // Handle both token formats\n        if (decoded.user?.id) {\n            userId = decoded.user.id;\n        } else if (decoded.userId) {\n            userId = decoded.userId;\n        } else {\n            return null;\n        }\n        // Fetch fresh user data from database\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            select: {\n                id: true,\n                email: true,\n                name: true,\n                role: true\n            }\n        });\n        return user;\n    } catch (error) {\n        console.error("Token verification error:", error);\n        return null;\n    }\n}\n// Middleware to protect API routes\nfunction withAuth(handler) {\n    return async (req, res)=>{\n        try {\n            // Try to get token from Authorization header first, then from cookies\n            let token = req.headers.authorization?.replace("Bearer ", "");\n            if (!token && req.cookies.token) {\n                token = req.cookies.token;\n            }\n            console.log("Auth middleware - Token present:", !!token);\n            console.log("Auth middleware - Headers:", req.headers.authorization ? "Authorization header present" : "No authorization header");\n            console.log("Auth middleware - Cookies:", req.cookies.token ? "Token cookie present" : "No token cookie");\n            if (!token) {\n                console.log("Auth middleware - No token provided");\n                return res.status(401).json({\n                    error: "No token provided"\n                });\n            }\n            const user = await getUserFromToken(token);\n            if (!user) {\n                console.log("Auth middleware - Invalid token");\n                return res.status(401).json({\n                    error: "Invalid token"\n                });\n            }\n            console.log("Auth middleware - User authenticated:", user.email, user.role);\n            return handler(req, res, user);\n        } catch (error) {\n            console.error("Auth middleware error:", error);\n            return res.status(500).json({\n                error: "Authentication error"\n            });\n        }\n    };\n}\n// Middleware to protect API routes with role check\nfunction withAuthAndRole(roles, handler) {\n    return withAuth(async (req, res, user)=>{\n        if (!roles.includes(user.role)) {\n            return res.status(403).json({\n                error: "Insufficient permissions"\n            });\n        }\n        return handler(req, res, user);\n    });\n}\n// Get user from request (for pages)\nasync function getUserFromRequest(req) {\n    const token = req.headers.authorization?.replace("Bearer ", "") || req.cookies.token;\n    if (!token) return null;\n    return getUserFromToken(token);\n}\n// Verify auth for API routes with proper result format\nasync function verifyAuth(req) {\n    try {\n        const user = await verifyToken(req);\n        if (user) {\n            return {\n                success: true,\n                user\n            };\n        } else {\n            return {\n                success: false,\n                error: "Authentication failed"\n            };\n        }\n    } catch (error) {\n        console.error("Auth verification error:", error);\n        return {\n            success: false,\n            error: "Authentication error"\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dC1wYWdlcy1jaGFrcmEvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XHJcbmltcG9ydCB7IFVzZXJSb2xlIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xyXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xyXG5cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3lvdXItc2VjcmV0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhVc2VyIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHJvbGU6IFVzZXJSb2xlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhUb2tlbiB7XHJcbiAgdXNlcjogQXV0aFVzZXI7XHJcbiAgaWF0OiBudW1iZXI7XHJcbiAgZXhwOiBudW1iZXI7XHJcbn1cclxuXHJcbi8vIEhhc2ggcGFzc3dvcmRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc2hQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEyKTtcclxufVxyXG5cclxuLy8gVmVyaWZ5IHBhc3N3b3JkXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZDogc3RyaW5nLCBoYXNoZWRQYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XHJcbn1cclxuXHJcbi8vIEdlbmVyYXRlIEpXVCB0b2tlblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbih1c2VyOiBBdXRoVXNlcik6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGp3dC5zaWduKFxyXG4gICAgeyB1c2VyIH0sXHJcbiAgICBKV1RfU0VDUkVULFxyXG4gICAgeyBleHBpcmVzSW46ICc3ZCcgfVxyXG4gICk7XHJcbn1cclxuXHJcbi8vIFZlcmlmeSBKV1QgdG9rZW4gKHN0cmluZyB2ZXJzaW9uKVxyXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW5TdHJpbmcodG9rZW46IHN0cmluZyk6IEF1dGhUb2tlbiB8IG51bGwge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgYW55O1xyXG4gICAgXHJcbiAgICAvLyBIYW5kbGUgYm90aCBvbGQgYW5kIG5ldyB0b2tlbiBmb3JtYXRzXHJcbiAgICBpZiAoZGVjb2RlZC51c2VyKSB7XHJcbiAgICAgIHJldHVybiBkZWNvZGVkIGFzIEF1dGhUb2tlbjtcclxuICAgIH0gZWxzZSBpZiAoZGVjb2RlZC51c2VySWQpIHtcclxuICAgICAgLy8gQ29udmVydCBvbGQgZm9ybWF0IHRvIG5ldyBmb3JtYXRcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICBpZDogZGVjb2RlZC51c2VySWQsXHJcbiAgICAgICAgICBlbWFpbDogZGVjb2RlZC5lbWFpbCB8fCAnJyxcclxuICAgICAgICAgIG5hbWU6IGRlY29kZWQubmFtZSB8fCAnJyxcclxuICAgICAgICAgIHJvbGU6IGRlY29kZWQucm9sZSB8fCAnQ1VTVE9NRVInXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpYXQ6IGRlY29kZWQuaWF0LFxyXG4gICAgICAgIGV4cDogZGVjb2RlZC5leHBcclxuICAgICAgfSBhcyBBdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdUb2tlbiB2ZXJpZmljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBHZXQgdXNlciBmcm9tIHRva2VuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRnJvbVRva2VuKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEF1dGhVc2VyIHwgbnVsbD4ge1xyXG4gIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlblN0cmluZyh0b2tlbik7XHJcbiAgaWYgKCFkZWNvZGVkKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IGRlY29kZWQudXNlci5pZCB9LFxyXG4gICAgICBzZWxlY3Q6IHtcclxuICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgIHJvbGU6IHRydWUsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBmcm9tIHRva2VuOicsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLy8gRW5oYW5jZWQgdmVyaWZ5VG9rZW4gZnVuY3Rpb24gZm9yIEFQSSByZXF1ZXN0c1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5VG9rZW4ocmVxOiBOZXh0QXBpUmVxdWVzdCk6IFByb21pc2U8QXV0aFVzZXIgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFRyeSB0byBnZXQgdG9rZW4gZnJvbSBBdXRob3JpemF0aW9uIGhlYWRlciBmaXJzdCwgdGhlbiBmcm9tIGNvb2tpZXNcclxuICAgIGxldCB0b2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnJlcGxhY2UoJ0JlYXJlciAnLCAnJyk7XHJcbiAgICBcclxuICAgIGlmICghdG9rZW4gJiYgcmVxLmNvb2tpZXMudG9rZW4pIHtcclxuICAgICAgdG9rZW4gPSByZXEuY29va2llcy50b2tlbjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgYW5kIGRlY29kZSB0b2tlblxyXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpIGFzIGFueTtcclxuICAgIGxldCB1c2VySWQ6IHN0cmluZztcclxuICAgIFxyXG4gICAgLy8gSGFuZGxlIGJvdGggdG9rZW4gZm9ybWF0c1xyXG4gICAgaWYgKGRlY29kZWQudXNlcj8uaWQpIHtcclxuICAgICAgdXNlcklkID0gZGVjb2RlZC51c2VyLmlkO1xyXG4gICAgfSBlbHNlIGlmIChkZWNvZGVkLnVzZXJJZCkge1xyXG4gICAgICB1c2VySWQgPSBkZWNvZGVkLnVzZXJJZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIGZyZXNoIHVzZXIgZGF0YSBmcm9tIGRhdGFiYXNlXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcclxuICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICByb2xlOiB0cnVlLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHZlcmlmaWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8vIE1pZGRsZXdhcmUgdG8gcHJvdGVjdCBBUEkgcm91dGVzXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoQXV0aChoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHVzZXI6IEF1dGhVc2VyKSA9PiBQcm9taXNlPHZvaWQ+KSB7XHJcbiAgcmV0dXJuIGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVHJ5IHRvIGdldCB0b2tlbiBmcm9tIEF1dGhvcml6YXRpb24gaGVhZGVyIGZpcnN0LCB0aGVuIGZyb20gY29va2llc1xyXG4gICAgICBsZXQgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5yZXBsYWNlKCdCZWFyZXIgJywgJycpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCF0b2tlbiAmJiByZXEuY29va2llcy50b2tlbikge1xyXG4gICAgICAgIHRva2VuID0gcmVxLmNvb2tpZXMudG9rZW47XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRoIG1pZGRsZXdhcmUgLSBUb2tlbiBwcmVzZW50OicsICEhdG9rZW4pO1xyXG4gICAgICBjb25zb2xlLmxvZygnQXV0aCBtaWRkbGV3YXJlIC0gSGVhZGVyczonLCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uID8gJ0F1dGhvcml6YXRpb24gaGVhZGVyIHByZXNlbnQnIDogJ05vIGF1dGhvcml6YXRpb24gaGVhZGVyJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRoIG1pZGRsZXdhcmUgLSBDb29raWVzOicsIHJlcS5jb29raWVzLnRva2VuID8gJ1Rva2VuIGNvb2tpZSBwcmVzZW50JyA6ICdObyB0b2tlbiBjb29raWUnKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQXV0aCBtaWRkbGV3YXJlIC0gTm8gdG9rZW4gcHJvdmlkZWQnKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ05vIHRva2VuIHByb3ZpZGVkJyB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJGcm9tVG9rZW4odG9rZW4pO1xyXG4gICAgICBcclxuICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0F1dGggbWlkZGxld2FyZSAtIEludmFsaWQgdG9rZW4nKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgdG9rZW4nIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnQXV0aCBtaWRkbGV3YXJlIC0gVXNlciBhdXRoZW50aWNhdGVkOicsIHVzZXIuZW1haWwsIHVzZXIucm9sZSk7XHJcbiAgICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzLCB1c2VyKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGggbWlkZGxld2FyZSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnQXV0aGVudGljYXRpb24gZXJyb3InIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcbi8vIE1pZGRsZXdhcmUgdG8gcHJvdGVjdCBBUEkgcm91dGVzIHdpdGggcm9sZSBjaGVja1xyXG5leHBvcnQgZnVuY3Rpb24gd2l0aEF1dGhBbmRSb2xlKHJvbGVzOiBVc2VyUm9sZVtdLCBoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHVzZXI6IEF1dGhVc2VyKSA9PiBQcm9taXNlPHZvaWQ+KSB7XHJcbiAgcmV0dXJuIHdpdGhBdXRoKGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSwgdXNlcjogQXV0aFVzZXIpID0+IHtcclxuICAgIGlmICghcm9sZXMuaW5jbHVkZXModXNlci5yb2xlKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0luc3VmZmljaWVudCBwZXJtaXNzaW9ucycgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzLCB1c2VyKTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gR2V0IHVzZXIgZnJvbSByZXF1ZXN0IChmb3IgcGFnZXMpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRnJvbVJlcXVlc3QocmVxOiBOZXh0QXBpUmVxdWVzdCk6IFByb21pc2U8QXV0aFVzZXIgfCBudWxsPiB7XHJcbiAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5yZXBsYWNlKCdCZWFyZXIgJywgJycpIHx8IFxyXG4gICAgICAgICAgICAgICAgcmVxLmNvb2tpZXMudG9rZW47XHJcbiAgXHJcbiAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgXHJcbiAgcmV0dXJuIGdldFVzZXJGcm9tVG9rZW4odG9rZW4pO1xyXG59XHJcblxyXG4vLyBWZXJpZnkgYXV0aCBmb3IgQVBJIHJvdXRlcyB3aXRoIHByb3BlciByZXN1bHQgZm9ybWF0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlBdXRoKHJlcTogTmV4dEFwaVJlcXVlc3QpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgdXNlcj86IEF1dGhVc2VyOyBlcnJvcj86IHN0cmluZyB9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlUb2tlbihyZXEpO1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdXNlciB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQXV0aGVudGljYXRpb24gZmFpbGVkJyB9O1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdBdXRoIHZlcmlmaWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiBlcnJvcicgfTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsicHJpc21hIiwiand0IiwiYmNyeXB0IiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiY29tcGFyZSIsImdlbmVyYXRlVG9rZW4iLCJ1c2VyIiwic2lnbiIsImV4cGlyZXNJbiIsInZlcmlmeVRva2VuU3RyaW5nIiwidG9rZW4iLCJkZWNvZGVkIiwidmVyaWZ5IiwidXNlcklkIiwiaWQiLCJlbWFpbCIsIm5hbWUiLCJyb2xlIiwiaWF0IiwiZXhwIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0VXNlckZyb21Ub2tlbiIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInNlbGVjdCIsInZlcmlmeVRva2VuIiwicmVxIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJyZXBsYWNlIiwiY29va2llcyIsIndpdGhBdXRoIiwiaGFuZGxlciIsInJlcyIsImxvZyIsInN0YXR1cyIsImpzb24iLCJ3aXRoQXV0aEFuZFJvbGUiLCJyb2xlcyIsImluY2x1ZGVzIiwiZ2V0VXNlckZyb21SZXF1ZXN0IiwidmVyaWZ5QXV0aCIsInN1Y2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/auth.ts\n')},"(api)/./src/lib/prisma.ts":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client/edge */ "@prisma/client/edge");\n/* harmony import */ var _prisma_client_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client_edge__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/extension-accelerate */ "@prisma/extension-accelerate");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__]);\n_prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client_edge__WEBPACK_IMPORTED_MODULE_0__.PrismaClient().$extends((0,_prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__.withAccelerate)());\nif (true) globalForPrisma.prisma = prisma;\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtEO0FBQ1c7QUFFN0QsTUFBTUUsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSiw2REFBWUEsR0FBR0ssUUFBUSxDQUFDSiw0RUFBY0EsSUFBRztBQUU3RixJQUFJSyxJQUF5QixFQUFjSixnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXBhZ2VzLWNoYWtyYS8uL3NyYy9saWIvcHJpc21hLnRzPzAxZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQvZWRnZSdcclxuaW1wb3J0IHsgd2l0aEFjY2VsZXJhdGUgfSBmcm9tICdAcHJpc21hL2V4dGVuc2lvbi1hY2NlbGVyYXRlJ1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcclxuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KCkuJGV4dGVuZHMod2l0aEFjY2VsZXJhdGUoKSlcclxuXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsIndpdGhBY2NlbGVyYXRlIiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsIiRleHRlbmRzIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/prisma.ts\n')},"(api)/./src/pages/api/ai-forecasting/restock-alerts.ts":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ "(api)/./src/lib/prisma.ts");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ "(api)/./src/lib/auth.ts");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_prisma__WEBPACK_IMPORTED_MODULE_0__, _lib_auth__WEBPACK_IMPORTED_MODULE_1__]);\n([_lib_prisma__WEBPACK_IMPORTED_MODULE_0__, _lib_auth__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nasync function handler(req, res) {\n    try {\n        // Authentication check\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.verifyToken)(req);\n        if (!user) {\n            return res.status(401).json({\n                error: "Authentication required"\n            });\n        }\n        if (req.method === "GET") {\n            const { brandId, status = "PENDING", limit = "20" } = req.query;\n            // Build where clause based on user role\n            const where = {\n                status: status\n            };\n            if (user.role === "BRAND") {\n                where.brandId = user.id;\n            } else if (brandId && (user.role === "SUPER_ADMIN" || user.role === "DISTRIBUTOR")) {\n                where.brandId = brandId;\n            } else if (user.role === "SUPER_ADMIN") {\n            // Super admin can see all alerts\n            } else {\n                return res.status(403).json({\n                    error: "Access denied"\n                });\n            }\n            const limitNum = Math.min(parseInt(limit) || 20, 100);\n            // Fetch forecasting alerts\n            const alerts = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.forecastingAlert.findMany({\n                where,\n                include: {\n                    part: {\n                        select: {\n                            id: true,\n                            code: true,\n                            name: true,\n                            price: true,\n                            stockQuantity: true,\n                            minStockLevel: true\n                        }\n                    },\n                    brand: {\n                        select: {\n                            id: true,\n                            name: true,\n                            email: true\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: "desc"\n                },\n                take: limitNum\n            });\n            // Calculate summary statistics\n            const totalAlerts = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.forecastingAlert.count({\n                where\n            });\n            const criticalAlerts = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.forecastingAlert.count({\n                where: {\n                    ...where,\n                    recommendedQuantity: {\n                        gte: 100\n                    }\n                }\n            });\n            res.status(200).json({\n                success: true,\n                data: {\n                    alerts,\n                    summary: {\n                        total: totalAlerts,\n                        critical: criticalAlerts,\n                        pending: alerts.filter((a)=>a.status === "PENDING").length,\n                        approved: alerts.filter((a)=>a.status === "APPROVED").length\n                    }\n                }\n            });\n        } else if (req.method === "POST") {\n            // Create new restock alert\n            if (user.role !== "BRAND" && user.role !== "SUPER_ADMIN") {\n                return res.status(403).json({\n                    error: "Access denied"\n                });\n            }\n            const { partId, district, forecastedDemand, availableStock, recommendedQuantity } = req.body;\n            if (!partId || !district || !forecastedDemand || !recommendedQuantity) {\n                return res.status(400).json({\n                    error: "Missing required fields",\n                    required: [\n                        "partId",\n                        "district",\n                        "forecastedDemand",\n                        "recommendedQuantity"\n                    ]\n                });\n            }\n            // Verify part exists and belongs to brand (if user is brand)\n            const part = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.part.findUnique({\n                where: {\n                    id: partId\n                },\n                select: {\n                    id: true,\n                    brandId: true,\n                    name: true,\n                    stockQuantity: true\n                }\n            });\n            if (!part) {\n                return res.status(404).json({\n                    error: "Part not found"\n                });\n            }\n            if (user.role === "BRAND" && part.brandId !== user.id) {\n                return res.status(403).json({\n                    error: "Access denied - part does not belong to your brand"\n                });\n            }\n            const alert = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.forecastingAlert.create({\n                data: {\n                    partId,\n                    brandId: part.brandId,\n                    district,\n                    forecastedDemand: parseInt(forecastedDemand),\n                    availableStock: availableStock || part.stockQuantity,\n                    recommendedQuantity: parseInt(recommendedQuantity),\n                    status: "PENDING"\n                },\n                include: {\n                    part: {\n                        select: {\n                            id: true,\n                            code: true,\n                            name: true,\n                            price: true\n                        }\n                    },\n                    brand: {\n                        select: {\n                            id: true,\n                            name: true,\n                            email: true\n                        }\n                    }\n                }\n            });\n            res.status(201).json({\n                success: true,\n                data: alert,\n                message: "Restock alert created successfully"\n            });\n        } else if (req.method === "PUT") {\n            // Update alert status\n            if (user.role !== "BRAND" && user.role !== "SUPER_ADMIN") {\n                return res.status(403).json({\n                    error: "Access denied"\n                });\n            }\n            const { id, status, notes } = req.body;\n            if (!id || !status) {\n                return res.status(400).json({\n                    error: "Missing required fields",\n                    required: [\n                        "id",\n                        "status"\n                    ]\n                });\n            }\n            if (![\n                "PENDING",\n                "APPROVED",\n                "REJECTED"\n            ].includes(status)) {\n                return res.status(400).json({\n                    error: "Invalid status",\n                    validStatuses: [\n                        "PENDING",\n                        "APPROVED",\n                        "REJECTED"\n                    ]\n                });\n            }\n            // Check if alert exists and user has permission\n            const existingAlert = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.forecastingAlert.findUnique({\n                where: {\n                    id\n                },\n                select: {\n                    id: true,\n                    brandId: true\n                }\n            });\n            if (!existingAlert) {\n                return res.status(404).json({\n                    error: "Alert not found"\n                });\n            }\n            if (user.role === "BRAND" && existingAlert.brandId !== user.id) {\n                return res.status(403).json({\n                    error: "Access denied"\n                });\n            }\n            const updatedAlert = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.forecastingAlert.update({\n                where: {\n                    id\n                },\n                data: {\n                    status,\n                    updatedAt: new Date()\n                },\n                include: {\n                    part: {\n                        select: {\n                            id: true,\n                            code: true,\n                            name: true,\n                            price: true\n                        }\n                    },\n                    brand: {\n                        select: {\n                            id: true,\n                            name: true,\n                            email: true\n                        }\n                    }\n                }\n            });\n            res.status(200).json({\n                success: true,\n                data: updatedAlert,\n                message: `Alert ${status.toLowerCase()} successfully`\n            });\n        } else {\n            res.setHeader("Allow", [\n                "GET",\n                "POST",\n                "PUT"\n            ]);\n            res.status(405).end(`Method ${req.method} Not Allowed`);\n        }\n    } catch (error) {\n        console.error("Error in restock alerts API:", error);\n        res.status(500).json({\n            error: "Internal server error",\n            details:  true ? error.message : 0\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2FpLWZvcmVjYXN0aW5nL3Jlc3RvY2stYWxlcnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUNzQztBQUNHO0FBRTFCLGVBQWVFLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUk7UUFDRix1QkFBdUI7UUFDdkIsTUFBTUMsT0FBTyxNQUFNSixzREFBV0EsQ0FBQ0U7UUFDL0IsSUFBSSxDQUFDRSxNQUFNO1lBQ1QsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUEwQjtRQUNqRTtRQUVBLElBQUlMLElBQUlNLE1BQU0sS0FBSyxPQUFPO1lBQ3hCLE1BQU0sRUFBRUMsT0FBTyxFQUFFSixTQUFTLFNBQVMsRUFBRUssUUFBUSxJQUFJLEVBQUUsR0FBR1IsSUFBSVMsS0FBSztZQUUvRCx3Q0FBd0M7WUFDeEMsTUFBTUMsUUFBYTtnQkFBRVAsUUFBUUE7WUFBaUI7WUFFOUMsSUFBSUQsS0FBS1MsSUFBSSxLQUFLLFNBQVM7Z0JBQ3pCRCxNQUFNSCxPQUFPLEdBQUdMLEtBQUtVLEVBQUU7WUFDekIsT0FBTyxJQUFJTCxXQUFZTCxDQUFBQSxLQUFLUyxJQUFJLEtBQUssaUJBQWlCVCxLQUFLUyxJQUFJLEtBQUssYUFBWSxHQUFJO2dCQUNsRkQsTUFBTUgsT0FBTyxHQUFHQTtZQUNsQixPQUFPLElBQUlMLEtBQUtTLElBQUksS0FBSyxlQUFlO1lBQ3RDLGlDQUFpQztZQUNuQyxPQUFPO2dCQUNMLE9BQU9WLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQWdCO1lBQ3ZEO1lBRUEsTUFBTVEsV0FBV0MsS0FBS0MsR0FBRyxDQUFDQyxTQUFTUixVQUFvQixJQUFJO1lBRTNELDJCQUEyQjtZQUMzQixNQUFNUyxTQUFTLE1BQU1wQiwrQ0FBTUEsQ0FBQ3FCLGdCQUFnQixDQUFDQyxRQUFRLENBQUM7Z0JBQ3BEVDtnQkFDQVUsU0FBUztv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UUFDeEQ7SUFFRixFQUFFLE9BQU9ELE9BQU87UUFDZGdFLFFBQVFoRSxLQUFLLENBQUMsZ0NBQWdDQTtRQUM5Q0osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQkMsT0FBTztZQUNQaUUsU0FBU0MsS0FBeUIsR0FBZ0JsRSxNQUFNb0QsT0FBTyxHQUFHZSxDQUFTQTtRQUM3RTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXBhZ2VzLWNoYWtyYS8uL3NyYy9wYWdlcy9hcGkvYWktZm9yZWNhc3RpbmcvcmVzdG9jay1hbGVydHMudHM/YTcxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnQC9saWIvYXV0aCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEF1dGhlbnRpY2F0aW9uIGNoZWNrXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdmVyaWZ5VG9rZW4ocmVxKTtcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgICAgY29uc3QgeyBicmFuZElkLCBzdGF0dXMgPSAnUEVORElORycsIGxpbWl0ID0gJzIwJyB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgICAgLy8gQnVpbGQgd2hlcmUgY2xhdXNlIGJhc2VkIG9uIHVzZXIgcm9sZVxyXG4gICAgICBjb25zdCB3aGVyZTogYW55ID0geyBzdGF0dXM6IHN0YXR1cyBhcyBzdHJpbmcgfTtcclxuICAgICAgXHJcbiAgICAgIGlmICh1c2VyLnJvbGUgPT09ICdCUkFORCcpIHtcclxuICAgICAgICB3aGVyZS5icmFuZElkID0gdXNlci5pZDtcclxuICAgICAgfSBlbHNlIGlmIChicmFuZElkICYmICh1c2VyLnJvbGUgPT09ICdTVVBFUl9BRE1JTicgfHwgdXNlci5yb2xlID09PSAnRElTVFJJQlVUT1InKSkge1xyXG4gICAgICAgIHdoZXJlLmJyYW5kSWQgPSBicmFuZElkIGFzIHN0cmluZztcclxuICAgICAgfSBlbHNlIGlmICh1c2VyLnJvbGUgPT09ICdTVVBFUl9BRE1JTicpIHtcclxuICAgICAgICAvLyBTdXBlciBhZG1pbiBjYW4gc2VlIGFsbCBhbGVydHNcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBkZW5pZWQnIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBsaW1pdE51bSA9IE1hdGgubWluKHBhcnNlSW50KGxpbWl0IGFzIHN0cmluZykgfHwgMjAsIDEwMCk7XHJcblxyXG4gICAgICAvLyBGZXRjaCBmb3JlY2FzdGluZyBhbGVydHNcclxuICAgICAgY29uc3QgYWxlcnRzID0gYXdhaXQgcHJpc21hLmZvcmVjYXN0aW5nQWxlcnQuZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlLFxyXG4gICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgIHBhcnQ6IHtcclxuICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgY29kZTogdHJ1ZSxcclxuICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHByaWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHN0b2NrUXVhbnRpdHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgbWluU3RvY2tMZXZlbDogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgYnJhbmQ6IHtcclxuICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICBlbWFpbDogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXHJcbiAgICAgICAgdGFrZTogbGltaXROdW1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBDYWxjdWxhdGUgc3VtbWFyeSBzdGF0aXN0aWNzXHJcbiAgICAgIGNvbnN0IHRvdGFsQWxlcnRzID0gYXdhaXQgcHJpc21hLmZvcmVjYXN0aW5nQWxlcnQuY291bnQoeyB3aGVyZSB9KTtcclxuICAgICAgY29uc3QgY3JpdGljYWxBbGVydHMgPSBhd2FpdCBwcmlzbWEuZm9yZWNhc3RpbmdBbGVydC5jb3VudCh7XHJcbiAgICAgICAgd2hlcmU6IHsgLi4ud2hlcmUsIHJlY29tbWVuZGVkUXVhbnRpdHk6IHsgZ3RlOiAxMDAgfSB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgYWxlcnRzLFxyXG4gICAgICAgICAgc3VtbWFyeToge1xyXG4gICAgICAgICAgICB0b3RhbDogdG90YWxBbGVydHMsXHJcbiAgICAgICAgICAgIGNyaXRpY2FsOiBjcml0aWNhbEFsZXJ0cyxcclxuICAgICAgICAgICAgcGVuZGluZzogYWxlcnRzLmZpbHRlcihhID0+IGEuc3RhdHVzID09PSAnUEVORElORycpLmxlbmd0aCxcclxuICAgICAgICAgICAgYXBwcm92ZWQ6IGFsZXJ0cy5maWx0ZXIoYSA9PiBhLnN0YXR1cyA9PT0gJ0FQUFJPVkVEJykubGVuZ3RoXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xyXG4gICAgICAvLyBDcmVhdGUgbmV3IHJlc3RvY2sgYWxlcnRcclxuICAgICAgaWYgKHVzZXIucm9sZSAhPT0gJ0JSQU5EJyAmJiB1c2VyLnJvbGUgIT09ICdTVVBFUl9BRE1JTicpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0FjY2VzcyBkZW5pZWQnIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7IHBhcnRJZCwgZGlzdHJpY3QsIGZvcmVjYXN0ZWREZW1hbmQsIGF2YWlsYWJsZVN0b2NrLCByZWNvbW1lbmRlZFF1YW50aXR5IH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAgIGlmICghcGFydElkIHx8ICFkaXN0cmljdCB8fCAhZm9yZWNhc3RlZERlbWFuZCB8fCAhcmVjb21tZW5kZWRRdWFudGl0eSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxyXG4gICAgICAgICAgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycsXHJcbiAgICAgICAgICByZXF1aXJlZDogWydwYXJ0SWQnLCAnZGlzdHJpY3QnLCAnZm9yZWNhc3RlZERlbWFuZCcsICdyZWNvbW1lbmRlZFF1YW50aXR5J11cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVmVyaWZ5IHBhcnQgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIGJyYW5kIChpZiB1c2VyIGlzIGJyYW5kKVxyXG4gICAgICBjb25zdCBwYXJ0ID0gYXdhaXQgcHJpc21hLnBhcnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHBhcnRJZCB9LFxyXG4gICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgYnJhbmRJZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgc3RvY2tRdWFudGl0eTogdHJ1ZSB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCFwYXJ0KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdQYXJ0IG5vdCBmb3VuZCcgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh1c2VyLnJvbGUgPT09ICdCUkFORCcgJiYgcGFydC5icmFuZElkICE9PSB1c2VyLmlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgZGVuaWVkIC0gcGFydCBkb2VzIG5vdCBiZWxvbmcgdG8geW91ciBicmFuZCcgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGFsZXJ0ID0gYXdhaXQgcHJpc21hLmZvcmVjYXN0aW5nQWxlcnQuY3JlYXRlKHtcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBwYXJ0SWQsXHJcbiAgICAgICAgICBicmFuZElkOiBwYXJ0LmJyYW5kSWQsXHJcbiAgICAgICAgICBkaXN0cmljdCxcclxuICAgICAgICAgIGZvcmVjYXN0ZWREZW1hbmQ6IHBhcnNlSW50KGZvcmVjYXN0ZWREZW1hbmQpLFxyXG4gICAgICAgICAgYXZhaWxhYmxlU3RvY2s6IGF2YWlsYWJsZVN0b2NrIHx8IHBhcnQuc3RvY2tRdWFudGl0eSxcclxuICAgICAgICAgIHJlY29tbWVuZGVkUXVhbnRpdHk6IHBhcnNlSW50KHJlY29tbWVuZGVkUXVhbnRpdHkpLFxyXG4gICAgICAgICAgc3RhdHVzOiAnUEVORElORydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgIHBhcnQ6IHtcclxuICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgY29kZTogdHJ1ZSxcclxuICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHByaWNlOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBicmFuZDoge1xyXG4gICAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgIGVtYWlsOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGF0YTogYWxlcnQsXHJcbiAgICAgICAgbWVzc2FnZTogJ1Jlc3RvY2sgYWxlcnQgY3JlYXRlZCBzdWNjZXNzZnVsbHknXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gJ1BVVCcpIHtcclxuICAgICAgLy8gVXBkYXRlIGFsZXJ0IHN0YXR1c1xyXG4gICAgICBpZiAodXNlci5yb2xlICE9PSAnQlJBTkQnICYmIHVzZXIucm9sZSAhPT0gJ1NVUEVSX0FETUlOJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIGRlbmllZCcgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHsgaWQsIHN0YXR1cywgbm90ZXMgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgICAgaWYgKCFpZCB8fCAhc3RhdHVzKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXHJcbiAgICAgICAgICBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzJyxcclxuICAgICAgICAgIHJlcXVpcmVkOiBbJ2lkJywgJ3N0YXR1cyddXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghWydQRU5ESU5HJywgJ0FQUFJPVkVEJywgJ1JFSkVDVEVEJ10uaW5jbHVkZXMoc3RhdHVzKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxyXG4gICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHN0YXR1cycsXHJcbiAgICAgICAgICB2YWxpZFN0YXR1c2VzOiBbJ1BFTkRJTkcnLCAnQVBQUk9WRUQnLCAnUkVKRUNURUQnXVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDaGVjayBpZiBhbGVydCBleGlzdHMgYW5kIHVzZXIgaGFzIHBlcm1pc3Npb25cclxuICAgICAgY29uc3QgZXhpc3RpbmdBbGVydCA9IGF3YWl0IHByaXNtYS5mb3JlY2FzdGluZ0FsZXJ0LmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkIH0sXHJcbiAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBicmFuZElkOiB0cnVlIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIWV4aXN0aW5nQWxlcnQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0FsZXJ0IG5vdCBmb3VuZCcgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh1c2VyLnJvbGUgPT09ICdCUkFORCcgJiYgZXhpc3RpbmdBbGVydC5icmFuZElkICE9PSB1c2VyLmlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBY2Nlc3MgZGVuaWVkJyB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdXBkYXRlZEFsZXJ0ID0gYXdhaXQgcHJpc21hLmZvcmVjYXN0aW5nQWxlcnQudXBkYXRlKHtcclxuICAgICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICBzdGF0dXMsXHJcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgIHBhcnQ6IHtcclxuICAgICAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgY29kZTogdHJ1ZSxcclxuICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgIHByaWNlOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBicmFuZDoge1xyXG4gICAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICAgIGVtYWlsOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGF0YTogdXBkYXRlZEFsZXJ0LFxyXG4gICAgICAgIG1lc3NhZ2U6IGBBbGVydCAke3N0YXR1cy50b0xvd2VyQ2FzZSgpfSBzdWNjZXNzZnVsbHlgXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnLCAnUE9TVCcsICdQVVQnXSk7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDA1KS5lbmQoYE1ldGhvZCAke3JlcS5tZXRob2R9IE5vdCBBbGxvd2VkYCk7XHJcbiAgICB9XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiByZXN0b2NrIGFsZXJ0cyBBUEk6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcclxuICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxyXG4gICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiB1bmRlZmluZWRcclxuICAgIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJwcmlzbWEiLCJ2ZXJpZnlUb2tlbiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJ1c2VyIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwibWV0aG9kIiwiYnJhbmRJZCIsImxpbWl0IiwicXVlcnkiLCJ3aGVyZSIsInJvbGUiLCJpZCIsImxpbWl0TnVtIiwiTWF0aCIsIm1pbiIsInBhcnNlSW50IiwiYWxlcnRzIiwiZm9yZWNhc3RpbmdBbGVydCIsImZpbmRNYW55IiwiaW5jbHVkZSIsInBhcnQiLCJzZWxlY3QiLCJjb2RlIiwibmFtZSIsInByaWNlIiwic3RvY2tRdWFudGl0eSIsIm1pblN0b2NrTGV2ZWwiLCJicmFuZCIsImVtYWlsIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsInRha2UiLCJ0b3RhbEFsZXJ0cyIsImNvdW50IiwiY3JpdGljYWxBbGVydHMiLCJyZWNvbW1lbmRlZFF1YW50aXR5IiwiZ3RlIiwic3VjY2VzcyIsImRhdGEiLCJzdW1tYXJ5IiwidG90YWwiLCJjcml0aWNhbCIsInBlbmRpbmciLCJmaWx0ZXIiLCJhIiwibGVuZ3RoIiwiYXBwcm92ZWQiLCJwYXJ0SWQiLCJkaXN0cmljdCIsImZvcmVjYXN0ZWREZW1hbmQiLCJhdmFpbGFibGVTdG9jayIsImJvZHkiLCJyZXF1aXJlZCIsImZpbmRVbmlxdWUiLCJhbGVydCIsImNyZWF0ZSIsIm1lc3NhZ2UiLCJub3RlcyIsImluY2x1ZGVzIiwidmFsaWRTdGF0dXNlcyIsImV4aXN0aW5nQWxlcnQiLCJ1cGRhdGVkQWxlcnQiLCJ1cGRhdGUiLCJ1cGRhdGVkQXQiLCJEYXRlIiwidG9Mb3dlckNhc2UiLCJzZXRIZWFkZXIiLCJlbmQiLCJjb25zb2xlIiwiZGV0YWlscyIsInByb2Nlc3MiLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/ai-forecasting/restock-alerts.ts\n')}};var __webpack_require__=require("../../../webpack-api-runtime.js");__webpack_require__.C(exports);var __webpack_exec__=c=>__webpack_require__(__webpack_require__.s=c),__webpack_exports__=__webpack_require__.X(0,["vendor-chunks/next"],()=>__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fai-forecasting%2Frestock-alerts&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cai-forecasting%5Crestock-alerts.ts&middlewareConfigBase64=e30%3D!"));module.exports=__webpack_exports__})();