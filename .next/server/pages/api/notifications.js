"use strict";(()=>{var exports={};exports.id="pages/api/notifications",exports.ids=["pages/api/notifications"],exports.modules={"@prisma/client/edge":c=>{c.exports=require("@prisma/client/edge")},bcryptjs:c=>{c.exports=require("bcryptjs")},jsonwebtoken:c=>{c.exports=require("jsonwebtoken")},"next/dist/compiled/next-server/pages-api.runtime.dev.js":c=>{c.exports=require("next/dist/compiled/next-server/pages-api.runtime.dev.js")},nodemailer:c=>{c.exports=require("nodemailer")},"@prisma/extension-accelerate":c=>{c.exports=import("@prisma/extension-accelerate")},"(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnotifications&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cnotifications.ts&middlewareConfigBase64=e30%3D!":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ "(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ "(api)/./node_modules/next/dist/server/future/route-kind.js");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ "(api)/./node_modules/next/dist/build/templates/helpers.js");\n/* harmony import */ var _src_pages_api_notifications_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\notifications.ts */ "(api)/./src/pages/api/notifications.ts");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_notifications_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_notifications_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_notifications_ts__WEBPACK_IMPORTED_MODULE_3__, "default"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_notifications_ts__WEBPACK_IMPORTED_MODULE_3__, "config");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: "/api/notifications",\n        pathname: "/api/notifications",\n        // The following aren\'t used in production.\n        bundlePath: "",\n        filename: ""\n    },\n    userland: _src_pages_api_notifications_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm5vdGlmaWNhdGlvbnMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q25vdGlmaWNhdGlvbnMudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDZ0U7QUFDaEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDREQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw0REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXBhZ2VzLWNoYWtyYS8/MzBmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjXFxcXHBhZ2VzXFxcXGFwaVxcXFxub3RpZmljYXRpb25zLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbm90aWZpY2F0aW9uc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL25vdGlmaWNhdGlvbnNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnotifications&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cnotifications.ts&middlewareConfigBase64=e30%3D!\n')},"(api)/./src/lib/auth.ts":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getUserFromRequest: () => (/* binding */ getUserFromRequest),\n/* harmony export */   getUserFromToken: () => (/* binding */ getUserFromToken),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   verifyAuth: () => (/* binding */ verifyAuth),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken),\n/* harmony export */   verifyTokenString: () => (/* binding */ verifyTokenString),\n/* harmony export */   withAuth: () => (/* binding */ withAuth),\n/* harmony export */   withAuthAndRole: () => (/* binding */ withAuthAndRole)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ "(api)/./src/lib/prisma.ts");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ "jsonwebtoken");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ "bcryptjs");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_prisma__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || "your-secret-key-change-in-production";\n// Hash password\nasync function hashPassword(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().hash(password, 12);\n}\n// Verify password\nasync function verifyPassword(password, hashedPassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().compare(password, hashedPassword);\n}\n// Generate JWT token\nfunction generateToken(user) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n        user\n    }, JWT_SECRET, {\n        expiresIn: "7d"\n    });\n}\n// Verify JWT token (string version)\nfunction verifyTokenString(token) {\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        // Handle both old and new token formats\n        if (decoded.user) {\n            return decoded;\n        } else if (decoded.userId) {\n            // Convert old format to new format\n            return {\n                user: {\n                    id: decoded.userId,\n                    email: decoded.email || "",\n                    name: decoded.name || "",\n                    role: decoded.role || "CUSTOMER"\n                },\n                iat: decoded.iat,\n                exp: decoded.exp\n            };\n        }\n        return null;\n    } catch (error) {\n        console.error("Token verification error:", error);\n        return null;\n    }\n}\n// Get user from token\nasync function getUserFromToken(token) {\n    const decoded = verifyTokenString(token);\n    if (!decoded) return null;\n    try {\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id: decoded.user.id\n            },\n            select: {\n                id: true,\n                email: true,\n                name: true,\n                role: true\n            }\n        });\n        return user;\n    } catch (error) {\n        console.error("Error fetching user from token:", error);\n        return null;\n    }\n}\n// Enhanced verifyToken function for API requests\nasync function verifyToken(req) {\n    try {\n        // Try to get token from Authorization header first, then from cookies\n        let token = req.headers.authorization?.replace("Bearer ", "");\n        if (!token && req.cookies.token) {\n            token = req.cookies.token;\n        }\n        if (!token) {\n            return null;\n        }\n        // Verify and decode token\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        let userId;\n        // Handle both token formats\n        if (decoded.user?.id) {\n            userId = decoded.user.id;\n        } else if (decoded.userId) {\n            userId = decoded.userId;\n        } else {\n            return null;\n        }\n        // Fetch fresh user data from database\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            select: {\n                id: true,\n                email: true,\n                name: true,\n                role: true\n            }\n        });\n        return user;\n    } catch (error) {\n        console.error("Token verification error:", error);\n        return null;\n    }\n}\n// Middleware to protect API routes\nfunction withAuth(handler) {\n    return async (req, res)=>{\n        try {\n            // Try to get token from Authorization header first, then from cookies\n            let token = req.headers.authorization?.replace("Bearer ", "");\n            if (!token && req.cookies.token) {\n                token = req.cookies.token;\n            }\n            console.log("Auth middleware - Token present:", !!token);\n            console.log("Auth middleware - Headers:", req.headers.authorization ? "Authorization header present" : "No authorization header");\n            console.log("Auth middleware - Cookies:", req.cookies.token ? "Token cookie present" : "No token cookie");\n            if (!token) {\n                console.log("Auth middleware - No token provided");\n                return res.status(401).json({\n                    error: "No token provided"\n                });\n            }\n            const user = await getUserFromToken(token);\n            if (!user) {\n                console.log("Auth middleware - Invalid token");\n                return res.status(401).json({\n                    error: "Invalid token"\n                });\n            }\n            console.log("Auth middleware - User authenticated:", user.email, user.role);\n            return handler(req, res, user);\n        } catch (error) {\n            console.error("Auth middleware error:", error);\n            return res.status(500).json({\n                error: "Authentication error"\n            });\n        }\n    };\n}\n// Middleware to protect API routes with role check\nfunction withAuthAndRole(roles, handler) {\n    return withAuth(async (req, res, user)=>{\n        if (!roles.includes(user.role)) {\n            return res.status(403).json({\n                error: "Insufficient permissions"\n            });\n        }\n        return handler(req, res, user);\n    });\n}\n// Get user from request (for pages)\nasync function getUserFromRequest(req) {\n    const token = req.headers.authorization?.replace("Bearer ", "") || req.cookies.token;\n    if (!token) return null;\n    return getUserFromToken(token);\n}\n// Verify auth for API routes with proper result format\nasync function verifyAuth(req) {\n    try {\n        const user = await verifyToken(req);\n        if (user) {\n            return {\n                success: true,\n                user\n            };\n        } else {\n            return {\n                success: false,\n                error: "Authentication failed"\n            };\n        }\n    } catch (error) {\n        console.error("Auth verification error:", error);\n        return {\n            success: false,\n            error: "Authentication error"\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dC1wYWdlcy1jaGFrcmEvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XHJcbmltcG9ydCB7IFVzZXJSb2xlIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xyXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xyXG5cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3lvdXItc2VjcmV0LWtleS1jaGFuZ2UtaW4tcHJvZHVjdGlvbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhVc2VyIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHJvbGU6IFVzZXJSb2xlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhUb2tlbiB7XHJcbiAgdXNlcjogQXV0aFVzZXI7XHJcbiAgaWF0OiBudW1iZXI7XHJcbiAgZXhwOiBudW1iZXI7XHJcbn1cclxuXHJcbi8vIEhhc2ggcGFzc3dvcmRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc2hQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEyKTtcclxufVxyXG5cclxuLy8gVmVyaWZ5IHBhc3N3b3JkXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZDogc3RyaW5nLCBoYXNoZWRQYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XHJcbn1cclxuXHJcbi8vIEdlbmVyYXRlIEpXVCB0b2tlblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbih1c2VyOiBBdXRoVXNlcik6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGp3dC5zaWduKFxyXG4gICAgeyB1c2VyIH0sXHJcbiAgICBKV1RfU0VDUkVULFxyXG4gICAgeyBleHBpcmVzSW46ICc3ZCcgfVxyXG4gICk7XHJcbn1cclxuXHJcbi8vIFZlcmlmeSBKV1QgdG9rZW4gKHN0cmluZyB2ZXJzaW9uKVxyXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW5TdHJpbmcodG9rZW46IHN0cmluZyk6IEF1dGhUb2tlbiB8IG51bGwge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgYW55O1xyXG4gICAgXHJcbiAgICAvLyBIYW5kbGUgYm90aCBvbGQgYW5kIG5ldyB0b2tlbiBmb3JtYXRzXHJcbiAgICBpZiAoZGVjb2RlZC51c2VyKSB7XHJcbiAgICAgIHJldHVybiBkZWNvZGVkIGFzIEF1dGhUb2tlbjtcclxuICAgIH0gZWxzZSBpZiAoZGVjb2RlZC51c2VySWQpIHtcclxuICAgICAgLy8gQ29udmVydCBvbGQgZm9ybWF0IHRvIG5ldyBmb3JtYXRcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICBpZDogZGVjb2RlZC51c2VySWQsXHJcbiAgICAgICAgICBlbWFpbDogZGVjb2RlZC5lbWFpbCB8fCAnJyxcclxuICAgICAgICAgIG5hbWU6IGRlY29kZWQubmFtZSB8fCAnJyxcclxuICAgICAgICAgIHJvbGU6IGRlY29kZWQucm9sZSB8fCAnQ1VTVE9NRVInXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpYXQ6IGRlY29kZWQuaWF0LFxyXG4gICAgICAgIGV4cDogZGVjb2RlZC5leHBcclxuICAgICAgfSBhcyBBdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdUb2tlbiB2ZXJpZmljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBHZXQgdXNlciBmcm9tIHRva2VuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRnJvbVRva2VuKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEF1dGhVc2VyIHwgbnVsbD4ge1xyXG4gIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlblN0cmluZyh0b2tlbik7XHJcbiAgaWYgKCFkZWNvZGVkKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IGRlY29kZWQudXNlci5pZCB9LFxyXG4gICAgICBzZWxlY3Q6IHtcclxuICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgICBuYW1lOiB0cnVlLFxyXG4gICAgICAgIHJvbGU6IHRydWUsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBmcm9tIHRva2VuOicsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLy8gRW5oYW5jZWQgdmVyaWZ5VG9rZW4gZnVuY3Rpb24gZm9yIEFQSSByZXF1ZXN0c1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5VG9rZW4ocmVxOiBOZXh0QXBpUmVxdWVzdCk6IFByb21pc2U8QXV0aFVzZXIgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFRyeSB0byBnZXQgdG9rZW4gZnJvbSBBdXRob3JpemF0aW9uIGhlYWRlciBmaXJzdCwgdGhlbiBmcm9tIGNvb2tpZXNcclxuICAgIGxldCB0b2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnJlcGxhY2UoJ0JlYXJlciAnLCAnJyk7XHJcbiAgICBcclxuICAgIGlmICghdG9rZW4gJiYgcmVxLmNvb2tpZXMudG9rZW4pIHtcclxuICAgICAgdG9rZW4gPSByZXEuY29va2llcy50b2tlbjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgYW5kIGRlY29kZSB0b2tlblxyXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpIGFzIGFueTtcclxuICAgIGxldCB1c2VySWQ6IHN0cmluZztcclxuICAgIFxyXG4gICAgLy8gSGFuZGxlIGJvdGggdG9rZW4gZm9ybWF0c1xyXG4gICAgaWYgKGRlY29kZWQudXNlcj8uaWQpIHtcclxuICAgICAgdXNlcklkID0gZGVjb2RlZC51c2VyLmlkO1xyXG4gICAgfSBlbHNlIGlmIChkZWNvZGVkLnVzZXJJZCkge1xyXG4gICAgICB1c2VySWQgPSBkZWNvZGVkLnVzZXJJZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIGZyZXNoIHVzZXIgZGF0YSBmcm9tIGRhdGFiYXNlXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcclxuICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICByb2xlOiB0cnVlLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHZlcmlmaWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8vIE1pZGRsZXdhcmUgdG8gcHJvdGVjdCBBUEkgcm91dGVzXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoQXV0aChoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHVzZXI6IEF1dGhVc2VyKSA9PiBQcm9taXNlPHZvaWQ+KSB7XHJcbiAgcmV0dXJuIGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVHJ5IHRvIGdldCB0b2tlbiBmcm9tIEF1dGhvcml6YXRpb24gaGVhZGVyIGZpcnN0LCB0aGVuIGZyb20gY29va2llc1xyXG4gICAgICBsZXQgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5yZXBsYWNlKCdCZWFyZXIgJywgJycpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCF0b2tlbiAmJiByZXEuY29va2llcy50b2tlbikge1xyXG4gICAgICAgIHRva2VuID0gcmVxLmNvb2tpZXMudG9rZW47XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRoIG1pZGRsZXdhcmUgLSBUb2tlbiBwcmVzZW50OicsICEhdG9rZW4pO1xyXG4gICAgICBjb25zb2xlLmxvZygnQXV0aCBtaWRkbGV3YXJlIC0gSGVhZGVyczonLCByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uID8gJ0F1dGhvcml6YXRpb24gaGVhZGVyIHByZXNlbnQnIDogJ05vIGF1dGhvcml6YXRpb24gaGVhZGVyJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRoIG1pZGRsZXdhcmUgLSBDb29raWVzOicsIHJlcS5jb29raWVzLnRva2VuID8gJ1Rva2VuIGNvb2tpZSBwcmVzZW50JyA6ICdObyB0b2tlbiBjb29raWUnKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQXV0aCBtaWRkbGV3YXJlIC0gTm8gdG9rZW4gcHJvdmlkZWQnKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ05vIHRva2VuIHByb3ZpZGVkJyB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJGcm9tVG9rZW4odG9rZW4pO1xyXG4gICAgICBcclxuICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0F1dGggbWlkZGxld2FyZSAtIEludmFsaWQgdG9rZW4nKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgdG9rZW4nIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnQXV0aCBtaWRkbGV3YXJlIC0gVXNlciBhdXRoZW50aWNhdGVkOicsIHVzZXIuZW1haWwsIHVzZXIucm9sZSk7XHJcbiAgICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzLCB1c2VyKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGggbWlkZGxld2FyZSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnQXV0aGVudGljYXRpb24gZXJyb3InIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcbi8vIE1pZGRsZXdhcmUgdG8gcHJvdGVjdCBBUEkgcm91dGVzIHdpdGggcm9sZSBjaGVja1xyXG5leHBvcnQgZnVuY3Rpb24gd2l0aEF1dGhBbmRSb2xlKHJvbGVzOiBVc2VyUm9sZVtdLCBoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHVzZXI6IEF1dGhVc2VyKSA9PiBQcm9taXNlPHZvaWQ+KSB7XHJcbiAgcmV0dXJuIHdpdGhBdXRoKGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSwgdXNlcjogQXV0aFVzZXIpID0+IHtcclxuICAgIGlmICghcm9sZXMuaW5jbHVkZXModXNlci5yb2xlKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ0luc3VmZmljaWVudCBwZXJtaXNzaW9ucycgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzLCB1c2VyKTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gR2V0IHVzZXIgZnJvbSByZXF1ZXN0IChmb3IgcGFnZXMpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRnJvbVJlcXVlc3QocmVxOiBOZXh0QXBpUmVxdWVzdCk6IFByb21pc2U8QXV0aFVzZXIgfCBudWxsPiB7XHJcbiAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uPy5yZXBsYWNlKCdCZWFyZXIgJywgJycpIHx8IFxyXG4gICAgICAgICAgICAgICAgcmVxLmNvb2tpZXMudG9rZW47XHJcbiAgXHJcbiAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgXHJcbiAgcmV0dXJuIGdldFVzZXJGcm9tVG9rZW4odG9rZW4pO1xyXG59XHJcblxyXG4vLyBWZXJpZnkgYXV0aCBmb3IgQVBJIHJvdXRlcyB3aXRoIHByb3BlciByZXN1bHQgZm9ybWF0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlBdXRoKHJlcTogTmV4dEFwaVJlcXVlc3QpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgdXNlcj86IEF1dGhVc2VyOyBlcnJvcj86IHN0cmluZyB9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlUb2tlbihyZXEpO1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgdXNlciB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQXV0aGVudGljYXRpb24gZmFpbGVkJyB9O1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdBdXRoIHZlcmlmaWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiBlcnJvcicgfTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsicHJpc21hIiwiand0IiwiYmNyeXB0IiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiY29tcGFyZSIsImdlbmVyYXRlVG9rZW4iLCJ1c2VyIiwic2lnbiIsImV4cGlyZXNJbiIsInZlcmlmeVRva2VuU3RyaW5nIiwidG9rZW4iLCJkZWNvZGVkIiwidmVyaWZ5IiwidXNlcklkIiwiaWQiLCJlbWFpbCIsIm5hbWUiLCJyb2xlIiwiaWF0IiwiZXhwIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0VXNlckZyb21Ub2tlbiIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInNlbGVjdCIsInZlcmlmeVRva2VuIiwicmVxIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJyZXBsYWNlIiwiY29va2llcyIsIndpdGhBdXRoIiwiaGFuZGxlciIsInJlcyIsImxvZyIsInN0YXR1cyIsImpzb24iLCJ3aXRoQXV0aEFuZFJvbGUiLCJyb2xlcyIsImluY2x1ZGVzIiwiZ2V0VXNlckZyb21SZXF1ZXN0IiwidmVyaWZ5QXV0aCIsInN1Y2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/auth.ts\n')},"(api)/./src/lib/email.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EmailService: () => (/* binding */ EmailService),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ "nodemailer");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_0__);\n\n// Email service class\nclass EmailService {\n    constructor(){\n        this.transporter = null;\n        this.config = null;\n        this.initializeTransporter();\n    }\n    initializeTransporter() {\n        try {\n            // Check for email configuration in environment variables\n            const emailHost = process.env.EMAIL_HOST || process.env.SMTP_HOST;\n            const emailPort = parseInt(process.env.EMAIL_PORT || process.env.SMTP_PORT || "587");\n            const emailUser = process.env.EMAIL_USER || process.env.SMTP_USER;\n            const emailPass = process.env.EMAIL_PASS || process.env.SMTP_PASS;\n            const emailSecure = process.env.EMAIL_SECURE === "true" || process.env.SMTP_SECURE === "true";\n            if (!emailHost || !emailUser || !emailPass) {\n                console.warn("Email configuration not found. Email notifications will be disabled.");\n                return;\n            }\n            this.config = {\n                host: emailHost,\n                port: emailPort,\n                secure: emailSecure,\n                auth: {\n                    user: emailUser,\n                    pass: emailPass\n                }\n            };\n            this.transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0___default().createTransport({\n                host: this.config.host,\n                port: this.config.port,\n                secure: this.config.secure,\n                auth: this.config.auth,\n                // Add connection timeout settings\n                connectionTimeout: 60000,\n                greetingTimeout: 30000,\n                socketTimeout: 60000,\n                // Enable debug logging in development\n                debug: "development" !== "production",\n                logger: "development" !== "production"\n            });\n            console.log("Email service initialized successfully");\n        } catch (error) {\n            console.error("Failed to initialize email service:", error);\n        }\n    }\n    // Check if email service is available\n    isAvailable() {\n        return this.transporter !== null && this.config !== null;\n    }\n    // Verify email configuration\n    async verifyConnection() {\n        if (!this.transporter) {\n            return false;\n        }\n        try {\n            await this.transporter.verify();\n            console.log("Email service connection verified");\n            return true;\n        } catch (error) {\n            console.error("Email service verification failed:", error);\n            return false;\n        }\n    }\n    // Generate HTML email template\n    generateEmailTemplate(data) {\n        const priorityColors = {\n            urgent: "#dc2626",\n            high: "#ea580c",\n            medium: "#2563eb",\n            low: "#6b7280"\n        };\n        const priorityColor = priorityColors[data.priority] || priorityColors.medium;\n        return `\r\n<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r\n    <title>${data.subject}</title>\r\n    <style>\r\n        body {\r\n            font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, \'Helvetica Neue\', Arial, sans-serif;\r\n            line-height: 1.6;\r\n            color: #333;\r\n            max-width: 600px;\r\n            margin: 0 auto;\r\n            padding: 20px;\r\n            background-color: #f8fafc;\r\n        }\r\n        .email-container {\r\n            background-color: white;\r\n            border-radius: 8px;\r\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n            overflow: hidden;\r\n        }\r\n        .email-header {\r\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n            color: white;\r\n            padding: 30px 20px;\r\n            text-align: center;\r\n        }\r\n        .email-header h1 {\r\n            margin: 0;\r\n            font-size: 24px;\r\n            font-weight: 600;\r\n        }\r\n        .email-header .company-name {\r\n            font-size: 14px;\r\n            opacity: 0.9;\r\n            margin-top: 5px;\r\n        }\r\n        .email-body {\r\n            padding: 30px 20px;\r\n        }\r\n        .priority-badge {\r\n            display: inline-block;\r\n            background-color: ${priorityColor};\r\n            color: white;\r\n            padding: 4px 12px;\r\n            border-radius: 20px;\r\n            font-size: 12px;\r\n            font-weight: 600;\r\n            text-transform: uppercase;\r\n            margin-bottom: 20px;\r\n        }\r\n        .notification-title {\r\n            font-size: 20px;\r\n            font-weight: 600;\r\n            color: #1f2937;\r\n            margin-bottom: 15px;\r\n        }\r\n        .notification-message {\r\n            font-size: 16px;\r\n            color: #4b5563;\r\n            margin-bottom: 25px;\r\n            line-height: 1.7;\r\n        }\r\n        .action-button {\r\n            display: inline-block;\r\n            background-color: #667eea;\r\n            color: white;\r\n            padding: 12px 24px;\r\n            text-decoration: none;\r\n            border-radius: 6px;\r\n            font-weight: 600;\r\n            margin-bottom: 25px;\r\n            transition: background-color 0.3s ease;\r\n        }\r\n        .action-button:hover {\r\n            background-color: #5a67d8;\r\n        }\r\n        .notification-details {\r\n            background-color: #f8fafc;\r\n            border-left: 4px solid ${priorityColor};\r\n            padding: 15px;\r\n            margin: 20px 0;\r\n            border-radius: 0 6px 6px 0;\r\n        }\r\n        .detail-row {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            margin-bottom: 8px;\r\n            font-size: 14px;\r\n        }\r\n        .detail-label {\r\n            font-weight: 600;\r\n            color: #374151;\r\n        }\r\n        .detail-value {\r\n            color: #6b7280;\r\n        }\r\n        .email-footer {\r\n            background-color: #f8fafc;\r\n            padding: 20px;\r\n            text-align: center;\r\n            border-top: 1px solid #e5e7eb;\r\n        }\r\n        .footer-text {\r\n            font-size: 12px;\r\n            color: #6b7280;\r\n            margin-bottom: 10px;\r\n        }\r\n        .footer-links {\r\n            font-size: 12px;\r\n        }\r\n        .footer-links a {\r\n            color: #667eea;\r\n            text-decoration: none;\r\n            margin: 0 10px;\r\n        }\r\n        .footer-links a:hover {\r\n            text-decoration: underline;\r\n        }\r\n        @media (max-width: 600px) {\r\n            body {\r\n                padding: 10px;\r\n            }\r\n            .email-header, .email-body, .email-footer {\r\n                padding: 20px 15px;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class="email-container">\r\n        <div class="email-header">\r\n            <h1>SpareFlow</h1>\r\n            <div class="company-name">AI Spare Logistics Platform</div>\r\n        </div>\r\n        \r\n        <div class="email-body">\r\n            <div class="priority-badge">${data.priority} Priority</div>\r\n            \r\n            <h2 class="notification-title">${data.title}</h2>\r\n            \r\n            <p class="notification-message">${data.message}</p>\r\n            \r\n            ${data.actionUrl ? `\r\n                <a href="${data.actionUrl}" class="action-button">\r\n                    ${data.actionLabel || "View Details"}\r\n                </a>\r\n            ` : ""}\r\n            \r\n            ${data.data ? `\r\n                <div class="notification-details">\r\n                    <div class="detail-row">\r\n                        <span class="detail-label">Notification Type:</span>\r\n                        <span class="detail-value">${data.type}</span>\r\n                    </div>\r\n                    <div class="detail-row">\r\n                        <span class="detail-label">Timestamp:</span>\r\n                        <span class="detail-value">${new Date().toLocaleString()}</span>\r\n                    </div>\r\n                    ${Object.entries(data.data).map(([key, value])=>`\r\n                        <div class="detail-row">\r\n                            <span class="detail-label">${key.charAt(0).toUpperCase() + key.slice(1)}:</span>\r\n                            <span class="detail-value">${value}</span>\r\n                        </div>\r\n                    `).join("")}\r\n                </div>\r\n            ` : ""}\r\n            \r\n            <p style="font-size: 14px; color: #6b7280; margin-top: 30px;">\r\n                This is an automated notification from SpareFlow. Please do not reply to this email.\r\n            </p>\r\n        </div>\r\n        \r\n        <div class="email-footer">\r\n            <p class="footer-text">\r\n                \xa9 ${new Date().getFullYear()} SpareFlow. All rights reserved.\r\n            </p>\r\n            <div class="footer-links">\r\n                <a href="${process.env.NEXT_PUBLIC_APP_URL || "https://spareflow.com"}/dashboard">Dashboard</a>\r\n                <a href="${process.env.NEXT_PUBLIC_APP_URL || "https://spareflow.com"}/help">Help Center</a>\r\n                ${data.unsubscribeUrl ? `<a href="${data.unsubscribeUrl}">Unsubscribe</a>` : ""}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</body>\r\n</html>\r\n    `;\n    }\n    // Generate plain text email\n    generatePlainTextEmail(data) {\n        let text = `SpareFlow - ${data.title}\\n\\n`;\n        text += `Priority: ${data.priority.toUpperCase()}\\n\\n`;\n        text += `${data.message}\\n\\n`;\n        if (data.actionUrl) {\n            text += `${data.actionLabel || "View Details"}: ${data.actionUrl}\\n\\n`;\n        }\n        if (data.data) {\n            text += `Details:\\n`;\n            text += `- Type: ${data.type}\\n`;\n            text += `- Timestamp: ${new Date().toLocaleString()}\\n`;\n            Object.entries(data.data).forEach(([key, value])=>{\n                text += `- ${key.charAt(0).toUpperCase() + key.slice(1)}: ${value}\\n`;\n            });\n            text += "\\n";\n        }\n        text += `This is an automated notification from SpareFlow.\\n`;\n        text += `\xa9 ${new Date().getFullYear()} SpareFlow. All rights reserved.\\n`;\n        return text;\n    }\n    // Send email notification\n    async sendNotification(recipientEmail, notification, recipientName, additionalData) {\n        if (!this.transporter || !this.isAvailable()) {\n            console.warn("Email service not available, skipping email notification");\n            return false;\n        }\n        try {\n            const emailData = {\n                recipientName,\n                recipientEmail,\n                subject: `SpareFlow: ${notification.title}`,\n                title: notification.title,\n                message: notification.message,\n                actionUrl: notification.actionUrl,\n                actionLabel: notification.actionLabel,\n                priority: notification.priority,\n                type: notification.type,\n                data: {\n                    ...notification.data,\n                    ...additionalData\n                },\n                companyName: "SpareFlow",\n                supportEmail: process.env.SUPPORT_EMAIL || "support@spareflow.com"\n            };\n            const mailOptions = {\n                from: {\n                    name: "SpareFlow",\n                    address: process.env.EMAIL_FROM || process.env.EMAIL_USER || "noreply@spareflow.com"\n                },\n                to: recipientEmail,\n                subject: emailData.subject,\n                html: this.generateEmailTemplate(emailData),\n                text: this.generatePlainTextEmail(emailData),\n                headers: {\n                    "X-Priority": notification.priority === "urgent" ? "1" : notification.priority === "high" ? "2" : "3",\n                    "X-SpareFlow-Type": notification.type,\n                    "X-SpareFlow-ID": notification.id\n                }\n            };\n            const result = await this.transporter.sendMail(mailOptions);\n            console.log(`Email sent successfully to ${recipientEmail}:`, result.messageId);\n            return true;\n        } catch (error) {\n            console.error(`Failed to send email to ${recipientEmail}:`, error);\n            return false;\n        }\n    }\n    // Send bulk email notifications\n    async sendBulkNotifications(recipients, notification) {\n        const results = [];\n        let success = 0;\n        let failed = 0;\n        for (const recipient of recipients){\n            try {\n                const sent = await this.sendNotification(recipient.email, notification, recipient.name, recipient.data);\n                if (sent) {\n                    success++;\n                    results.push({\n                        email: recipient.email,\n                        success: true\n                    });\n                } else {\n                    failed++;\n                    results.push({\n                        email: recipient.email,\n                        success: false,\n                        error: "Email service unavailable"\n                    });\n                }\n            } catch (error) {\n                failed++;\n                results.push({\n                    email: recipient.email,\n                    success: false,\n                    error: error instanceof Error ? error.message : "Unknown error"\n                });\n            }\n        }\n        console.log(`Bulk email results: ${success} sent, ${failed} failed`);\n        return {\n            success,\n            failed,\n            results\n        };\n    }\n    // Send welcome email\n    async sendWelcomeEmail(recipientEmail, recipientName, userRole, loginUrl) {\n        const notification = {\n            id: `welcome_${Date.now()}`,\n            type: "system",\n            title: `Welcome to SpareFlow!`,\n            message: `Hello ${recipientName}, welcome to SpareFlow! Your ${userRole} account has been created successfully. You can now access your dashboard and start managing your spare parts logistics.`,\n            timestamp: new Date().toISOString(),\n            priority: "medium",\n            actionUrl: loginUrl || `${process.env.NEXT_PUBLIC_APP_URL || "https://spareflow.com"}/auth/login`,\n            actionLabel: "Access Dashboard",\n            data: {\n                userRole,\n                accountType: userRole\n            }\n        };\n        return this.sendNotification(recipientEmail, notification, recipientName);\n    }\n    // Send password reset email\n    async sendPasswordResetEmail(recipientEmail, recipientName, resetToken, resetUrl) {\n        const finalResetUrl = resetUrl || `${process.env.NEXT_PUBLIC_APP_URL || "https://spareflow.com"}/auth/reset-password?token=${resetToken}`;\n        const notification = {\n            id: `password_reset_${Date.now()}`,\n            type: "system",\n            title: "Password Reset Request",\n            message: `Hello ${recipientName}, you have requested to reset your password. Click the button below to reset your password. This link will expire in 1 hour for security reasons.`,\n            timestamp: new Date().toISOString(),\n            priority: "high",\n            actionUrl: finalResetUrl,\n            actionLabel: "Reset Password",\n            data: {\n                resetToken,\n                expiresIn: "1 hour"\n            }\n        };\n        return this.sendNotification(recipientEmail, notification, recipientName);\n    }\n    // Send order confirmation email\n    async sendOrderConfirmationEmail(recipientEmail, recipientName, orderData) {\n        const notification = {\n            id: `order_confirmation_${orderData.id}_${Date.now()}`,\n            type: "order",\n            title: "Order Confirmation",\n            message: `Hello ${recipientName}, your order #${orderData.id} has been confirmed. We\'ll notify you once your order is shipped.`,\n            timestamp: new Date().toISOString(),\n            priority: "medium",\n            actionUrl: `${process.env.NEXT_PUBLIC_APP_URL || "https://spareflow.com"}/dashboard?tab=orders&order=${orderData.id}`,\n            actionLabel: "Track Order",\n            data: {\n                orderId: orderData.id,\n                partName: orderData.partName,\n                quantity: orderData.quantity,\n                totalAmount: orderData.totalAmount,\n                estimatedDelivery: orderData.estimatedDelivery\n            }\n        };\n        return this.sendNotification(recipientEmail, notification, recipientName);\n    }\n    // Send shipment notification email\n    async sendShipmentNotificationEmail(recipientEmail, recipientName, shipmentData) {\n        const notification = {\n            id: `shipment_notification_${shipmentData.id}_${Date.now()}`,\n            type: "shipment",\n            title: "Shipment Update",\n            message: `Hello ${recipientName}, your shipment #${shipmentData.id} status has been updated to ${shipmentData.status}. ${shipmentData.awbNumber ? `Tracking number: ${shipmentData.awbNumber}` : ""}`,\n            timestamp: new Date().toISOString(),\n            priority: shipmentData.status === "DELIVERED" ? "high" : "medium",\n            actionUrl: `${process.env.NEXT_PUBLIC_APP_URL || "https://spareflow.com"}/dashboard?tab=shipments&shipment=${shipmentData.id}`,\n            actionLabel: "Track Shipment",\n            data: {\n                shipmentId: shipmentData.id,\n                status: shipmentData.status,\n                awbNumber: shipmentData.awbNumber,\n                numBoxes: shipmentData.numBoxes,\n                estimatedDelivery: shipmentData.estimatedDelivery\n            }\n        };\n        return this.sendNotification(recipientEmail, notification, recipientName);\n    }\n    // Send wallet transaction email\n    async sendWalletTransactionEmail(recipientEmail, recipientName, transactionData) {\n        const notification = {\n            id: `wallet_transaction_${transactionData.id}_${Date.now()}`,\n            type: "wallet",\n            title: `Wallet ${transactionData.type === "DEBIT" ? "Debited" : "Credited"}`,\n            message: `Hello ${recipientName}, ₹${transactionData.amount} has been ${transactionData.type === "DEBIT" ? "debited from" : "credited to"} your wallet. Your current balance is ₹${transactionData.balanceAfter}.`,\n            timestamp: new Date().toISOString(),\n            priority: transactionData.type === "DEBIT" ? "medium" : "low",\n            actionUrl: `${process.env.NEXT_PUBLIC_APP_URL || "https://spareflow.com"}/dashboard?tab=wallet`,\n            actionLabel: "View Wallet",\n            data: {\n                transactionId: transactionData.id,\n                type: transactionData.type,\n                amount: transactionData.amount,\n                balanceAfter: transactionData.balanceAfter,\n                reference: transactionData.reference,\n                reason: transactionData.reason\n            }\n        };\n        return this.sendNotification(recipientEmail, notification, recipientName);\n    }\n}\n// Create singleton instance\nconst emailService = new EmailService();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (emailService);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxVQUFVLEVBQUVELGdCQUFnQjNFLElBQUksS0FBSyxVQUFVLGlCQUFpQixjQUFjLHVDQUF1QyxFQUFFMkUsZ0JBQWdCRSxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ2xOeEIsV0FBVyxJQUFJcEQsT0FBT3FELFdBQVc7WUFDakM1RCxVQUFVaUYsZ0JBQWdCM0UsSUFBSSxLQUFLLFVBQVUsV0FBVztZQUN4REYsV0FBVyxDQUFDLEVBQUVoRCxRQUFRQyxHQUFHLENBQUM4RCxtQkFBbUIsSUFBSSx3QkFBd0IscUJBQXFCLENBQUM7WUFDL0ZkLGFBQWE7WUFDYlosTUFBTTtnQkFDSjJGLGVBQWVILGdCQUFnQnhDLEVBQUU7Z0JBQ2pDbkMsTUFBTTJFLGdCQUFnQjNFLElBQUk7Z0JBQzFCNEUsUUFBUUQsZ0JBQWdCQyxNQUFNO2dCQUM5QkMsY0FBY0YsZ0JBQWdCRSxZQUFZO2dCQUMxQ0UsV0FBV0osZ0JBQWdCSSxTQUFTO2dCQUNwQ0MsUUFBUUwsZ0JBQWdCSyxNQUFNO1lBQ2hDO1FBQ0Y7UUFFQSxPQUFPLElBQUksQ0FBQzlELGdCQUFnQixDQUFDQyxnQkFBZ0JDLGNBQWNDO0lBQzdEO0FBQ0Y7QUFFQSw0QkFBNEI7QUFDNUIsTUFBTTRELGVBQWUsSUFBSXpJO0FBRXpCLGlFQUFleUksWUFBWUEsRUFBQTtBQUNvQiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtcGFnZXMtY2hha3JhLy4vc3JjL2xpYi9lbWFpbC50cz80YzE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBub2RlbWFpbGVyIGZyb20gJ25vZGVtYWlsZXInXHJcbmltcG9ydCB7IE5vdGlmaWNhdGlvbkRhdGEgfSBmcm9tICdAL2xpYi93ZWJzb2NrZXQnXHJcblxyXG4vLyBFbWFpbCBjb25maWd1cmF0aW9uIGludGVyZmFjZVxyXG5pbnRlcmZhY2UgRW1haWxDb25maWcge1xyXG4gIGhvc3Q6IHN0cmluZ1xyXG4gIHBvcnQ6IG51bWJlclxyXG4gIHNlY3VyZTogYm9vbGVhblxyXG4gIGF1dGg6IHtcclxuICAgIHVzZXI6IHN0cmluZ1xyXG4gICAgcGFzczogc3RyaW5nXHJcbiAgfVxyXG59XHJcblxyXG4vLyBFbWFpbCB0ZW1wbGF0ZSBkYXRhIGludGVyZmFjZVxyXG5pbnRlcmZhY2UgRW1haWxUZW1wbGF0ZURhdGEge1xyXG4gIHJlY2lwaWVudE5hbWU/OiBzdHJpbmdcclxuICByZWNpcGllbnRFbWFpbDogc3RyaW5nXHJcbiAgc3ViamVjdDogc3RyaW5nXHJcbiAgdGl0bGU6IHN0cmluZ1xyXG4gIG1lc3NhZ2U6IHN0cmluZ1xyXG4gIGFjdGlvblVybD86IHN0cmluZ1xyXG4gIGFjdGlvbkxhYmVsPzogc3RyaW5nXHJcbiAgcHJpb3JpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAndXJnZW50J1xyXG4gIHR5cGU6IHN0cmluZ1xyXG4gIGRhdGE/OiBhbnlcclxuICBjb21wYW55TmFtZT86IHN0cmluZ1xyXG4gIHN1cHBvcnRFbWFpbD86IHN0cmluZ1xyXG4gIHVuc3Vic2NyaWJlVXJsPzogc3RyaW5nXHJcbn1cclxuXHJcbi8vIEVtYWlsIHNlcnZpY2UgY2xhc3NcclxuY2xhc3MgRW1haWxTZXJ2aWNlIHtcclxuICBwcml2YXRlIHRyYW5zcG9ydGVyOiBub2RlbWFpbGVyLlRyYW5zcG9ydGVyIHwgbnVsbCA9IG51bGxcclxuICBwcml2YXRlIGNvbmZpZzogRW1haWxDb25maWcgfCBudWxsID0gbnVsbFxyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZVRyYW5zcG9ydGVyKClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVRyYW5zcG9ydGVyKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQ2hlY2sgZm9yIGVtYWlsIGNvbmZpZ3VyYXRpb24gaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzXHJcbiAgICAgIGNvbnN0IGVtYWlsSG9zdCA9IHByb2Nlc3MuZW52LkVNQUlMX0hPU1QgfHwgcHJvY2Vzcy5lbnYuU01UUF9IT1NUXHJcbiAgICAgIGNvbnN0IGVtYWlsUG9ydCA9IHBhcnNlSW50KHByb2Nlc3MuZW52LkVNQUlMX1BPUlQgfHwgcHJvY2Vzcy5lbnYuU01UUF9QT1JUIHx8ICc1ODcnKVxyXG4gICAgICBjb25zdCBlbWFpbFVzZXIgPSBwcm9jZXNzLmVudi5FTUFJTF9VU0VSIHx8IHByb2Nlc3MuZW52LlNNVFBfVVNFUlxyXG4gICAgICBjb25zdCBlbWFpbFBhc3MgPSBwcm9jZXNzLmVudi5FTUFJTF9QQVNTIHx8IHByb2Nlc3MuZW52LlNNVFBfUEFTU1xyXG4gICAgICBjb25zdCBlbWFpbFNlY3VyZSA9IHByb2Nlc3MuZW52LkVNQUlMX1NFQ1VSRSA9PT0gJ3RydWUnIHx8IHByb2Nlc3MuZW52LlNNVFBfU0VDVVJFID09PSAndHJ1ZSdcclxuXHJcbiAgICAgIGlmICghZW1haWxIb3N0IHx8ICFlbWFpbFVzZXIgfHwgIWVtYWlsUGFzcykge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignRW1haWwgY29uZmlndXJhdGlvbiBub3QgZm91bmQuIEVtYWlsIG5vdGlmaWNhdGlvbnMgd2lsbCBiZSBkaXNhYmxlZC4nKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmNvbmZpZyA9IHtcclxuICAgICAgICBob3N0OiBlbWFpbEhvc3QsXHJcbiAgICAgICAgcG9ydDogZW1haWxQb3J0LFxyXG4gICAgICAgIHNlY3VyZTogZW1haWxTZWN1cmUsXHJcbiAgICAgICAgYXV0aDoge1xyXG4gICAgICAgICAgdXNlcjogZW1haWxVc2VyLFxyXG4gICAgICAgICAgcGFzczogZW1haWxQYXNzXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xyXG4gICAgICAgIGhvc3Q6IHRoaXMuY29uZmlnLmhvc3QsXHJcbiAgICAgICAgcG9ydDogdGhpcy5jb25maWcucG9ydCxcclxuICAgICAgICBzZWN1cmU6IHRoaXMuY29uZmlnLnNlY3VyZSxcclxuICAgICAgICBhdXRoOiB0aGlzLmNvbmZpZy5hdXRoLFxyXG4gICAgICAgIC8vIEFkZCBjb25uZWN0aW9uIHRpbWVvdXQgc2V0dGluZ3NcclxuICAgICAgICBjb25uZWN0aW9uVGltZW91dDogNjAwMDAsIC8vIDYwIHNlY29uZHNcclxuICAgICAgICBncmVldGluZ1RpbWVvdXQ6IDMwMDAwLCAgIC8vIDMwIHNlY29uZHNcclxuICAgICAgICBzb2NrZXRUaW1lb3V0OiA2MDAwMCwgICAgIC8vIDYwIHNlY29uZHNcclxuICAgICAgICAvLyBFbmFibGUgZGVidWcgbG9nZ2luZyBpbiBkZXZlbG9wbWVudFxyXG4gICAgICAgIGRlYnVnOiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLFxyXG4gICAgICAgIGxvZ2dlcjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJ1xyXG4gICAgICB9KVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ0VtYWlsIHNlcnZpY2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5JylcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGVtYWlsIHNlcnZpY2U6JywgZXJyb3IpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiBlbWFpbCBzZXJ2aWNlIGlzIGF2YWlsYWJsZVxyXG4gIHB1YmxpYyBpc0F2YWlsYWJsZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydGVyICE9PSBudWxsICYmIHRoaXMuY29uZmlnICE9PSBudWxsXHJcbiAgfVxyXG5cclxuICAvLyBWZXJpZnkgZW1haWwgY29uZmlndXJhdGlvblxyXG4gIHB1YmxpYyBhc3luYyB2ZXJpZnlDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgaWYgKCF0aGlzLnRyYW5zcG9ydGVyKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHRoaXMudHJhbnNwb3J0ZXIudmVyaWZ5KClcclxuICAgICAgY29uc29sZS5sb2coJ0VtYWlsIHNlcnZpY2UgY29ubmVjdGlvbiB2ZXJpZmllZCcpXHJcbiAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFbWFpbCBzZXJ2aWNlIHZlcmlmaWNhdGlvbiBmYWlsZWQ6JywgZXJyb3IpXHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gR2VuZXJhdGUgSFRNTCBlbWFpbCB0ZW1wbGF0ZVxyXG4gIHByaXZhdGUgZ2VuZXJhdGVFbWFpbFRlbXBsYXRlKGRhdGE6IEVtYWlsVGVtcGxhdGVEYXRhKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHByaW9yaXR5Q29sb3JzID0ge1xyXG4gICAgICB1cmdlbnQ6ICcjZGMyNjI2JyxcclxuICAgICAgaGlnaDogJyNlYTU4MGMnLFxyXG4gICAgICBtZWRpdW06ICcjMjU2M2ViJyxcclxuICAgICAgbG93OiAnIzZiNzI4MCdcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwcmlvcml0eUNvbG9yID0gcHJpb3JpdHlDb2xvcnNbZGF0YS5wcmlvcml0eV0gfHwgcHJpb3JpdHlDb2xvcnMubWVkaXVtXHJcblxyXG4gICAgcmV0dXJuIGBcclxuPCFET0NUWVBFIGh0bWw+XHJcbjxodG1sIGxhbmc9XCJlblwiPlxyXG48aGVhZD5cclxuICAgIDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiPlxyXG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cclxuICAgIDx0aXRsZT4ke2RhdGEuc3ViamVjdH08L3RpdGxlPlxyXG4gICAgPHN0eWxlPlxyXG4gICAgICAgIGJvZHkge1xyXG4gICAgICAgICAgICBmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAnU2Vnb2UgVUknLCBSb2JvdG8sICdIZWx2ZXRpY2EgTmV1ZScsIEFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gICAgICAgICAgICBsaW5lLWhlaWdodDogMS42O1xyXG4gICAgICAgICAgICBjb2xvcjogIzMzMztcclxuICAgICAgICAgICAgbWF4LXdpZHRoOiA2MDBweDtcclxuICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGZhZmM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5lbWFpbC1jb250YWluZXIge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCA2cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZW1haWwtaGVhZGVyIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTtcclxuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAzMHB4IDIwcHg7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmVtYWlsLWhlYWRlciBoMSB7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4O1xyXG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZW1haWwtaGVhZGVyIC5jb21wYW55LW5hbWUge1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuOTtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZW1haWwtYm9keSB7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDMwcHggMjBweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnByaW9yaXR5LWJhZGdlIHtcclxuICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3ByaW9yaXR5Q29sb3J9O1xyXG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4O1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4O1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5ub3RpZmljYXRpb24tdGl0bGUge1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDIwcHg7XHJcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjMWYyOTM3O1xyXG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAubm90aWZpY2F0aW9uLW1lc3NhZ2Uge1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjNGI1NTYzO1xyXG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4O1xyXG4gICAgICAgICAgICBsaW5lLWhlaWdodDogMS43O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuYWN0aW9uLWJ1dHRvbiB7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzY2N2VlYTtcclxuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDI0cHg7XHJcbiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4O1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmFjdGlvbi1idXR0b246aG92ZXIge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWE2N2Q4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAubm90aWZpY2F0aW9uLWRldGFpbHMge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmYWZjO1xyXG4gICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICR7cHJpb3JpdHlDb2xvcn07XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMjBweCAwO1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDZweCA2cHggMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmRldGFpbC1yb3cge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZGV0YWlsLWxhYmVsIHtcclxuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgICAgICAgICAgY29sb3I6ICMzNzQxNTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5kZXRhaWwtdmFsdWUge1xyXG4gICAgICAgICAgICBjb2xvcjogIzZiNzI4MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmVtYWlsLWZvb3RlciB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGZhZmM7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNWU3ZWI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5mb290ZXItdGV4dCB7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgICAgICAgICAgY29sb3I6ICM2YjcyODA7XHJcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5mb290ZXItbGlua3Mge1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5mb290ZXItbGlua3MgYSB7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjNjY3ZWVhO1xyXG4gICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMCAxMHB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZm9vdGVyLWxpbmtzIGE6aG92ZXIge1xyXG4gICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDYwMHB4KSB7XHJcbiAgICAgICAgICAgIGJvZHkge1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTBweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuZW1haWwtaGVhZGVyLCAuZW1haWwtYm9keSwgLmVtYWlsLWZvb3RlciB7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4IDE1cHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICA8L3N0eWxlPlxyXG48L2hlYWQ+XHJcbjxib2R5PlxyXG4gICAgPGRpdiBjbGFzcz1cImVtYWlsLWNvbnRhaW5lclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJlbWFpbC1oZWFkZXJcIj5cclxuICAgICAgICAgICAgPGgxPlNwYXJlRmxvdzwvaDE+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb21wYW55LW5hbWVcIj5BSSBTcGFyZSBMb2dpc3RpY3MgUGxhdGZvcm08L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW1haWwtYm9keVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJpb3JpdHktYmFkZ2VcIj4ke2RhdGEucHJpb3JpdHl9IFByaW9yaXR5PC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8aDIgY2xhc3M9XCJub3RpZmljYXRpb24tdGl0bGVcIj4ke2RhdGEudGl0bGV9PC9oMj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxwIGNsYXNzPVwibm90aWZpY2F0aW9uLW1lc3NhZ2VcIj4ke2RhdGEubWVzc2FnZX08L3A+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAke2RhdGEuYWN0aW9uVXJsID8gYFxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7ZGF0YS5hY3Rpb25Vcmx9XCIgY2xhc3M9XCJhY3Rpb24tYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgJHtkYXRhLmFjdGlvbkxhYmVsIHx8ICdWaWV3IERldGFpbHMnfVxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICBgIDogJyd9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAke2RhdGEuZGF0YSA/IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJub3RpZmljYXRpb24tZGV0YWlsc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXRhaWwtcm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLWxhYmVsXCI+Tm90aWZpY2F0aW9uIFR5cGU6PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRldGFpbC12YWx1ZVwiPiR7ZGF0YS50eXBlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRldGFpbC1sYWJlbFwiPlRpbWVzdGFtcDo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV0YWlsLXZhbHVlXCI+JHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCl9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICR7T2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLXJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj4ke2tleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zbGljZSgxKX06PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXRhaWwtdmFsdWVcIj4ke3ZhbHVlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgYCkuam9pbignJyl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYCA6ICcnfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjNmI3MjgwOyBtYXJnaW4tdG9wOiAzMHB4O1wiPlxyXG4gICAgICAgICAgICAgICAgVGhpcyBpcyBhbiBhdXRvbWF0ZWQgbm90aWZpY2F0aW9uIGZyb20gU3BhcmVGbG93LiBQbGVhc2UgZG8gbm90IHJlcGx5IHRvIHRoaXMgZW1haWwuXHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZW1haWwtZm9vdGVyXCI+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzPVwiZm9vdGVyLXRleHRcIj5cclxuICAgICAgICAgICAgICAgIMKpICR7bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpfSBTcGFyZUZsb3cuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3Rlci1saW5rc1wiPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTCB8fCAnaHR0cHM6Ly9zcGFyZWZsb3cuY29tJ30vZGFzaGJvYXJkXCI+RGFzaGJvYXJkPC9hPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTCB8fCAnaHR0cHM6Ly9zcGFyZWZsb3cuY29tJ30vaGVscFwiPkhlbHAgQ2VudGVyPC9hPlxyXG4gICAgICAgICAgICAgICAgJHtkYXRhLnVuc3Vic2NyaWJlVXJsID8gYDxhIGhyZWY9XCIke2RhdGEudW5zdWJzY3JpYmVVcmx9XCI+VW5zdWJzY3JpYmU8L2E+YCA6ICcnfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG48L2JvZHk+XHJcbjwvaHRtbD5cclxuICAgIGBcclxuICB9XHJcblxyXG4gIC8vIEdlbmVyYXRlIHBsYWluIHRleHQgZW1haWxcclxuICBwcml2YXRlIGdlbmVyYXRlUGxhaW5UZXh0RW1haWwoZGF0YTogRW1haWxUZW1wbGF0ZURhdGEpOiBzdHJpbmcge1xyXG4gICAgbGV0IHRleHQgPSBgU3BhcmVGbG93IC0gJHtkYXRhLnRpdGxlfVxcblxcbmBcclxuICAgIHRleHQgKz0gYFByaW9yaXR5OiAke2RhdGEucHJpb3JpdHkudG9VcHBlckNhc2UoKX1cXG5cXG5gXHJcbiAgICB0ZXh0ICs9IGAke2RhdGEubWVzc2FnZX1cXG5cXG5gXHJcbiAgICBcclxuICAgIGlmIChkYXRhLmFjdGlvblVybCkge1xyXG4gICAgICB0ZXh0ICs9IGAke2RhdGEuYWN0aW9uTGFiZWwgfHwgJ1ZpZXcgRGV0YWlscyd9OiAke2RhdGEuYWN0aW9uVXJsfVxcblxcbmBcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGRhdGEuZGF0YSkge1xyXG4gICAgICB0ZXh0ICs9IGBEZXRhaWxzOlxcbmBcclxuICAgICAgdGV4dCArPSBgLSBUeXBlOiAke2RhdGEudHlwZX1cXG5gXHJcbiAgICAgIHRleHQgKz0gYC0gVGltZXN0YW1wOiAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX1cXG5gXHJcbiAgICAgIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XHJcbiAgICAgICAgdGV4dCArPSBgLSAke2tleS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleS5zbGljZSgxKX06ICR7dmFsdWV9XFxuYFxyXG4gICAgICB9KVxyXG4gICAgICB0ZXh0ICs9ICdcXG4nXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRleHQgKz0gYFRoaXMgaXMgYW4gYXV0b21hdGVkIG5vdGlmaWNhdGlvbiBmcm9tIFNwYXJlRmxvdy5cXG5gXHJcbiAgICB0ZXh0ICs9IGDCqSAke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0gU3BhcmVGbG93LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxcbmBcclxuICAgIFxyXG4gICAgcmV0dXJuIHRleHRcclxuICB9XHJcblxyXG4gIC8vIFNlbmQgZW1haWwgbm90aWZpY2F0aW9uXHJcbiAgcHVibGljIGFzeW5jIHNlbmROb3RpZmljYXRpb24oXHJcbiAgICByZWNpcGllbnRFbWFpbDogc3RyaW5nLFxyXG4gICAgbm90aWZpY2F0aW9uOiBOb3RpZmljYXRpb25EYXRhLFxyXG4gICAgcmVjaXBpZW50TmFtZT86IHN0cmluZyxcclxuICAgIGFkZGl0aW9uYWxEYXRhPzogYW55XHJcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBpZiAoIXRoaXMudHJhbnNwb3J0ZXIgfHwgIXRoaXMuaXNBdmFpbGFibGUoKSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0VtYWlsIHNlcnZpY2Ugbm90IGF2YWlsYWJsZSwgc2tpcHBpbmcgZW1haWwgbm90aWZpY2F0aW9uJylcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZW1haWxEYXRhOiBFbWFpbFRlbXBsYXRlRGF0YSA9IHtcclxuICAgICAgICByZWNpcGllbnROYW1lLFxyXG4gICAgICAgIHJlY2lwaWVudEVtYWlsLFxyXG4gICAgICAgIHN1YmplY3Q6IGBTcGFyZUZsb3c6ICR7bm90aWZpY2F0aW9uLnRpdGxlfWAsXHJcbiAgICAgICAgdGl0bGU6IG5vdGlmaWNhdGlvbi50aXRsZSxcclxuICAgICAgICBtZXNzYWdlOiBub3RpZmljYXRpb24ubWVzc2FnZSxcclxuICAgICAgICBhY3Rpb25Vcmw6IG5vdGlmaWNhdGlvbi5hY3Rpb25VcmwsXHJcbiAgICAgICAgYWN0aW9uTGFiZWw6IG5vdGlmaWNhdGlvbi5hY3Rpb25MYWJlbCxcclxuICAgICAgICBwcmlvcml0eTogbm90aWZpY2F0aW9uLnByaW9yaXR5LFxyXG4gICAgICAgIHR5cGU6IG5vdGlmaWNhdGlvbi50eXBlLFxyXG4gICAgICAgIGRhdGE6IHsgLi4ubm90aWZpY2F0aW9uLmRhdGEsIC4uLmFkZGl0aW9uYWxEYXRhIH0sXHJcbiAgICAgICAgY29tcGFueU5hbWU6ICdTcGFyZUZsb3cnLFxyXG4gICAgICAgIHN1cHBvcnRFbWFpbDogcHJvY2Vzcy5lbnYuU1VQUE9SVF9FTUFJTCB8fCAnc3VwcG9ydEBzcGFyZWZsb3cuY29tJ1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcclxuICAgICAgICBmcm9tOiB7XHJcbiAgICAgICAgICBuYW1lOiAnU3BhcmVGbG93JyxcclxuICAgICAgICAgIGFkZHJlc3M6IHByb2Nlc3MuZW52LkVNQUlMX0ZST00gfHwgcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiB8fCAnbm9yZXBseUBzcGFyZWZsb3cuY29tJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdG86IHJlY2lwaWVudEVtYWlsLFxyXG4gICAgICAgIHN1YmplY3Q6IGVtYWlsRGF0YS5zdWJqZWN0LFxyXG4gICAgICAgIGh0bWw6IHRoaXMuZ2VuZXJhdGVFbWFpbFRlbXBsYXRlKGVtYWlsRGF0YSksXHJcbiAgICAgICAgdGV4dDogdGhpcy5nZW5lcmF0ZVBsYWluVGV4dEVtYWlsKGVtYWlsRGF0YSksXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ1gtUHJpb3JpdHknOiBub3RpZmljYXRpb24ucHJpb3JpdHkgPT09ICd1cmdlbnQnID8gJzEnIDogXHJcbiAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnByaW9yaXR5ID09PSAnaGlnaCcgPyAnMicgOiAnMycsXHJcbiAgICAgICAgICAnWC1TcGFyZUZsb3ctVHlwZSc6IG5vdGlmaWNhdGlvbi50eXBlLFxyXG4gICAgICAgICAgJ1gtU3BhcmVGbG93LUlEJzogbm90aWZpY2F0aW9uLmlkXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKVxyXG4gICAgICBjb25zb2xlLmxvZyhgRW1haWwgc2VudCBzdWNjZXNzZnVsbHkgdG8gJHtyZWNpcGllbnRFbWFpbH06YCwgcmVzdWx0Lm1lc3NhZ2VJZClcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBzZW5kIGVtYWlsIHRvICR7cmVjaXBpZW50RW1haWx9OmAsIGVycm9yKVxyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFNlbmQgYnVsayBlbWFpbCBub3RpZmljYXRpb25zXHJcbiAgcHVibGljIGFzeW5jIHNlbmRCdWxrTm90aWZpY2F0aW9ucyhcclxuICAgIHJlY2lwaWVudHM6IEFycmF5PHsgZW1haWw6IHN0cmluZzsgbmFtZT86IHN0cmluZzsgZGF0YT86IGFueSB9PixcclxuICAgIG5vdGlmaWNhdGlvbjogTm90aWZpY2F0aW9uRGF0YVxyXG4gICk6IFByb21pc2U8eyBzdWNjZXNzOiBudW1iZXI7IGZhaWxlZDogbnVtYmVyOyByZXN1bHRzOiBBcnJheTx7IGVtYWlsOiBzdHJpbmc7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IH0+IHtcclxuICAgIGNvbnN0IHJlc3VsdHMgPSBbXVxyXG4gICAgbGV0IHN1Y2Nlc3MgPSAwXHJcbiAgICBsZXQgZmFpbGVkID0gMFxyXG5cclxuICAgIGZvciAoY29uc3QgcmVjaXBpZW50IG9mIHJlY2lwaWVudHMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzZW50ID0gYXdhaXQgdGhpcy5zZW5kTm90aWZpY2F0aW9uKFxyXG4gICAgICAgICAgcmVjaXBpZW50LmVtYWlsLFxyXG4gICAgICAgICAgbm90aWZpY2F0aW9uLFxyXG4gICAgICAgICAgcmVjaXBpZW50Lm5hbWUsXHJcbiAgICAgICAgICByZWNpcGllbnQuZGF0YVxyXG4gICAgICAgIClcclxuICAgICAgICBcclxuICAgICAgICBpZiAoc2VudCkge1xyXG4gICAgICAgICAgc3VjY2VzcysrXHJcbiAgICAgICAgICByZXN1bHRzLnB1c2goeyBlbWFpbDogcmVjaXBpZW50LmVtYWlsLCBzdWNjZXNzOiB0cnVlIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGZhaWxlZCsrXHJcbiAgICAgICAgICByZXN1bHRzLnB1c2goeyBlbWFpbDogcmVjaXBpZW50LmVtYWlsLCBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBzZXJ2aWNlIHVuYXZhaWxhYmxlJyB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBmYWlsZWQrK1xyXG4gICAgICAgIHJlc3VsdHMucHVzaCh7IFxyXG4gICAgICAgICAgZW1haWw6IHJlY2lwaWVudC5lbWFpbCwgXHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicgXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGBCdWxrIGVtYWlsIHJlc3VsdHM6ICR7c3VjY2Vzc30gc2VudCwgJHtmYWlsZWR9IGZhaWxlZGApXHJcbiAgICByZXR1cm4geyBzdWNjZXNzLCBmYWlsZWQsIHJlc3VsdHMgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2VuZCB3ZWxjb21lIGVtYWlsXHJcbiAgcHVibGljIGFzeW5jIHNlbmRXZWxjb21lRW1haWwoXHJcbiAgICByZWNpcGllbnRFbWFpbDogc3RyaW5nLFxyXG4gICAgcmVjaXBpZW50TmFtZTogc3RyaW5nLFxyXG4gICAgdXNlclJvbGU6IHN0cmluZyxcclxuICAgIGxvZ2luVXJsPzogc3RyaW5nXHJcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCBub3RpZmljYXRpb246IE5vdGlmaWNhdGlvbkRhdGEgPSB7XHJcbiAgICAgIGlkOiBgd2VsY29tZV8ke0RhdGUubm93KCl9YCxcclxuICAgICAgdHlwZTogJ3N5c3RlbScsXHJcbiAgICAgIHRpdGxlOiBgV2VsY29tZSB0byBTcGFyZUZsb3chYCxcclxuICAgICAgbWVzc2FnZTogYEhlbGxvICR7cmVjaXBpZW50TmFtZX0sIHdlbGNvbWUgdG8gU3BhcmVGbG93ISBZb3VyICR7dXNlclJvbGV9IGFjY291bnQgaGFzIGJlZW4gY3JlYXRlZCBzdWNjZXNzZnVsbHkuIFlvdSBjYW4gbm93IGFjY2VzcyB5b3VyIGRhc2hib2FyZCBhbmQgc3RhcnQgbWFuYWdpbmcgeW91ciBzcGFyZSBwYXJ0cyBsb2dpc3RpY3MuYCxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIHByaW9yaXR5OiAnbWVkaXVtJyxcclxuICAgICAgYWN0aW9uVXJsOiBsb2dpblVybCB8fCBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfVVJMIHx8ICdodHRwczovL3NwYXJlZmxvdy5jb20nfS9hdXRoL2xvZ2luYCxcclxuICAgICAgYWN0aW9uTGFiZWw6ICdBY2Nlc3MgRGFzaGJvYXJkJyxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHVzZXJSb2xlLFxyXG4gICAgICAgIGFjY291bnRUeXBlOiB1c2VyUm9sZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuc2VuZE5vdGlmaWNhdGlvbihyZWNpcGllbnRFbWFpbCwgbm90aWZpY2F0aW9uLCByZWNpcGllbnROYW1lKVxyXG4gIH1cclxuXHJcbiAgLy8gU2VuZCBwYXNzd29yZCByZXNldCBlbWFpbFxyXG4gIHB1YmxpYyBhc3luYyBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKFxyXG4gICAgcmVjaXBpZW50RW1haWw6IHN0cmluZyxcclxuICAgIHJlY2lwaWVudE5hbWU6IHN0cmluZyxcclxuICAgIHJlc2V0VG9rZW46IHN0cmluZyxcclxuICAgIHJlc2V0VXJsPzogc3RyaW5nXHJcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCBmaW5hbFJlc2V0VXJsID0gcmVzZXRVcmwgfHwgYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTCB8fCAnaHR0cHM6Ly9zcGFyZWZsb3cuY29tJ30vYXV0aC9yZXNldC1wYXNzd29yZD90b2tlbj0ke3Jlc2V0VG9rZW59YFxyXG4gICAgXHJcbiAgICBjb25zdCBub3RpZmljYXRpb246IE5vdGlmaWNhdGlvbkRhdGEgPSB7XHJcbiAgICAgIGlkOiBgcGFzc3dvcmRfcmVzZXRfJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgIHR5cGU6ICdzeXN0ZW0nLFxyXG4gICAgICB0aXRsZTogJ1Bhc3N3b3JkIFJlc2V0IFJlcXVlc3QnLFxyXG4gICAgICBtZXNzYWdlOiBgSGVsbG8gJHtyZWNpcGllbnROYW1lfSwgeW91IGhhdmUgcmVxdWVzdGVkIHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQuIENsaWNrIHRoZSBidXR0b24gYmVsb3cgdG8gcmVzZXQgeW91ciBwYXNzd29yZC4gVGhpcyBsaW5rIHdpbGwgZXhwaXJlIGluIDEgaG91ciBmb3Igc2VjdXJpdHkgcmVhc29ucy5gLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgcHJpb3JpdHk6ICdoaWdoJyxcclxuICAgICAgYWN0aW9uVXJsOiBmaW5hbFJlc2V0VXJsLFxyXG4gICAgICBhY3Rpb25MYWJlbDogJ1Jlc2V0IFBhc3N3b3JkJyxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHJlc2V0VG9rZW4sXHJcbiAgICAgICAgZXhwaXJlc0luOiAnMSBob3VyJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuc2VuZE5vdGlmaWNhdGlvbihyZWNpcGllbnRFbWFpbCwgbm90aWZpY2F0aW9uLCByZWNpcGllbnROYW1lKVxyXG4gIH1cclxuXHJcbiAgLy8gU2VuZCBvcmRlciBjb25maXJtYXRpb24gZW1haWxcclxuICBwdWJsaWMgYXN5bmMgc2VuZE9yZGVyQ29uZmlybWF0aW9uRW1haWwoXHJcbiAgICByZWNpcGllbnRFbWFpbDogc3RyaW5nLFxyXG4gICAgcmVjaXBpZW50TmFtZTogc3RyaW5nLFxyXG4gICAgb3JkZXJEYXRhOiBhbnlcclxuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbjogTm90aWZpY2F0aW9uRGF0YSA9IHtcclxuICAgICAgaWQ6IGBvcmRlcl9jb25maXJtYXRpb25fJHtvcmRlckRhdGEuaWR9XyR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICB0eXBlOiAnb3JkZXInLFxyXG4gICAgICB0aXRsZTogJ09yZGVyIENvbmZpcm1hdGlvbicsXHJcbiAgICAgIG1lc3NhZ2U6IGBIZWxsbyAke3JlY2lwaWVudE5hbWV9LCB5b3VyIG9yZGVyICMke29yZGVyRGF0YS5pZH0gaGFzIGJlZW4gY29uZmlybWVkLiBXZSdsbCBub3RpZnkgeW91IG9uY2UgeW91ciBvcmRlciBpcyBzaGlwcGVkLmAsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBwcmlvcml0eTogJ21lZGl1bScsXHJcbiAgICAgIGFjdGlvblVybDogYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTCB8fCAnaHR0cHM6Ly9zcGFyZWZsb3cuY29tJ30vZGFzaGJvYXJkP3RhYj1vcmRlcnMmb3JkZXI9JHtvcmRlckRhdGEuaWR9YCxcclxuICAgICAgYWN0aW9uTGFiZWw6ICdUcmFjayBPcmRlcicsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBvcmRlcklkOiBvcmRlckRhdGEuaWQsXHJcbiAgICAgICAgcGFydE5hbWU6IG9yZGVyRGF0YS5wYXJ0TmFtZSxcclxuICAgICAgICBxdWFudGl0eTogb3JkZXJEYXRhLnF1YW50aXR5LFxyXG4gICAgICAgIHRvdGFsQW1vdW50OiBvcmRlckRhdGEudG90YWxBbW91bnQsXHJcbiAgICAgICAgZXN0aW1hdGVkRGVsaXZlcnk6IG9yZGVyRGF0YS5lc3RpbWF0ZWREZWxpdmVyeVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuc2VuZE5vdGlmaWNhdGlvbihyZWNpcGllbnRFbWFpbCwgbm90aWZpY2F0aW9uLCByZWNpcGllbnROYW1lKVxyXG4gIH1cclxuXHJcbiAgLy8gU2VuZCBzaGlwbWVudCBub3RpZmljYXRpb24gZW1haWxcclxuICBwdWJsaWMgYXN5bmMgc2VuZFNoaXBtZW50Tm90aWZpY2F0aW9uRW1haWwoXHJcbiAgICByZWNpcGllbnRFbWFpbDogc3RyaW5nLFxyXG4gICAgcmVjaXBpZW50TmFtZTogc3RyaW5nLFxyXG4gICAgc2hpcG1lbnREYXRhOiBhbnlcclxuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbjogTm90aWZpY2F0aW9uRGF0YSA9IHtcclxuICAgICAgaWQ6IGBzaGlwbWVudF9ub3RpZmljYXRpb25fJHtzaGlwbWVudERhdGEuaWR9XyR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICB0eXBlOiAnc2hpcG1lbnQnLFxyXG4gICAgICB0aXRsZTogJ1NoaXBtZW50IFVwZGF0ZScsXHJcbiAgICAgIG1lc3NhZ2U6IGBIZWxsbyAke3JlY2lwaWVudE5hbWV9LCB5b3VyIHNoaXBtZW50ICMke3NoaXBtZW50RGF0YS5pZH0gc3RhdHVzIGhhcyBiZWVuIHVwZGF0ZWQgdG8gJHtzaGlwbWVudERhdGEuc3RhdHVzfS4gJHtzaGlwbWVudERhdGEuYXdiTnVtYmVyID8gYFRyYWNraW5nIG51bWJlcjogJHtzaGlwbWVudERhdGEuYXdiTnVtYmVyfWAgOiAnJ31gLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgcHJpb3JpdHk6IHNoaXBtZW50RGF0YS5zdGF0dXMgPT09ICdERUxJVkVSRUQnID8gJ2hpZ2gnIDogJ21lZGl1bScsXHJcbiAgICAgIGFjdGlvblVybDogYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTCB8fCAnaHR0cHM6Ly9zcGFyZWZsb3cuY29tJ30vZGFzaGJvYXJkP3RhYj1zaGlwbWVudHMmc2hpcG1lbnQ9JHtzaGlwbWVudERhdGEuaWR9YCxcclxuICAgICAgYWN0aW9uTGFiZWw6ICdUcmFjayBTaGlwbWVudCcsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBzaGlwbWVudElkOiBzaGlwbWVudERhdGEuaWQsXHJcbiAgICAgICAgc3RhdHVzOiBzaGlwbWVudERhdGEuc3RhdHVzLFxyXG4gICAgICAgIGF3Yk51bWJlcjogc2hpcG1lbnREYXRhLmF3Yk51bWJlcixcclxuICAgICAgICBudW1Cb3hlczogc2hpcG1lbnREYXRhLm51bUJveGVzLFxyXG4gICAgICAgIGVzdGltYXRlZERlbGl2ZXJ5OiBzaGlwbWVudERhdGEuZXN0aW1hdGVkRGVsaXZlcnlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLnNlbmROb3RpZmljYXRpb24ocmVjaXBpZW50RW1haWwsIG5vdGlmaWNhdGlvbiwgcmVjaXBpZW50TmFtZSlcclxuICB9XHJcblxyXG4gIC8vIFNlbmQgd2FsbGV0IHRyYW5zYWN0aW9uIGVtYWlsXHJcbiAgcHVibGljIGFzeW5jIHNlbmRXYWxsZXRUcmFuc2FjdGlvbkVtYWlsKFxyXG4gICAgcmVjaXBpZW50RW1haWw6IHN0cmluZyxcclxuICAgIHJlY2lwaWVudE5hbWU6IHN0cmluZyxcclxuICAgIHRyYW5zYWN0aW9uRGF0YTogYW55XHJcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCBub3RpZmljYXRpb246IE5vdGlmaWNhdGlvbkRhdGEgPSB7XHJcbiAgICAgIGlkOiBgd2FsbGV0X3RyYW5zYWN0aW9uXyR7dHJhbnNhY3Rpb25EYXRhLmlkfV8ke0RhdGUubm93KCl9YCxcclxuICAgICAgdHlwZTogJ3dhbGxldCcsXHJcbiAgICAgIHRpdGxlOiBgV2FsbGV0ICR7dHJhbnNhY3Rpb25EYXRhLnR5cGUgPT09ICdERUJJVCcgPyAnRGViaXRlZCcgOiAnQ3JlZGl0ZWQnfWAsXHJcbiAgICAgIG1lc3NhZ2U6IGBIZWxsbyAke3JlY2lwaWVudE5hbWV9LCDigrkke3RyYW5zYWN0aW9uRGF0YS5hbW91bnR9IGhhcyBiZWVuICR7dHJhbnNhY3Rpb25EYXRhLnR5cGUgPT09ICdERUJJVCcgPyAnZGViaXRlZCBmcm9tJyA6ICdjcmVkaXRlZCB0byd9IHlvdXIgd2FsbGV0LiBZb3VyIGN1cnJlbnQgYmFsYW5jZSBpcyDigrkke3RyYW5zYWN0aW9uRGF0YS5iYWxhbmNlQWZ0ZXJ9LmAsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBwcmlvcml0eTogdHJhbnNhY3Rpb25EYXRhLnR5cGUgPT09ICdERUJJVCcgPyAnbWVkaXVtJyA6ICdsb3cnLFxyXG4gICAgICBhY3Rpb25Vcmw6IGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQUF9VUkwgfHwgJ2h0dHBzOi8vc3BhcmVmbG93LmNvbSd9L2Rhc2hib2FyZD90YWI9d2FsbGV0YCxcclxuICAgICAgYWN0aW9uTGFiZWw6ICdWaWV3IFdhbGxldCcsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICB0cmFuc2FjdGlvbklkOiB0cmFuc2FjdGlvbkRhdGEuaWQsXHJcbiAgICAgICAgdHlwZTogdHJhbnNhY3Rpb25EYXRhLnR5cGUsXHJcbiAgICAgICAgYW1vdW50OiB0cmFuc2FjdGlvbkRhdGEuYW1vdW50LFxyXG4gICAgICAgIGJhbGFuY2VBZnRlcjogdHJhbnNhY3Rpb25EYXRhLmJhbGFuY2VBZnRlcixcclxuICAgICAgICByZWZlcmVuY2U6IHRyYW5zYWN0aW9uRGF0YS5yZWZlcmVuY2UsXHJcbiAgICAgICAgcmVhc29uOiB0cmFuc2FjdGlvbkRhdGEucmVhc29uXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5zZW5kTm90aWZpY2F0aW9uKHJlY2lwaWVudEVtYWlsLCBub3RpZmljYXRpb24sIHJlY2lwaWVudE5hbWUpXHJcbiAgfVxyXG59XHJcblxyXG4vLyBDcmVhdGUgc2luZ2xldG9uIGluc3RhbmNlXHJcbmNvbnN0IGVtYWlsU2VydmljZSA9IG5ldyBFbWFpbFNlcnZpY2UoKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZW1haWxTZXJ2aWNlXHJcbmV4cG9ydCB7IEVtYWlsU2VydmljZSwgdHlwZSBFbWFpbFRlbXBsYXRlRGF0YSB9Il0sIm5hbWVzIjpbIm5vZGVtYWlsZXIiLCJFbWFpbFNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsInRyYW5zcG9ydGVyIiwiY29uZmlnIiwiaW5pdGlhbGl6ZVRyYW5zcG9ydGVyIiwiZW1haWxIb3N0IiwicHJvY2VzcyIsImVudiIsIkVNQUlMX0hPU1QiLCJTTVRQX0hPU1QiLCJlbWFpbFBvcnQiLCJwYXJzZUludCIsIkVNQUlMX1BPUlQiLCJTTVRQX1BPUlQiLCJlbWFpbFVzZXIiLCJFTUFJTF9VU0VSIiwiU01UUF9VU0VSIiwiZW1haWxQYXNzIiwiRU1BSUxfUEFTUyIsIlNNVFBfUEFTUyIsImVtYWlsU2VjdXJlIiwiRU1BSUxfU0VDVVJFIiwiU01UUF9TRUNVUkUiLCJjb25zb2xlIiwid2FybiIsImhvc3QiLCJwb3J0Iiwic2VjdXJlIiwiYXV0aCIsInVzZXIiLCJwYXNzIiwiY3JlYXRlVHJhbnNwb3J0IiwiY29ubmVjdGlvblRpbWVvdXQiLCJncmVldGluZ1RpbWVvdXQiLCJzb2NrZXRUaW1lb3V0IiwiZGVidWciLCJsb2dnZXIiLCJsb2ciLCJlcnJvciIsImlzQXZhaWxhYmxlIiwidmVyaWZ5Q29ubmVjdGlvbiIsInZlcmlmeSIsImdlbmVyYXRlRW1haWxUZW1wbGF0ZSIsImRhdGEiLCJwcmlvcml0eUNvbG9ycyIsInVyZ2VudCIsImhpZ2giLCJtZWRpdW0iLCJsb3ciLCJwcmlvcml0eUNvbG9yIiwicHJpb3JpdHkiLCJzdWJqZWN0IiwidGl0bGUiLCJtZXNzYWdlIiwiYWN0aW9uVXJsIiwiYWN0aW9uTGFiZWwiLCJ0eXBlIiwiRGF0ZSIsInRvTG9jYWxlU3RyaW5nIiwiT2JqZWN0IiwiZW50cmllcyIsIm1hcCIsImtleSIsInZhbHVlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImpvaW4iLCJnZXRGdWxsWWVhciIsIk5FWFRfUFVCTElDX0FQUF9VUkwiLCJ1bnN1YnNjcmliZVVybCIsImdlbmVyYXRlUGxhaW5UZXh0RW1haWwiLCJ0ZXh0IiwiZm9yRWFjaCIsInNlbmROb3RpZmljYXRpb24iLCJyZWNpcGllbnRFbWFpbCIsIm5vdGlmaWNhdGlvbiIsInJlY2lwaWVudE5hbWUiLCJhZGRpdGlvbmFsRGF0YSIsImVtYWlsRGF0YSIsImNvbXBhbnlOYW1lIiwic3VwcG9ydEVtYWlsIiwiU1VQUE9SVF9FTUFJTCIsIm1haWxPcHRpb25zIiwiZnJvbSIsIm5hbWUiLCJhZGRyZXNzIiwiRU1BSUxfRlJPTSIsInRvIiwiaHRtbCIsImhlYWRlcnMiLCJpZCIsInJlc3VsdCIsInNlbmRNYWlsIiwibWVzc2FnZUlkIiwic2VuZEJ1bGtOb3RpZmljYXRpb25zIiwicmVjaXBpZW50cyIsInJlc3VsdHMiLCJzdWNjZXNzIiwiZmFpbGVkIiwicmVjaXBpZW50Iiwic2VudCIsImVtYWlsIiwicHVzaCIsIkVycm9yIiwic2VuZFdlbGNvbWVFbWFpbCIsInVzZXJSb2xlIiwibG9naW5VcmwiLCJub3ciLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsImFjY291bnRUeXBlIiwic2VuZFBhc3N3b3JkUmVzZXRFbWFpbCIsInJlc2V0VG9rZW4iLCJyZXNldFVybCIsImZpbmFsUmVzZXRVcmwiLCJleHBpcmVzSW4iLCJzZW5kT3JkZXJDb25maXJtYXRpb25FbWFpbCIsIm9yZGVyRGF0YSIsIm9yZGVySWQiLCJwYXJ0TmFtZSIsInF1YW50aXR5IiwidG90YWxBbW91bnQiLCJlc3RpbWF0ZWREZWxpdmVyeSIsInNlbmRTaGlwbWVudE5vdGlmaWNhdGlvbkVtYWlsIiwic2hpcG1lbnREYXRhIiwic3RhdHVzIiwiYXdiTnVtYmVyIiwic2hpcG1lbnRJZCIsIm51bUJveGVzIiwic2VuZFdhbGxldFRyYW5zYWN0aW9uRW1haWwiLCJ0cmFuc2FjdGlvbkRhdGEiLCJhbW91bnQiLCJiYWxhbmNlQWZ0ZXIiLCJ0cmFuc2FjdGlvbklkIiwicmVmZXJlbmNlIiwicmVhc29uIiwiZW1haWxTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/email.ts\n')},"(api)/./src/lib/notification-manager.ts":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NotificationManager: () => (/* binding */ NotificationManager),\n/* harmony export */   notificationManager: () => (/* binding */ notificationManager),\n/* harmony export */   sendLowStockAlert: () => (/* binding */ sendLowStockAlert),\n/* harmony export */   sendShipmentNotification: () => (/* binding */ sendShipmentNotification),\n/* harmony export */   sendWalletNotification: () => (/* binding */ sendWalletNotification)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ "(api)/./src/lib/prisma.ts");\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/email */ "(api)/./src/lib/email.ts");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_prisma__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nclass NotificationManager {\n    constructor(){}\n    static getInstance() {\n        if (!NotificationManager.instance) {\n            NotificationManager.instance = new NotificationManager();\n        }\n        return NotificationManager.instance;\n    }\n    // Create and send notification\n    async createNotification(userId, type, title, message, data, config = {}) {\n        try {\n            const defaultConfig = {\n                enableEmail: true,\n                enableInApp: true,\n                enableSMS: false,\n                priority: "medium",\n                channels: [\n                    "email",\n                    "in_app"\n                ]\n            };\n            const finalConfig = {\n                ...defaultConfig,\n                ...config\n            };\n            // Get user details\n            const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n                where: {\n                    id: userId\n                },\n                select: {\n                    email: true,\n                    name: true,\n                    phone: true,\n                    role: true\n                }\n            });\n            if (!user) {\n                console.error(`User not found: ${userId}`);\n                return false;\n            }\n            const notificationData = {\n                id: `notif_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n                type,\n                title,\n                message,\n                timestamp: new Date().toISOString(),\n                priority: finalConfig.priority,\n                data,\n                actionUrl: data?.actionUrl,\n                actionLabel: data?.actionLabel\n            };\n            // Create in-app notification if enabled\n            if (finalConfig.enableInApp && finalConfig.channels.includes("in_app")) {\n                await this.createInAppNotification(userId, notificationData);\n            }\n            // Send email notification if enabled\n            if (finalConfig.enableEmail && finalConfig.channels.includes("email") && user.email) {\n                await this.sendEmailNotification(user.email, user.name, notificationData);\n            }\n            // Send SMS notification if enabled (placeholder for future implementation)\n            if (finalConfig.enableSMS && finalConfig.channels.includes("sms") && user.phone) {\n                await this.sendSMSNotification(user.phone, notificationData);\n            }\n            return true;\n        } catch (error) {\n            console.error("Error creating notification:", error);\n            return false;\n        }\n    }\n    // Create in-app notification\n    async createInAppNotification(userId, notification) {\n        try {\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.notification.create({\n                data: {\n                    id: notification.id,\n                    recipients: [\n                        userId\n                    ],\n                    type: notification.type,\n                    title: notification.title,\n                    message: notification.message,\n                    data: notification.data ? JSON.stringify(notification.data) : null,\n                    priority: notification.priority,\n                    read: false,\n                    actionUrl: notification.actionUrl,\n                    createdAt: new Date(notification.timestamp)\n                }\n            });\n        } catch (error) {\n            console.error("Error creating in-app notification:", error);\n            throw error;\n        }\n    }\n    // Send email notification\n    async sendEmailNotification(email, name, notification) {\n        try {\n            await _lib_email__WEBPACK_IMPORTED_MODULE_1__["default"].sendNotification(email, notification, name);\n        } catch (error) {\n            console.error("Error sending email notification:", error);\n        // Don\'t throw error to prevent blocking other notification channels\n        }\n    }\n    // Send SMS notification (placeholder)\n    async sendSMSNotification(phone, notification) {\n        try {\n            // SMS implementation would go here\n            console.log(`SMS notification to ${phone}: ${notification.title}`);\n        } catch (error) {\n            console.error("Error sending SMS notification:", error);\n        }\n    }\n    // Shipment status change notification\n    async notifyShipmentStatusChange(shipmentId, newStatus, recipientUserId, additionalData) {\n        try {\n            const shipment = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.shipment.findUnique({\n                where: {\n                    id: shipmentId\n                },\n                include: {\n                    serviceCenter: {\n                        select: {\n                            name: true\n                        }\n                    },\n                    distributor: {\n                        select: {\n                            name: true\n                        }\n                    },\n                    brand: {\n                        select: {\n                            name: true\n                        }\n                    }\n                }\n            });\n            if (!shipment) {\n                console.error(`Shipment not found: ${shipmentId}`);\n                return false;\n            }\n            const recipientName = shipment.serviceCenter?.name || shipment.distributor?.name || "Customer";\n            const statusMessages = {\n                "INITIATED": "Your shipment has been initiated and is being prepared.",\n                "DISPATCHED": "Your shipment has been dispatched and is on its way.",\n                "IN_TRANSIT": "Your shipment is in transit.",\n                "OUT_FOR_DELIVERY": "Your shipment is out for delivery.",\n                "DELIVERED": "Your shipment has been delivered successfully.",\n                "CANCELLED": "Your shipment has been cancelled.",\n                "RETURNED": "Your shipment has been returned."\n            };\n            const message = statusMessages[newStatus] || `Your shipment status has been updated to ${newStatus}.`;\n            const priority = newStatus === "DELIVERED" ? "high" : newStatus === "CANCELLED" ? "high" : "medium";\n            return await this.createNotification(recipientUserId, "shipment_status", `Shipment Update - ${newStatus}`, message, {\n                shipmentId,\n                status: newStatus,\n                awbNumber: shipment.awbNumber,\n                brandName: shipment.brand.name,\n                recipientName,\n                actionUrl: `/dashboard?tab=shipments&shipment=${shipmentId}`,\n                actionLabel: "View Shipment",\n                ...additionalData\n            }, {\n                priority: priority\n            });\n        } catch (error) {\n            console.error("Error sending shipment status notification:", error);\n            return false;\n        }\n    }\n    // Wallet transaction notification\n    async notifyWalletTransaction(userId, transactionType, amount, balanceAfter, reference, reason) {\n        try {\n            const title = transactionType === "CREDIT" ? "Wallet Credited" : "Wallet Debited";\n            const message = `₹${amount} has been ${transactionType === "CREDIT" ? "added to" : "deducted from"} your wallet. Current balance: ₹${balanceAfter}`;\n            return await this.createNotification(userId, "wallet_transaction", title, message, {\n                transactionType,\n                amount,\n                balanceAfter,\n                reference,\n                reason,\n                actionUrl: "/dashboard?tab=wallet",\n                actionLabel: "View Wallet"\n            }, {\n                priority: transactionType === "DEBIT" ? "medium" : "low"\n            });\n        } catch (error) {\n            console.error("Error sending wallet transaction notification:", error);\n            return false;\n        }\n    }\n    // Low stock alert notification\n    async notifyLowStock(brandUserId, partId, partName, partCode, currentStock, minStockLevel) {\n        try {\n            const severity = currentStock === 0 ? "urgent" : "high";\n            const title = currentStock === 0 ? "Out of Stock Alert" : "Low Stock Alert";\n            const message = currentStock === 0 ? `${partName} (${partCode}) is out of stock. Immediate restocking required.` : `${partName} (${partCode}) is running low. Current stock: ${currentStock}, Minimum: ${minStockLevel}`;\n            return await this.createNotification(brandUserId, "low_stock", title, message, {\n                partId,\n                partName,\n                partCode,\n                currentStock,\n                minStockLevel,\n                actionUrl: "/dashboard?tab=inventory",\n                actionLabel: "Manage Inventory"\n            }, {\n                priority: severity\n            });\n        } catch (error) {\n            console.error("Error sending low stock notification:", error);\n            return false;\n        }\n    }\n    // Access request notification\n    async notifyAccessRequest(brandUserId, requesterId, requesterName, requesterRole, requestId) {\n        try {\n            const title = "New Access Request";\n            const message = `${requesterName} has requested access as a ${requesterRole.toLowerCase().replace("_", " ")}. Please review and approve/reject the request.`;\n            return await this.createNotification(brandUserId, "access_request", title, message, {\n                requesterId,\n                requesterName,\n                requesterRole,\n                requestId,\n                actionUrl: "/dashboard?tab=network",\n                actionLabel: "Review Request"\n            }, {\n                priority: "medium"\n            });\n        } catch (error) {\n            console.error("Error sending access request notification:", error);\n            return false;\n        }\n    }\n    // Return request notification\n    async notifyReturnRequest(brandUserId, returnRequestId, partName, serviceCenterName, reason) {\n        try {\n            const title = "New Return Request";\n            const message = `${serviceCenterName} has requested to return ${partName}. Reason: ${reason}`;\n            return await this.createNotification(brandUserId, "return_request", title, message, {\n                returnRequestId,\n                partName,\n                serviceCenterName,\n                reason,\n                actionUrl: "/dashboard?tab=returns",\n                actionLabel: "Review Return"\n            }, {\n                priority: "medium"\n            });\n        } catch (error) {\n            console.error("Error sending return request notification:", error);\n            return false;\n        }\n    }\n    // System alert notification\n    async notifySystemAlert(userIds, alertType, title, message, severity = "medium") {\n        try {\n            const promises = userIds.map((userId)=>this.createNotification(userId, "system_alert", title, message, {\n                    alertType,\n                    actionUrl: "/dashboard",\n                    actionLabel: "View Dashboard"\n                }, {\n                    priority: severity\n                }));\n            const results = await Promise.allSettled(promises);\n            const successCount = results.filter((r)=>r.status === "fulfilled" && r.value).length;\n            console.log(`System alert sent to ${successCount}/${userIds.length} users`);\n            return successCount > 0;\n        } catch (error) {\n            console.error("Error sending system alert:", error);\n            return false;\n        }\n    }\n    // Mark notification as read\n    async markAsRead(notificationId, userId) {\n        try {\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.notification.updateMany({\n                where: {\n                    id: notificationId,\n                    recipients: {\n                        has: userId\n                    }\n                },\n                data: {\n                    read: true,\n                    readAt: new Date()\n                }\n            });\n            return true;\n        } catch (error) {\n            console.error("Error marking notification as read:", error);\n            return false;\n        }\n    }\n    // Mark all notifications as read for a user\n    async markAllAsRead(userId) {\n        try {\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.notification.updateMany({\n                where: {\n                    recipients: {\n                        has: userId\n                    },\n                    read: false\n                },\n                data: {\n                    read: true,\n                    readAt: new Date()\n                }\n            });\n            return true;\n        } catch (error) {\n            console.error("Error marking all notifications as read:", error);\n            return false;\n        }\n    }\n    // Get user notifications\n    async getUserNotifications(userId, limit = 20, offset = 0, unreadOnly = false) {\n        try {\n            const notifications = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.notification.findMany({\n                where: {\n                    recipients: {\n                        has: userId\n                    },\n                    ...unreadOnly && {\n                        read: false\n                    }\n                },\n                orderBy: {\n                    createdAt: "desc"\n                },\n                take: limit,\n                skip: offset\n            });\n            return notifications.map((notif)=>({\n                    ...notif,\n                    data: notif.data ? JSON.parse(notif.data) : null\n                }));\n        } catch (error) {\n            console.error("Error fetching user notifications:", error);\n            return [];\n        }\n    }\n    // Get unread count\n    async getUnreadCount(userId) {\n        try {\n            return await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.notification.count({\n                where: {\n                    recipients: {\n                        has: userId\n                    },\n                    read: false\n                }\n            });\n        } catch (error) {\n            console.error("Error getting unread count:", error);\n            return 0;\n        }\n    }\n    // Clean up old notifications (older than 90 days)\n    async cleanupOldNotifications() {\n        try {\n            const ninetyDaysAgo = new Date();\n            ninetyDaysAgo.setDate(ninetyDaysAgo.getDate() - 90);\n            const result = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.notification.deleteMany({\n                where: {\n                    createdAt: {\n                        lt: ninetyDaysAgo\n                    }\n                }\n            });\n            console.log(`Cleaned up ${result.count} old notifications`);\n            return result.count;\n        } catch (error) {\n            console.error("Error cleaning up old notifications:", error);\n            return 0;\n        }\n    }\n}\n// Export singleton instance\nconst notificationManager = NotificationManager.getInstance();\n// Utility functions\nasync function sendShipmentNotification(shipmentId, newStatus, recipientUserId, additionalData) {\n    return notificationManager.notifyShipmentStatusChange(shipmentId, newStatus, recipientUserId, additionalData);\n}\nasync function sendWalletNotification(userId, transactionType, amount, balanceAfter, reference, reason) {\n    return notificationManager.notifyWalletTransaction(userId, transactionType, amount, balanceAfter, reference, reason);\n}\nasync function sendLowStockAlert(brandUserId, partId, partName, partCode, currentStock, minStockLevel) {\n    return notificationManager.notifyLowStock(brandUserId, partId, partName, partCode, currentStock, minStockLevel);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFDdkJDLGNBQW9CO0lBRXBCLE9BQU8wRSxvQkFBb0I5RSwwQkFBMEIsQ0FBQ0MsWUFBWUMsV0FBV0MsaUJBQWlCQztBQUNoRztBQUVPLGVBQWU0RSx1QkFDcEJoSSxNQUFjLEVBQ2RnRSxlQUFtQyxFQUNuQ0MsTUFBYyxFQUNkQyxZQUFvQixFQUNwQkMsU0FBa0IsRUFDbEJDLE1BQWU7SUFFZixPQUFPMEQsb0JBQW9CL0QsdUJBQXVCLENBQUMvRCxRQUFRZ0UsaUJBQWlCQyxRQUFRQyxjQUFjQyxXQUFXQztBQUMvRztBQUVPLGVBQWU2RCxrQkFDcEIzRCxXQUFtQixFQUNuQkMsTUFBYyxFQUNkQyxRQUFnQixFQUNoQkMsUUFBZ0IsRUFDaEJDLFlBQW9CLEVBQ3BCQyxhQUFxQjtJQUVyQixPQUFPbUQsb0JBQW9CekQsY0FBYyxDQUFDQyxhQUFhQyxRQUFRQyxVQUFVQyxVQUFVQyxjQUFjQztBQUNuRyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtcGFnZXMtY2hha3JhLy4vc3JjL2xpYi9ub3RpZmljYXRpb24tbWFuYWdlci50cz8xODBmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XHJcbmltcG9ydCBlbWFpbFNlcnZpY2UgZnJvbSAnQC9saWIvZW1haWwnO1xyXG5pbXBvcnQgeyBOb3RpZmljYXRpb25EYXRhIH0gZnJvbSAnQC9saWIvd2Vic29ja2V0JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uQ29uZmlnIHtcclxuICBlbmFibGVFbWFpbDogYm9vbGVhbjtcclxuICBlbmFibGVJbkFwcDogYm9vbGVhbjtcclxuICBlbmFibGVTTVM6IGJvb2xlYW47XHJcbiAgcHJpb3JpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAndXJnZW50JztcclxuICBjaGFubmVsczogKCdlbWFpbCcgfCAnaW5fYXBwJyB8ICdzbXMnKVtdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE5vdGlmaWNhdGlvblRlbXBsYXRlIHtcclxuICB0eXBlOiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgYWN0aW9uVXJsPzogc3RyaW5nO1xyXG4gIGFjdGlvbkxhYmVsPzogc3RyaW5nO1xyXG4gIGVtYWlsVGVtcGxhdGU/OiBzdHJpbmc7XHJcbiAgc21zVGVtcGxhdGU/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25NYW5hZ2VyIHtcclxuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogTm90aWZpY2F0aW9uTWFuYWdlcjtcclxuICBcclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBOb3RpZmljYXRpb25NYW5hZ2VyIHtcclxuICAgIGlmICghTm90aWZpY2F0aW9uTWFuYWdlci5pbnN0YW5jZSkge1xyXG4gICAgICBOb3RpZmljYXRpb25NYW5hZ2VyLmluc3RhbmNlID0gbmV3IE5vdGlmaWNhdGlvbk1hbmFnZXIoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBOb3RpZmljYXRpb25NYW5hZ2VyLmluc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIGFuZCBzZW5kIG5vdGlmaWNhdGlvblxyXG4gIGFzeW5jIGNyZWF0ZU5vdGlmaWNhdGlvbihcclxuICAgIHVzZXJJZDogc3RyaW5nLFxyXG4gICAgdHlwZTogc3RyaW5nLFxyXG4gICAgdGl0bGU6IHN0cmluZyxcclxuICAgIG1lc3NhZ2U6IHN0cmluZyxcclxuICAgIGRhdGE/OiBhbnksXHJcbiAgICBjb25maWc6IFBhcnRpYWw8Tm90aWZpY2F0aW9uQ29uZmlnPiA9IHt9XHJcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkZWZhdWx0Q29uZmlnOiBOb3RpZmljYXRpb25Db25maWcgPSB7XHJcbiAgICAgICAgZW5hYmxlRW1haWw6IHRydWUsXHJcbiAgICAgICAgZW5hYmxlSW5BcHA6IHRydWUsXHJcbiAgICAgICAgZW5hYmxlU01TOiBmYWxzZSxcclxuICAgICAgICBwcmlvcml0eTogJ21lZGl1bScsXHJcbiAgICAgICAgY2hhbm5lbHM6IFsnZW1haWwnLCAnaW5fYXBwJ11cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGZpbmFsQ29uZmlnID0geyAuLi5kZWZhdWx0Q29uZmlnLCAuLi5jb25maWcgfTtcclxuXHJcbiAgICAgIC8vIEdldCB1c2VyIGRldGFpbHNcclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcclxuICAgICAgICBzZWxlY3Q6IHsgZW1haWw6IHRydWUsIG5hbWU6IHRydWUsIHBob25lOiB0cnVlLCByb2xlOiB0cnVlIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBVc2VyIG5vdCBmb3VuZDogJHt1c2VySWR9YCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBub3RpZmljYXRpb25EYXRhOiBOb3RpZmljYXRpb25EYXRhID0ge1xyXG4gICAgICAgIGlkOiBgbm90aWZfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBwcmlvcml0eTogZmluYWxDb25maWcucHJpb3JpdHksXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBhY3Rpb25Vcmw6IGRhdGE/LmFjdGlvblVybCxcclxuICAgICAgICBhY3Rpb25MYWJlbDogZGF0YT8uYWN0aW9uTGFiZWxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBpbi1hcHAgbm90aWZpY2F0aW9uIGlmIGVuYWJsZWRcclxuICAgICAgaWYgKGZpbmFsQ29uZmlnLmVuYWJsZUluQXBwICYmIGZpbmFsQ29uZmlnLmNoYW5uZWxzLmluY2x1ZGVzKCdpbl9hcHAnKSkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlSW5BcHBOb3RpZmljYXRpb24odXNlcklkLCBub3RpZmljYXRpb25EYXRhKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU2VuZCBlbWFpbCBub3RpZmljYXRpb24gaWYgZW5hYmxlZFxyXG4gICAgICBpZiAoZmluYWxDb25maWcuZW5hYmxlRW1haWwgJiYgZmluYWxDb25maWcuY2hhbm5lbHMuaW5jbHVkZXMoJ2VtYWlsJykgJiYgdXNlci5lbWFpbCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZEVtYWlsTm90aWZpY2F0aW9uKHVzZXIuZW1haWwsIHVzZXIubmFtZSwgbm90aWZpY2F0aW9uRGF0YSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFNlbmQgU01TIG5vdGlmaWNhdGlvbiBpZiBlbmFibGVkIChwbGFjZWhvbGRlciBmb3IgZnV0dXJlIGltcGxlbWVudGF0aW9uKVxyXG4gICAgICBpZiAoZmluYWxDb25maWcuZW5hYmxlU01TICYmIGZpbmFsQ29uZmlnLmNoYW5uZWxzLmluY2x1ZGVzKCdzbXMnKSAmJiB1c2VyLnBob25lKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kU01TTm90aWZpY2F0aW9uKHVzZXIucGhvbmUsIG5vdGlmaWNhdGlvbkRhdGEpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG5vdGlmaWNhdGlvbjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENyZWF0ZSBpbi1hcHAgbm90aWZpY2F0aW9uXHJcbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVJbkFwcE5vdGlmaWNhdGlvbih1c2VySWQ6IHN0cmluZywgbm90aWZpY2F0aW9uOiBOb3RpZmljYXRpb25EYXRhKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgaWQ6IG5vdGlmaWNhdGlvbi5pZCxcclxuICAgICAgICAgIHJlY2lwaWVudHM6IFt1c2VySWRdLFxyXG4gICAgICAgICAgdHlwZTogbm90aWZpY2F0aW9uLnR5cGUsXHJcbiAgICAgICAgICB0aXRsZTogbm90aWZpY2F0aW9uLnRpdGxlLFxyXG4gICAgICAgICAgbWVzc2FnZTogbm90aWZpY2F0aW9uLm1lc3NhZ2UsXHJcbiAgICAgICAgICBkYXRhOiBub3RpZmljYXRpb24uZGF0YSA/IEpTT04uc3RyaW5naWZ5KG5vdGlmaWNhdGlvbi5kYXRhKSA6IG51bGwsXHJcbiAgICAgICAgICBwcmlvcml0eTogbm90aWZpY2F0aW9uLnByaW9yaXR5LFxyXG4gICAgICAgICAgcmVhZDogZmFsc2UsXHJcbiAgICAgICAgICBhY3Rpb25Vcmw6IG5vdGlmaWNhdGlvbi5hY3Rpb25VcmwsXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKG5vdGlmaWNhdGlvbi50aW1lc3RhbXApXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGluLWFwcCBub3RpZmljYXRpb246JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFNlbmQgZW1haWwgbm90aWZpY2F0aW9uXHJcbiAgcHJpdmF0ZSBhc3luYyBzZW5kRW1haWxOb3RpZmljYXRpb24oXHJcbiAgICBlbWFpbDogc3RyaW5nLCBcclxuICAgIG5hbWU6IHN0cmluZywgXHJcbiAgICBub3RpZmljYXRpb246IE5vdGlmaWNhdGlvbkRhdGFcclxuICApOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGVtYWlsU2VydmljZS5zZW5kTm90aWZpY2F0aW9uKGVtYWlsLCBub3RpZmljYXRpb24sIG5hbWUpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBlbWFpbCBub3RpZmljYXRpb246JywgZXJyb3IpO1xyXG4gICAgICAvLyBEb24ndCB0aHJvdyBlcnJvciB0byBwcmV2ZW50IGJsb2NraW5nIG90aGVyIG5vdGlmaWNhdGlvbiBjaGFubmVsc1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2VuZCBTTVMgbm90aWZpY2F0aW9uIChwbGFjZWhvbGRlcilcclxuICBwcml2YXRlIGFzeW5jIHNlbmRTTVNOb3RpZmljYXRpb24ocGhvbmU6IHN0cmluZywgbm90aWZpY2F0aW9uOiBOb3RpZmljYXRpb25EYXRhKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBTTVMgaW1wbGVtZW50YXRpb24gd291bGQgZ28gaGVyZVxyXG4gICAgICBjb25zb2xlLmxvZyhgU01TIG5vdGlmaWNhdGlvbiB0byAke3Bob25lfTogJHtub3RpZmljYXRpb24udGl0bGV9YCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIFNNUyBub3RpZmljYXRpb246JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2hpcG1lbnQgc3RhdHVzIGNoYW5nZSBub3RpZmljYXRpb25cclxuICBhc3luYyBub3RpZnlTaGlwbWVudFN0YXR1c0NoYW5nZShcclxuICAgIHNoaXBtZW50SWQ6IHN0cmluZyxcclxuICAgIG5ld1N0YXR1czogc3RyaW5nLFxyXG4gICAgcmVjaXBpZW50VXNlcklkOiBzdHJpbmcsXHJcbiAgICBhZGRpdGlvbmFsRGF0YT86IGFueVxyXG4gICk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2hpcG1lbnQgPSBhd2FpdCBwcmlzbWEuc2hpcG1lbnQuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHNoaXBtZW50SWQgfSxcclxuICAgICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgICBzZXJ2aWNlQ2VudGVyOiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfSxcclxuICAgICAgICAgIGRpc3RyaWJ1dG9yOiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfSxcclxuICAgICAgICAgIGJyYW5kOiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlIH0gfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXNoaXBtZW50KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgU2hpcG1lbnQgbm90IGZvdW5kOiAke3NoaXBtZW50SWR9YCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCByZWNpcGllbnROYW1lID0gc2hpcG1lbnQuc2VydmljZUNlbnRlcj8ubmFtZSB8fCBzaGlwbWVudC5kaXN0cmlidXRvcj8ubmFtZSB8fCAnQ3VzdG9tZXInO1xyXG4gICAgICBjb25zdCBzdGF0dXNNZXNzYWdlcyA9IHtcclxuICAgICAgICAnSU5JVElBVEVEJzogJ1lvdXIgc2hpcG1lbnQgaGFzIGJlZW4gaW5pdGlhdGVkIGFuZCBpcyBiZWluZyBwcmVwYXJlZC4nLFxyXG4gICAgICAgICdESVNQQVRDSEVEJzogJ1lvdXIgc2hpcG1lbnQgaGFzIGJlZW4gZGlzcGF0Y2hlZCBhbmQgaXMgb24gaXRzIHdheS4nLFxyXG4gICAgICAgICdJTl9UUkFOU0lUJzogJ1lvdXIgc2hpcG1lbnQgaXMgaW4gdHJhbnNpdC4nLFxyXG4gICAgICAgICdPVVRfRk9SX0RFTElWRVJZJzogJ1lvdXIgc2hpcG1lbnQgaXMgb3V0IGZvciBkZWxpdmVyeS4nLFxyXG4gICAgICAgICdERUxJVkVSRUQnOiAnWW91ciBzaGlwbWVudCBoYXMgYmVlbiBkZWxpdmVyZWQgc3VjY2Vzc2Z1bGx5LicsXHJcbiAgICAgICAgJ0NBTkNFTExFRCc6ICdZb3VyIHNoaXBtZW50IGhhcyBiZWVuIGNhbmNlbGxlZC4nLFxyXG4gICAgICAgICdSRVRVUk5FRCc6ICdZb3VyIHNoaXBtZW50IGhhcyBiZWVuIHJldHVybmVkLidcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBzdGF0dXNNZXNzYWdlc1tuZXdTdGF0dXMgYXMga2V5b2YgdHlwZW9mIHN0YXR1c01lc3NhZ2VzXSB8fCBcclxuICAgICAgICAgICAgICAgICAgICAgYFlvdXIgc2hpcG1lbnQgc3RhdHVzIGhhcyBiZWVuIHVwZGF0ZWQgdG8gJHtuZXdTdGF0dXN9LmA7XHJcblxyXG4gICAgICBjb25zdCBwcmlvcml0eSA9IG5ld1N0YXR1cyA9PT0gJ0RFTElWRVJFRCcgPyAnaGlnaCcgOiBcclxuICAgICAgICAgICAgICAgICAgICAgIG5ld1N0YXR1cyA9PT0gJ0NBTkNFTExFRCcgPyAnaGlnaCcgOiAnbWVkaXVtJztcclxuXHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbihcclxuICAgICAgICByZWNpcGllbnRVc2VySWQsXHJcbiAgICAgICAgJ3NoaXBtZW50X3N0YXR1cycsXHJcbiAgICAgICAgYFNoaXBtZW50IFVwZGF0ZSAtICR7bmV3U3RhdHVzfWAsXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBzaGlwbWVudElkLFxyXG4gICAgICAgICAgc3RhdHVzOiBuZXdTdGF0dXMsXHJcbiAgICAgICAgICBhd2JOdW1iZXI6IHNoaXBtZW50LmF3Yk51bWJlcixcclxuICAgICAgICAgIGJyYW5kTmFtZTogc2hpcG1lbnQuYnJhbmQubmFtZSxcclxuICAgICAgICAgIHJlY2lwaWVudE5hbWUsXHJcbiAgICAgICAgICBhY3Rpb25Vcmw6IGAvZGFzaGJvYXJkP3RhYj1zaGlwbWVudHMmc2hpcG1lbnQ9JHtzaGlwbWVudElkfWAsXHJcbiAgICAgICAgICBhY3Rpb25MYWJlbDogJ1ZpZXcgU2hpcG1lbnQnLFxyXG4gICAgICAgICAgLi4uYWRkaXRpb25hbERhdGFcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgcHJpb3JpdHk6IHByaW9yaXR5IGFzICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAndXJnZW50JyB9XHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIHNoaXBtZW50IHN0YXR1cyBub3RpZmljYXRpb246JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBXYWxsZXQgdHJhbnNhY3Rpb24gbm90aWZpY2F0aW9uXHJcbiAgYXN5bmMgbm90aWZ5V2FsbGV0VHJhbnNhY3Rpb24oXHJcbiAgICB1c2VySWQ6IHN0cmluZyxcclxuICAgIHRyYW5zYWN0aW9uVHlwZTogJ0NSRURJVCcgfCAnREVCSVQnLFxyXG4gICAgYW1vdW50OiBudW1iZXIsXHJcbiAgICBiYWxhbmNlQWZ0ZXI6IG51bWJlcixcclxuICAgIHJlZmVyZW5jZT86IHN0cmluZyxcclxuICAgIHJlYXNvbj86IHN0cmluZ1xyXG4gICk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdGl0bGUgPSB0cmFuc2FjdGlvblR5cGUgPT09ICdDUkVESVQnID8gJ1dhbGxldCBDcmVkaXRlZCcgOiAnV2FsbGV0IERlYml0ZWQnO1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gYOKCuSR7YW1vdW50fSBoYXMgYmVlbiAke3RyYW5zYWN0aW9uVHlwZSA9PT0gJ0NSRURJVCcgPyAnYWRkZWQgdG8nIDogJ2RlZHVjdGVkIGZyb20nfSB5b3VyIHdhbGxldC4gQ3VycmVudCBiYWxhbmNlOiDigrkke2JhbGFuY2VBZnRlcn1gO1xyXG5cclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICAnd2FsbGV0X3RyYW5zYWN0aW9uJyxcclxuICAgICAgICB0aXRsZSxcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHRyYW5zYWN0aW9uVHlwZSxcclxuICAgICAgICAgIGFtb3VudCxcclxuICAgICAgICAgIGJhbGFuY2VBZnRlcixcclxuICAgICAgICAgIHJlZmVyZW5jZSxcclxuICAgICAgICAgIHJlYXNvbixcclxuICAgICAgICAgIGFjdGlvblVybDogJy9kYXNoYm9hcmQ/dGFiPXdhbGxldCcsXHJcbiAgICAgICAgICBhY3Rpb25MYWJlbDogJ1ZpZXcgV2FsbGV0J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBwcmlvcml0eTogdHJhbnNhY3Rpb25UeXBlID09PSAnREVCSVQnID8gJ21lZGl1bScgOiAnbG93JyB9XHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIHdhbGxldCB0cmFuc2FjdGlvbiBub3RpZmljYXRpb246JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBMb3cgc3RvY2sgYWxlcnQgbm90aWZpY2F0aW9uXHJcbiAgYXN5bmMgbm90aWZ5TG93U3RvY2soXHJcbiAgICBicmFuZFVzZXJJZDogc3RyaW5nLFxyXG4gICAgcGFydElkOiBzdHJpbmcsXHJcbiAgICBwYXJ0TmFtZTogc3RyaW5nLFxyXG4gICAgcGFydENvZGU6IHN0cmluZyxcclxuICAgIGN1cnJlbnRTdG9jazogbnVtYmVyLFxyXG4gICAgbWluU3RvY2tMZXZlbDogbnVtYmVyXHJcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzZXZlcml0eSA9IGN1cnJlbnRTdG9jayA9PT0gMCA/ICd1cmdlbnQnIDogJ2hpZ2gnO1xyXG4gICAgICBjb25zdCB0aXRsZSA9IGN1cnJlbnRTdG9jayA9PT0gMCA/ICdPdXQgb2YgU3RvY2sgQWxlcnQnIDogJ0xvdyBTdG9jayBBbGVydCc7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjdXJyZW50U3RvY2sgPT09IDAgXHJcbiAgICAgICAgPyBgJHtwYXJ0TmFtZX0gKCR7cGFydENvZGV9KSBpcyBvdXQgb2Ygc3RvY2suIEltbWVkaWF0ZSByZXN0b2NraW5nIHJlcXVpcmVkLmBcclxuICAgICAgICA6IGAke3BhcnROYW1lfSAoJHtwYXJ0Q29kZX0pIGlzIHJ1bm5pbmcgbG93LiBDdXJyZW50IHN0b2NrOiAke2N1cnJlbnRTdG9ja30sIE1pbmltdW06ICR7bWluU3RvY2tMZXZlbH1gO1xyXG5cclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKFxyXG4gICAgICAgIGJyYW5kVXNlcklkLFxyXG4gICAgICAgICdsb3dfc3RvY2snLFxyXG4gICAgICAgIHRpdGxlLFxyXG4gICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcGFydElkLFxyXG4gICAgICAgICAgcGFydE5hbWUsXHJcbiAgICAgICAgICBwYXJ0Q29kZSxcclxuICAgICAgICAgIGN1cnJlbnRTdG9jayxcclxuICAgICAgICAgIG1pblN0b2NrTGV2ZWwsXHJcbiAgICAgICAgICBhY3Rpb25Vcmw6ICcvZGFzaGJvYXJkP3RhYj1pbnZlbnRvcnknLFxyXG4gICAgICAgICAgYWN0aW9uTGFiZWw6ICdNYW5hZ2UgSW52ZW50b3J5J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBwcmlvcml0eTogc2V2ZXJpdHkgfVxyXG4gICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBsb3cgc3RvY2sgbm90aWZpY2F0aW9uOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQWNjZXNzIHJlcXVlc3Qgbm90aWZpY2F0aW9uXHJcbiAgYXN5bmMgbm90aWZ5QWNjZXNzUmVxdWVzdChcclxuICAgIGJyYW5kVXNlcklkOiBzdHJpbmcsXHJcbiAgICByZXF1ZXN0ZXJJZDogc3RyaW5nLFxyXG4gICAgcmVxdWVzdGVyTmFtZTogc3RyaW5nLFxyXG4gICAgcmVxdWVzdGVyUm9sZTogc3RyaW5nLFxyXG4gICAgcmVxdWVzdElkOiBzdHJpbmdcclxuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRpdGxlID0gJ05ldyBBY2Nlc3MgUmVxdWVzdCc7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgJHtyZXF1ZXN0ZXJOYW1lfSBoYXMgcmVxdWVzdGVkIGFjY2VzcyBhcyBhICR7cmVxdWVzdGVyUm9sZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ18nLCAnICcpfS4gUGxlYXNlIHJldmlldyBhbmQgYXBwcm92ZS9yZWplY3QgdGhlIHJlcXVlc3QuYDtcclxuXHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbihcclxuICAgICAgICBicmFuZFVzZXJJZCxcclxuICAgICAgICAnYWNjZXNzX3JlcXVlc3QnLFxyXG4gICAgICAgIHRpdGxlLFxyXG4gICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcmVxdWVzdGVySWQsXHJcbiAgICAgICAgICByZXF1ZXN0ZXJOYW1lLFxyXG4gICAgICAgICAgcmVxdWVzdGVyUm9sZSxcclxuICAgICAgICAgIHJlcXVlc3RJZCxcclxuICAgICAgICAgIGFjdGlvblVybDogJy9kYXNoYm9hcmQ/dGFiPW5ldHdvcmsnLFxyXG4gICAgICAgICAgYWN0aW9uTGFiZWw6ICdSZXZpZXcgUmVxdWVzdCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgcHJpb3JpdHk6ICdtZWRpdW0nIH1cclxuICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgYWNjZXNzIHJlcXVlc3Qgbm90aWZpY2F0aW9uOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gUmV0dXJuIHJlcXVlc3Qgbm90aWZpY2F0aW9uXHJcbiAgYXN5bmMgbm90aWZ5UmV0dXJuUmVxdWVzdChcclxuICAgIGJyYW5kVXNlcklkOiBzdHJpbmcsXHJcbiAgICByZXR1cm5SZXF1ZXN0SWQ6IHN0cmluZyxcclxuICAgIHBhcnROYW1lOiBzdHJpbmcsXHJcbiAgICBzZXJ2aWNlQ2VudGVyTmFtZTogc3RyaW5nLFxyXG4gICAgcmVhc29uOiBzdHJpbmdcclxuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRpdGxlID0gJ05ldyBSZXR1cm4gUmVxdWVzdCc7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgJHtzZXJ2aWNlQ2VudGVyTmFtZX0gaGFzIHJlcXVlc3RlZCB0byByZXR1cm4gJHtwYXJ0TmFtZX0uIFJlYXNvbjogJHtyZWFzb259YDtcclxuXHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbihcclxuICAgICAgICBicmFuZFVzZXJJZCxcclxuICAgICAgICAncmV0dXJuX3JlcXVlc3QnLFxyXG4gICAgICAgIHRpdGxlLFxyXG4gICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcmV0dXJuUmVxdWVzdElkLFxyXG4gICAgICAgICAgcGFydE5hbWUsXHJcbiAgICAgICAgICBzZXJ2aWNlQ2VudGVyTmFtZSxcclxuICAgICAgICAgIHJlYXNvbixcclxuICAgICAgICAgIGFjdGlvblVybDogJy9kYXNoYm9hcmQ/dGFiPXJldHVybnMnLFxyXG4gICAgICAgICAgYWN0aW9uTGFiZWw6ICdSZXZpZXcgUmV0dXJuJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBwcmlvcml0eTogJ21lZGl1bScgfVxyXG4gICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyByZXR1cm4gcmVxdWVzdCBub3RpZmljYXRpb246JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTeXN0ZW0gYWxlcnQgbm90aWZpY2F0aW9uXHJcbiAgYXN5bmMgbm90aWZ5U3lzdGVtQWxlcnQoXHJcbiAgICB1c2VySWRzOiBzdHJpbmdbXSxcclxuICAgIGFsZXJ0VHlwZTogc3RyaW5nLFxyXG4gICAgdGl0bGU6IHN0cmluZyxcclxuICAgIG1lc3NhZ2U6IHN0cmluZyxcclxuICAgIHNldmVyaXR5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnIHwgJ3VyZ2VudCcgPSAnbWVkaXVtJ1xyXG4gICk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcHJvbWlzZXMgPSB1c2VySWRzLm1hcCh1c2VySWQgPT4gXHJcbiAgICAgICAgdGhpcy5jcmVhdGVOb3RpZmljYXRpb24oXHJcbiAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAnc3lzdGVtX2FsZXJ0JyxcclxuICAgICAgICAgIHRpdGxlLFxyXG4gICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgYWxlcnRUeXBlLFxyXG4gICAgICAgICAgICBhY3Rpb25Vcmw6ICcvZGFzaGJvYXJkJyxcclxuICAgICAgICAgICAgYWN0aW9uTGFiZWw6ICdWaWV3IERhc2hib2FyZCdcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7IHByaW9yaXR5OiBzZXZlcml0eSB9XHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChwcm9taXNlcyk7XHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3NDb3VudCA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5zdGF0dXMgPT09ICdmdWxmaWxsZWQnICYmIHIudmFsdWUpLmxlbmd0aDtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGBTeXN0ZW0gYWxlcnQgc2VudCB0byAke3N1Y2Nlc3NDb3VudH0vJHt1c2VySWRzLmxlbmd0aH0gdXNlcnNgKTtcclxuICAgICAgcmV0dXJuIHN1Y2Nlc3NDb3VudCA+IDA7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIHN5c3RlbSBhbGVydDonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIE1hcmsgbm90aWZpY2F0aW9uIGFzIHJlYWRcclxuICBhc3luYyBtYXJrQXNSZWFkKG5vdGlmaWNhdGlvbklkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBpZDogbm90aWZpY2F0aW9uSWQsXHJcbiAgICAgICAgICByZWNpcGllbnRzOiB7XHJcbiAgICAgICAgICAgIGhhczogdXNlcklkXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZWFkOiB0cnVlLFxyXG4gICAgICAgICAgcmVhZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYXJraW5nIG5vdGlmaWNhdGlvbiBhcyByZWFkOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTWFyayBhbGwgbm90aWZpY2F0aW9ucyBhcyByZWFkIGZvciBhIHVzZXJcclxuICBhc3luYyBtYXJrQWxsQXNSZWFkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZU1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICByZWNpcGllbnRzOiB7XHJcbiAgICAgICAgICAgIGhhczogdXNlcklkXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmVhZDogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHJlYWQ6IHRydWUsXHJcbiAgICAgICAgICByZWFkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1hcmtpbmcgYWxsIG5vdGlmaWNhdGlvbnMgYXMgcmVhZDonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCB1c2VyIG5vdGlmaWNhdGlvbnNcclxuICBhc3luYyBnZXRVc2VyTm90aWZpY2F0aW9ucyhcclxuICAgIHVzZXJJZDogc3RyaW5nLFxyXG4gICAgbGltaXQ6IG51bWJlciA9IDIwLFxyXG4gICAgb2Zmc2V0OiBudW1iZXIgPSAwLFxyXG4gICAgdW5yZWFkT25seTogYm9vbGVhbiA9IGZhbHNlXHJcbiAgKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgbm90aWZpY2F0aW9ucyA9IGF3YWl0IHByaXNtYS5ub3RpZmljYXRpb24uZmluZE1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICByZWNpcGllbnRzOiB7XHJcbiAgICAgICAgICAgIGhhczogdXNlcklkXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgLi4uKHVucmVhZE9ubHkgJiYgeyByZWFkOiBmYWxzZSB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxyXG4gICAgICAgIHRha2U6IGxpbWl0LFxyXG4gICAgICAgIHNraXA6IG9mZnNldFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBub3RpZmljYXRpb25zLm1hcChub3RpZiA9PiAoe1xyXG4gICAgICAgIC4uLm5vdGlmLFxyXG4gICAgICAgIGRhdGE6IG5vdGlmLmRhdGEgPyBKU09OLnBhcnNlKG5vdGlmLmRhdGEpIDogbnVsbFxyXG4gICAgICB9KSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIG5vdGlmaWNhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgdW5yZWFkIGNvdW50XHJcbiAgYXN5bmMgZ2V0VW5yZWFkQ291bnQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGF3YWl0IHByaXNtYS5ub3RpZmljYXRpb24uY291bnQoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICByZWNpcGllbnRzOiB7XHJcbiAgICAgICAgICAgIGhhczogdXNlcklkXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmVhZDogZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1bnJlYWQgY291bnQ6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENsZWFuIHVwIG9sZCBub3RpZmljYXRpb25zIChvbGRlciB0aGFuIDkwIGRheXMpXHJcbiAgYXN5bmMgY2xlYW51cE9sZE5vdGlmaWNhdGlvbnMoKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG5pbmV0eURheXNBZ28gPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBuaW5ldHlEYXlzQWdvLnNldERhdGUobmluZXR5RGF5c0Fnby5nZXREYXRlKCkgLSA5MCk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmlzbWEubm90aWZpY2F0aW9uLmRlbGV0ZU1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcclxuICAgICAgICAgICAgbHQ6IG5pbmV0eURheXNBZ29cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coYENsZWFuZWQgdXAgJHtyZXN1bHQuY291bnR9IG9sZCBub3RpZmljYXRpb25zYCk7XHJcbiAgICAgIHJldHVybiByZXN1bHQuY291bnQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbGVhbmluZyB1cCBvbGQgbm90aWZpY2F0aW9uczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxyXG5leHBvcnQgY29uc3Qgbm90aWZpY2F0aW9uTWFuYWdlciA9IE5vdGlmaWNhdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcclxuXHJcbi8vIFV0aWxpdHkgZnVuY3Rpb25zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kU2hpcG1lbnROb3RpZmljYXRpb24oXHJcbiAgc2hpcG1lbnRJZDogc3RyaW5nLFxyXG4gIG5ld1N0YXR1czogc3RyaW5nLFxyXG4gIHJlY2lwaWVudFVzZXJJZDogc3RyaW5nLFxyXG4gIGFkZGl0aW9uYWxEYXRhPzogYW55XHJcbikge1xyXG4gIHJldHVybiBub3RpZmljYXRpb25NYW5hZ2VyLm5vdGlmeVNoaXBtZW50U3RhdHVzQ2hhbmdlKHNoaXBtZW50SWQsIG5ld1N0YXR1cywgcmVjaXBpZW50VXNlcklkLCBhZGRpdGlvbmFsRGF0YSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kV2FsbGV0Tm90aWZpY2F0aW9uKFxyXG4gIHVzZXJJZDogc3RyaW5nLFxyXG4gIHRyYW5zYWN0aW9uVHlwZTogJ0NSRURJVCcgfCAnREVCSVQnLFxyXG4gIGFtb3VudDogbnVtYmVyLFxyXG4gIGJhbGFuY2VBZnRlcjogbnVtYmVyLFxyXG4gIHJlZmVyZW5jZT86IHN0cmluZyxcclxuICByZWFzb24/OiBzdHJpbmdcclxuKSB7XHJcbiAgcmV0dXJuIG5vdGlmaWNhdGlvbk1hbmFnZXIubm90aWZ5V2FsbGV0VHJhbnNhY3Rpb24odXNlcklkLCB0cmFuc2FjdGlvblR5cGUsIGFtb3VudCwgYmFsYW5jZUFmdGVyLCByZWZlcmVuY2UsIHJlYXNvbik7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kTG93U3RvY2tBbGVydChcclxuICBicmFuZFVzZXJJZDogc3RyaW5nLFxyXG4gIHBhcnRJZDogc3RyaW5nLFxyXG4gIHBhcnROYW1lOiBzdHJpbmcsXHJcbiAgcGFydENvZGU6IHN0cmluZyxcclxuICBjdXJyZW50U3RvY2s6IG51bWJlcixcclxuICBtaW5TdG9ja0xldmVsOiBudW1iZXJcclxuKSB7XHJcbiAgcmV0dXJuIG5vdGlmaWNhdGlvbk1hbmFnZXIubm90aWZ5TG93U3RvY2soYnJhbmRVc2VySWQsIHBhcnRJZCwgcGFydE5hbWUsIHBhcnRDb2RlLCBjdXJyZW50U3RvY2ssIG1pblN0b2NrTGV2ZWwpO1xyXG59Il0sIm5hbWVzIjpbInByaXNtYSIsImVtYWlsU2VydmljZSIsIk5vdGlmaWNhdGlvbk1hbmFnZXIiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwidXNlcklkIiwidHlwZSIsInRpdGxlIiwibWVzc2FnZSIsImRhdGEiLCJjb25maWciLCJkZWZhdWx0Q29uZmlnIiwiZW5hYmxlRW1haWwiLCJlbmFibGVJbkFwcCIsImVuYWJsZVNNUyIsInByaW9yaXR5IiwiY2hhbm5lbHMiLCJmaW5hbENvbmZpZyIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsInNlbGVjdCIsImVtYWlsIiwibmFtZSIsInBob25lIiwicm9sZSIsImNvbnNvbGUiLCJlcnJvciIsIm5vdGlmaWNhdGlvbkRhdGEiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJhY3Rpb25VcmwiLCJhY3Rpb25MYWJlbCIsImluY2x1ZGVzIiwiY3JlYXRlSW5BcHBOb3RpZmljYXRpb24iLCJzZW5kRW1haWxOb3RpZmljYXRpb24iLCJzZW5kU01TTm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uIiwiY3JlYXRlIiwicmVjaXBpZW50cyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWFkIiwiY3JlYXRlZEF0Iiwic2VuZE5vdGlmaWNhdGlvbiIsImxvZyIsIm5vdGlmeVNoaXBtZW50U3RhdHVzQ2hhbmdlIiwic2hpcG1lbnRJZCIsIm5ld1N0YXR1cyIsInJlY2lwaWVudFVzZXJJZCIsImFkZGl0aW9uYWxEYXRhIiwic2hpcG1lbnQiLCJpbmNsdWRlIiwic2VydmljZUNlbnRlciIsImRpc3RyaWJ1dG9yIiwiYnJhbmQiLCJyZWNpcGllbnROYW1lIiwic3RhdHVzTWVzc2FnZXMiLCJzdGF0dXMiLCJhd2JOdW1iZXIiLCJicmFuZE5hbWUiLCJub3RpZnlXYWxsZXRUcmFuc2FjdGlvbiIsInRyYW5zYWN0aW9uVHlwZSIsImFtb3VudCIsImJhbGFuY2VBZnRlciIsInJlZmVyZW5jZSIsInJlYXNvbiIsIm5vdGlmeUxvd1N0b2NrIiwiYnJhbmRVc2VySWQiLCJwYXJ0SWQiLCJwYXJ0TmFtZSIsInBhcnRDb2RlIiwiY3VycmVudFN0b2NrIiwibWluU3RvY2tMZXZlbCIsInNldmVyaXR5Iiwibm90aWZ5QWNjZXNzUmVxdWVzdCIsInJlcXVlc3RlcklkIiwicmVxdWVzdGVyTmFtZSIsInJlcXVlc3RlclJvbGUiLCJyZXF1ZXN0SWQiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJub3RpZnlSZXR1cm5SZXF1ZXN0IiwicmV0dXJuUmVxdWVzdElkIiwic2VydmljZUNlbnRlck5hbWUiLCJub3RpZnlTeXN0ZW1BbGVydCIsInVzZXJJZHMiLCJhbGVydFR5cGUiLCJwcm9taXNlcyIsIm1hcCIsInJlc3VsdHMiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsInN1Y2Nlc3NDb3VudCIsImZpbHRlciIsInIiLCJ2YWx1ZSIsImxlbmd0aCIsIm1hcmtBc1JlYWQiLCJub3RpZmljYXRpb25JZCIsInVwZGF0ZU1hbnkiLCJoYXMiLCJyZWFkQXQiLCJtYXJrQWxsQXNSZWFkIiwiZ2V0VXNlck5vdGlmaWNhdGlvbnMiLCJsaW1pdCIsIm9mZnNldCIsInVucmVhZE9ubHkiLCJub3RpZmljYXRpb25zIiwiZmluZE1hbnkiLCJvcmRlckJ5IiwidGFrZSIsInNraXAiLCJub3RpZiIsInBhcnNlIiwiZ2V0VW5yZWFkQ291bnQiLCJjb3VudCIsImNsZWFudXBPbGROb3RpZmljYXRpb25zIiwibmluZXR5RGF5c0FnbyIsInNldERhdGUiLCJnZXREYXRlIiwicmVzdWx0IiwiZGVsZXRlTWFueSIsImx0Iiwibm90aWZpY2F0aW9uTWFuYWdlciIsInNlbmRTaGlwbWVudE5vdGlmaWNhdGlvbiIsInNlbmRXYWxsZXROb3RpZmljYXRpb24iLCJzZW5kTG93U3RvY2tBbGVydCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/notification-manager.ts\n')},"(api)/./src/lib/prisma.ts":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client/edge */ "@prisma/client/edge");\n/* harmony import */ var _prisma_client_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client_edge__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/extension-accelerate */ "@prisma/extension-accelerate");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__]);\n_prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client_edge__WEBPACK_IMPORTED_MODULE_0__.PrismaClient().$extends((0,_prisma_extension_accelerate__WEBPACK_IMPORTED_MODULE_1__.withAccelerate)());\nif (true) globalForPrisma.prisma = prisma;\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtEO0FBQ1c7QUFFN0QsTUFBTUUsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSiw2REFBWUEsR0FBR0ssUUFBUSxDQUFDSiw0RUFBY0EsSUFBRztBQUU3RixJQUFJSyxJQUF5QixFQUFjSixnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXBhZ2VzLWNoYWtyYS8uL3NyYy9saWIvcHJpc21hLnRzPzAxZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQvZWRnZSdcclxuaW1wb3J0IHsgd2l0aEFjY2VsZXJhdGUgfSBmcm9tICdAcHJpc21hL2V4dGVuc2lvbi1hY2NlbGVyYXRlJ1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcclxuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KCkuJGV4dGVuZHMod2l0aEFjY2VsZXJhdGUoKSlcclxuXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsIndpdGhBY2NlbGVyYXRlIiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsIiRleHRlbmRzIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/prisma.ts\n')},"(api)/./src/pages/api/notifications.ts":(module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/auth */ "(api)/./src/lib/auth.ts");\n/* harmony import */ var _lib_notification_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/notification-manager */ "(api)/./src/lib/notification-manager.ts");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_auth__WEBPACK_IMPORTED_MODULE_0__, _lib_notification_manager__WEBPACK_IMPORTED_MODULE_1__]);\n([_lib_auth__WEBPACK_IMPORTED_MODULE_0__, _lib_notification_manager__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nasync function handler(req, res) {\n    try {\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_0__.verifyToken)(req);\n        if (!user) {\n            return res.status(401).json({\n                error: "Unauthorized"\n            });\n        }\n        if (req.method === "GET") {\n            const { limit = "20", offset = "0", unreadOnly = "false", type } = req.query;\n            const limitNum = parseInt(limit);\n            const offsetNum = parseInt(offset);\n            const unreadOnlyBool = unreadOnly === "true";\n            // Get user notifications\n            let notifications = await _lib_notification_manager__WEBPACK_IMPORTED_MODULE_1__.notificationManager.getUserNotifications(user.id, limitNum, offsetNum, unreadOnlyBool);\n            // Filter by type if specified\n            if (type && type !== "all") {\n                notifications = notifications.filter((n)=>n.type === type);\n            }\n            // Get unread count\n            const unreadCount = await _lib_notification_manager__WEBPACK_IMPORTED_MODULE_1__.notificationManager.getUnreadCount(user.id);\n            return res.status(200).json({\n                success: true,\n                notifications,\n                unreadCount,\n                pagination: {\n                    limit: limitNum,\n                    offset: offsetNum,\n                    hasMore: notifications.length === limitNum\n                }\n            });\n        }\n        if (req.method === "POST") {\n            const { action, notificationId, notificationIds } = req.body;\n            switch(action){\n                case "markAsRead":\n                    if (!notificationId) {\n                        return res.status(400).json({\n                            error: "Notification ID required"\n                        });\n                    }\n                    const markResult = await _lib_notification_manager__WEBPACK_IMPORTED_MODULE_1__.notificationManager.markAsRead(notificationId, user.id);\n                    return res.status(200).json({\n                        success: markResult,\n                        message: markResult ? "Notification marked as read" : "Failed to mark notification as read"\n                    });\n                case "markAllAsRead":\n                    const markAllResult = await _lib_notification_manager__WEBPACK_IMPORTED_MODULE_1__.notificationManager.markAllAsRead(user.id);\n                    return res.status(200).json({\n                        success: markAllResult,\n                        message: markAllResult ? "All notifications marked as read" : "Failed to mark all notifications as read"\n                    });\n                case "markMultipleAsRead":\n                    if (!notificationIds || !Array.isArray(notificationIds)) {\n                        return res.status(400).json({\n                            error: "Notification IDs array required"\n                        });\n                    }\n                    const results = await Promise.allSettled(notificationIds.map((id)=>_lib_notification_manager__WEBPACK_IMPORTED_MODULE_1__.notificationManager.markAsRead(id, user.id)));\n                    const successCount = results.filter((r)=>r.status === "fulfilled" && r.value).length;\n                    return res.status(200).json({\n                        success: successCount > 0,\n                        message: `${successCount}/${notificationIds.length} notifications marked as read`,\n                        successCount,\n                        totalCount: notificationIds.length\n                    });\n                case "createTestNotification":\n                    // Only allow for development/testing\n                    if (false) {}\n                    const testResult = await _lib_notification_manager__WEBPACK_IMPORTED_MODULE_1__.notificationManager.createNotification(user.id, "test", "Test Notification", "This is a test notification to verify the system is working correctly.", {\n                        testData: true,\n                        timestamp: new Date().toISOString(),\n                        actionUrl: "/dashboard",\n                        actionLabel: "View Dashboard"\n                    });\n                    return res.status(200).json({\n                        success: testResult,\n                        message: testResult ? "Test notification created" : "Failed to create test notification"\n                    });\n                default:\n                    return res.status(400).json({\n                        error: "Invalid action"\n                    });\n            }\n        }\n        if (req.method === "DELETE") {\n            const { notificationId } = req.query;\n            if (!notificationId) {\n                return res.status(400).json({\n                    error: "Notification ID required"\n                });\n            }\n            // For now, we\'ll just mark as read instead of deleting\n            // In the future, we could implement soft delete\n            const deleteResult = await _lib_notification_manager__WEBPACK_IMPORTED_MODULE_1__.notificationManager.markAsRead(notificationId, user.id);\n            return res.status(200).json({\n                success: deleteResult,\n                message: deleteResult ? "Notification removed" : "Failed to remove notification"\n            });\n        }\n        return res.status(405).json({\n            error: "Method not allowed"\n        });\n    } catch (error) {\n        console.error("Notifications API error:", error);\n        return res.status(500).json({\n            error: "Internal server error",\n            details: error instanceof Error ? error.message : "Unknown error"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMxQm1CLFNBQVNnQztnQkFDVHRCLFNBQVNzQixlQUFlLHlCQUF5QjtZQUNuRDtRQUNGO1FBRUEsT0FBT3RELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RCxFQUFFLE9BQU9BLE9BQU87UUFDZG1ELFFBQVFuRCxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxPQUFPO1lBQ1BvRCxTQUFTcEQsaUJBQWlCcUQsUUFBUXJELE1BQU00QixPQUFPLEdBQUc7UUFDcEQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1wYWdlcy1jaGFrcmEvLi9zcmMvcGFnZXMvYXBpL25vdGlmaWNhdGlvbnMudHM/ZmU0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnQC9saWIvYXV0aCc7XHJcbmltcG9ydCB7IG5vdGlmaWNhdGlvbk1hbmFnZXIgfSBmcm9tICdAL2xpYi9ub3RpZmljYXRpb24tbWFuYWdlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlUb2tlbihyZXEpO1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgICAgY29uc3QgeyBcclxuICAgICAgICBsaW1pdCA9ICcyMCcsIFxyXG4gICAgICAgIG9mZnNldCA9ICcwJywgXHJcbiAgICAgICAgdW5yZWFkT25seSA9ICdmYWxzZScsXHJcbiAgICAgICAgdHlwZSBcclxuICAgICAgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICAgIGNvbnN0IGxpbWl0TnVtID0gcGFyc2VJbnQobGltaXQgYXMgc3RyaW5nKTtcclxuICAgICAgY29uc3Qgb2Zmc2V0TnVtID0gcGFyc2VJbnQob2Zmc2V0IGFzIHN0cmluZyk7XHJcbiAgICAgIGNvbnN0IHVucmVhZE9ubHlCb29sID0gdW5yZWFkT25seSA9PT0gJ3RydWUnO1xyXG5cclxuICAgICAgLy8gR2V0IHVzZXIgbm90aWZpY2F0aW9uc1xyXG4gICAgICBsZXQgbm90aWZpY2F0aW9ucyA9IGF3YWl0IG5vdGlmaWNhdGlvbk1hbmFnZXIuZ2V0VXNlck5vdGlmaWNhdGlvbnMoXHJcbiAgICAgICAgdXNlci5pZCxcclxuICAgICAgICBsaW1pdE51bSxcclxuICAgICAgICBvZmZzZXROdW0sXHJcbiAgICAgICAgdW5yZWFkT25seUJvb2xcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIEZpbHRlciBieSB0eXBlIGlmIHNwZWNpZmllZFxyXG4gICAgICBpZiAodHlwZSAmJiB0eXBlICE9PSAnYWxsJykge1xyXG4gICAgICAgIG5vdGlmaWNhdGlvbnMgPSBub3RpZmljYXRpb25zLmZpbHRlcihuID0+IG4udHlwZSA9PT0gdHlwZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEdldCB1bnJlYWQgY291bnRcclxuICAgICAgY29uc3QgdW5yZWFkQ291bnQgPSBhd2FpdCBub3RpZmljYXRpb25NYW5hZ2VyLmdldFVucmVhZENvdW50KHVzZXIuaWQpO1xyXG5cclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG5vdGlmaWNhdGlvbnMsXHJcbiAgICAgICAgdW5yZWFkQ291bnQsXHJcbiAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgbGltaXQ6IGxpbWl0TnVtLFxyXG4gICAgICAgICAgb2Zmc2V0OiBvZmZzZXROdW0sXHJcbiAgICAgICAgICBoYXNNb3JlOiBub3RpZmljYXRpb25zLmxlbmd0aCA9PT0gbGltaXROdW1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcclxuICAgICAgY29uc3QgeyBhY3Rpb24sIG5vdGlmaWNhdGlvbklkLCBub3RpZmljYXRpb25JZHMgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgICAgc3dpdGNoIChhY3Rpb24pIHtcclxuICAgICAgICBjYXNlICdtYXJrQXNSZWFkJzpcclxuICAgICAgICAgIGlmICghbm90aWZpY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdOb3RpZmljYXRpb24gSUQgcmVxdWlyZWQnIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbnN0IG1hcmtSZXN1bHQgPSBhd2FpdCBub3RpZmljYXRpb25NYW5hZ2VyLm1hcmtBc1JlYWQobm90aWZpY2F0aW9uSWQsIHVzZXIuaWQpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2VzczogbWFya1Jlc3VsdCxcclxuICAgICAgICAgICAgbWVzc2FnZTogbWFya1Jlc3VsdCA/ICdOb3RpZmljYXRpb24gbWFya2VkIGFzIHJlYWQnIDogJ0ZhaWxlZCB0byBtYXJrIG5vdGlmaWNhdGlvbiBhcyByZWFkJ1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNhc2UgJ21hcmtBbGxBc1JlYWQnOlxyXG4gICAgICAgICAgY29uc3QgbWFya0FsbFJlc3VsdCA9IGF3YWl0IG5vdGlmaWNhdGlvbk1hbmFnZXIubWFya0FsbEFzUmVhZCh1c2VyLmlkKTtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IG1hcmtBbGxSZXN1bHQsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1hcmtBbGxSZXN1bHQgPyAnQWxsIG5vdGlmaWNhdGlvbnMgbWFya2VkIGFzIHJlYWQnIDogJ0ZhaWxlZCB0byBtYXJrIGFsbCBub3RpZmljYXRpb25zIGFzIHJlYWQnXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2FzZSAnbWFya011bHRpcGxlQXNSZWFkJzpcclxuICAgICAgICAgIGlmICghbm90aWZpY2F0aW9uSWRzIHx8ICFBcnJheS5pc0FycmF5KG5vdGlmaWNhdGlvbklkcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdOb3RpZmljYXRpb24gSURzIGFycmF5IHJlcXVpcmVkJyB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFxyXG4gICAgICAgICAgICBub3RpZmljYXRpb25JZHMubWFwKGlkID0+IG5vdGlmaWNhdGlvbk1hbmFnZXIubWFya0FzUmVhZChpZCwgdXNlci5pZCkpXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NDb3VudCA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5zdGF0dXMgPT09ICdmdWxmaWxsZWQnICYmIHIudmFsdWUpLmxlbmd0aDtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgc3VjY2Vzczogc3VjY2Vzc0NvdW50ID4gMCxcclxuICAgICAgICAgICAgbWVzc2FnZTogYCR7c3VjY2Vzc0NvdW50fS8ke25vdGlmaWNhdGlvbklkcy5sZW5ndGh9IG5vdGlmaWNhdGlvbnMgbWFya2VkIGFzIHJlYWRgLFxyXG4gICAgICAgICAgICBzdWNjZXNzQ291bnQsXHJcbiAgICAgICAgICAgIHRvdGFsQ291bnQ6IG5vdGlmaWNhdGlvbklkcy5sZW5ndGhcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjYXNlICdjcmVhdGVUZXN0Tm90aWZpY2F0aW9uJzpcclxuICAgICAgICAgIC8vIE9ubHkgYWxsb3cgZm9yIGRldmVsb3BtZW50L3Rlc3RpbmdcclxuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnVGVzdCBub3RpZmljYXRpb25zIG5vdCBhbGxvd2VkIGluIHByb2R1Y3Rpb24nIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBhd2FpdCBub3RpZmljYXRpb25NYW5hZ2VyLmNyZWF0ZU5vdGlmaWNhdGlvbihcclxuICAgICAgICAgICAgdXNlci5pZCxcclxuICAgICAgICAgICAgJ3Rlc3QnLFxyXG4gICAgICAgICAgICAnVGVzdCBOb3RpZmljYXRpb24nLFxyXG4gICAgICAgICAgICAnVGhpcyBpcyBhIHRlc3Qgbm90aWZpY2F0aW9uIHRvIHZlcmlmeSB0aGUgc3lzdGVtIGlzIHdvcmtpbmcgY29ycmVjdGx5LicsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0ZXN0RGF0YTogdHJ1ZSxcclxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICBhY3Rpb25Vcmw6ICcvZGFzaGJvYXJkJyxcclxuICAgICAgICAgICAgICBhY3Rpb25MYWJlbDogJ1ZpZXcgRGFzaGJvYXJkJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRlc3RSZXN1bHQsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRlc3RSZXN1bHQgPyAnVGVzdCBub3RpZmljYXRpb24gY3JlYXRlZCcgOiAnRmFpbGVkIHRvIGNyZWF0ZSB0ZXN0IG5vdGlmaWNhdGlvbidcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGFjdGlvbicgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0RFTEVURScpIHtcclxuICAgICAgY29uc3QgeyBub3RpZmljYXRpb25JZCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgICAgaWYgKCFub3RpZmljYXRpb25JZCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm90aWZpY2F0aW9uIElEIHJlcXVpcmVkJyB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCBtYXJrIGFzIHJlYWQgaW5zdGVhZCBvZiBkZWxldGluZ1xyXG4gICAgICAvLyBJbiB0aGUgZnV0dXJlLCB3ZSBjb3VsZCBpbXBsZW1lbnQgc29mdCBkZWxldGVcclxuICAgICAgY29uc3QgZGVsZXRlUmVzdWx0ID0gYXdhaXQgbm90aWZpY2F0aW9uTWFuYWdlci5tYXJrQXNSZWFkKG5vdGlmaWNhdGlvbklkIGFzIHN0cmluZywgdXNlci5pZCk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGRlbGV0ZVJlc3VsdCxcclxuICAgICAgICBtZXNzYWdlOiBkZWxldGVSZXN1bHQgPyAnTm90aWZpY2F0aW9uIHJlbW92ZWQnIDogJ0ZhaWxlZCB0byByZW1vdmUgbm90aWZpY2F0aW9uJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ05vdGlmaWNhdGlvbnMgQVBJIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsidmVyaWZ5VG9rZW4iLCJub3RpZmljYXRpb25NYW5hZ2VyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInVzZXIiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJtZXRob2QiLCJsaW1pdCIsIm9mZnNldCIsInVucmVhZE9ubHkiLCJ0eXBlIiwicXVlcnkiLCJsaW1pdE51bSIsInBhcnNlSW50Iiwib2Zmc2V0TnVtIiwidW5yZWFkT25seUJvb2wiLCJub3RpZmljYXRpb25zIiwiZ2V0VXNlck5vdGlmaWNhdGlvbnMiLCJpZCIsImZpbHRlciIsIm4iLCJ1bnJlYWRDb3VudCIsImdldFVucmVhZENvdW50Iiwic3VjY2VzcyIsInBhZ2luYXRpb24iLCJoYXNNb3JlIiwibGVuZ3RoIiwiYWN0aW9uIiwibm90aWZpY2F0aW9uSWQiLCJub3RpZmljYXRpb25JZHMiLCJib2R5IiwibWFya1Jlc3VsdCIsIm1hcmtBc1JlYWQiLCJtZXNzYWdlIiwibWFya0FsbFJlc3VsdCIsIm1hcmtBbGxBc1JlYWQiLCJBcnJheSIsImlzQXJyYXkiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJtYXAiLCJzdWNjZXNzQ291bnQiLCJyIiwidmFsdWUiLCJ0b3RhbENvdW50IiwicHJvY2VzcyIsInRlc3RSZXN1bHQiLCJjcmVhdGVOb3RpZmljYXRpb24iLCJ0ZXN0RGF0YSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImFjdGlvblVybCIsImFjdGlvbkxhYmVsIiwiZGVsZXRlUmVzdWx0IiwiY29uc29sZSIsImRldGFpbHMiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/notifications.ts\n')}};var __webpack_require__=require("../../webpack-api-runtime.js");__webpack_require__.C(exports);var __webpack_exec__=c=>__webpack_require__(__webpack_require__.s=c),__webpack_exports__=__webpack_require__.X(0,["vendor-chunks/next"],()=>__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnotifications&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cnotifications.ts&middlewareConfigBase64=e30%3D!"));module.exports=__webpack_exports__})();